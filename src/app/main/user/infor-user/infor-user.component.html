<div class="label-header">{{'user.information.individual' | translate}}</div>
<form [formGroup]="addInforForm" class="content">
    <div class="content-body">
        <div class="row">
            <div class="col-md-4">
                <div class="label text-color">{{'user.name' | translate}} <span class="required-title">*</span></div>
                <div class="input-data">
                    <input type="text" formControlName="name">
                </div>
                <div *ngIf="submitted && f.name.errors" class="invalid">
                    <div *ngIf="f.name.errors.required">{{'error.user.name.required' | translate}}</div>
                    <div *ngIf="f.name.errors.pattern">{{'Họ tên không được chứa ký tự đặc biệt' | translate}}</div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="label text-color">{{'user.email' | translate}} <span class="required-title">*</span></div>
                <div class="input-data hidden-color">
                    <input type="text" formControlName="email" [readonly]="true" class="hidden-color">
                </div>
                <div *ngIf="submitted && f.email.errors" class="invalid">
                    <div *ngIf="f.email.errors.required">{{'error.user.email.required' | translate}}</div>
                    <div *ngIf="f.email.errors.email">{{'error.user.email.format' | translate}}</div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="label text-color">{{ "user.birthday" | translate }}</div>
                <div>
                    <p-calendar formControlName="birthday" [maxDate]="maxDate" [showIcon]="true" dateFormat="dd/mm/yy" placeholder="dd/MM/yyyy"></p-calendar>
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col-md-4">
                <div class="label text-color">{{'user.phone' | translate}} <span class="required-title">*</span></div>
                <div class="input-data">
                    <input type="text" formControlName="phone">
                </div>
                <div *ngIf="submitted && f.phone.errors" class="invalid">
                    <div *ngIf="f.phone.errors.required">{{'error.user.phone.required' | translate}}</div>
                    <div *ngIf="f.phone.errors.pattern">{{'error.user.phone.format' | translate}}</div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="label text-color">{{'organization' | translate}} <span class="required-title">*</span></div>
                <div class="input-data hidden-color">
                    <div class="hidden-color">{{organizationName}}</div>
                </div>
                <div *ngIf="submitted && f.organizationId.errors" class="invalid">
                    <div *ngIf="f.organizationId.errors.required">{{'error.unit.name.required' | translate}}</div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="label text-color">{{'menu.role.list' | translate}} <span class="required-title">*</span></div>
                <div class="input-data hidden-color">
                    <div class="hidden-color">{{roleName}}</div>
                </div>
                <div *ngIf="submitted && f.role.errors" class="invalid">
                    <div *ngIf="f.role.errors.required">{{'error.role.name.required' | translate}}</div>
                </div>
            </div>
        </div>
        <div class="row" style="justify-content: center;padding-top: 0px;">
            <button class="save-button" (click)="updateUser()">{{'btn.update' | translate}}</button>
        </div>
    </div>
</form>

<br>

<div class="label-header">{{'sign.information' | translate}}</div>
<div class="content-body">
    <div class="row">
        <div class="col-md-4">
            <div class="label-header">
                {{'sign.file-image' | translate}}
            </div>
            <div class="content-body">
                <div [hidden]="imgSignPCSelect">
                    <input id="attachFileSignature" type="file" accept=".jpg, .png, .jpge" (change)="fileChangedAttach($event,'sign')" style="display: none;" />
                    <div class="select-contract container-img-file" (click)="addFileAttach('sign')">
                        <div class="upload-image-region d-flex flex-column container-img-file-1">
                            <img src="assets/img/img-icon.svg" alt="#" width="20px">
                            <div class="text-choose-file">{{'choose.sign.file.image' | translate}}</div>
                            <div class="text-support-extension">{{'support.format.PNG.JPG.JPGE' | translate}}</div>
                        </div>
                    </div>
                </div>
                <div class="image-div">
                    <img *ngIf="imgSignPCSelect" [src]="imgSignPCSelect" alt="" style="display: block;margin: 10px auto;max-height: 30vh;max-width: 100%;">
                    <img class="hidden_img" (click)="addFileAttach('sign')" src="assets/img/img-icon.svg" width="15" height="15" />
                </div>
            </div>

            <div class="label-header" style="margin-top: 10px">
                {{'sign.file-image.mark' | translate}}
            </div>
            <div class="content-body">
                <div [hidden]="imgSignPCSelectMark">
                    <input id="attachFileMark" type="file" accept=".jpg, .png, .jpeg" (change)="fileChangedAttach($event,'mark')" style="display: none;" />
                    <div class="select-contract container-img-file" (click)="addFileAttach('mark')">
                        <div class="upload-image-region d-flex flex-column container-img-file-1">
                            <img src="assets/img/img-icon.svg" alt="#" width="20px">
                            <div class="text-choose-file">{{'choose.sign.file.image' | translate}}</div>
                            <div class="text-support-extension">{{'support.format.PNG.JPG.JPGE' | translate}}</div>
                        </div>
                    </div>
                </div>
                <div class="image-div">
                    <img *ngIf="imgSignPCSelectMark" [src]="imgSignPCSelectMark" alt="" style="display: block;margin: 10px auto;max-height: 30vh;max-width: 100%;">
                    <img class="hidden_img" (click)="addFileAttach('mark')" src="assets/img/img-icon.svg" width="15" height="15" />
                </div>
            </div>
        </div>

        <div class="col-md-4">
            <form [formGroup]="addKpiForm">
                <div class="label-header">
                    <div class="row" style="padding: 0 10px;">
                        <div class="col-md-12">
                            {{'sign.kpi' | translate}}
                        </div>
                    </div>
                </div>
                <div>
                    <div class="row">
                        <div class="col-md-12">
                            <div>{{'user.phone' | translate}}</div>
                            <div class="input-data">
                                <input type="text" formControlName="phoneKpi">
                            </div>
                            <div *ngIf="submittedSign && fKpi.phoneKpi.errors" class="invalid">
                                <div *ngIf="fKpi.phoneKpi.errors.pattern">{{'error.user.phone.format' | translate}}</div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-12">
                            <div>{{'user.network' | translate}}</div>
                            <div>
                                <p-dropdown panelStyleClass="font" [options]="networkList" formControlName="networkKpi" optionLabel="name" optionValue="id" placeholder="{{'choose.network' | translate}}" [filter]="true" filterBy="name" [showClear]="true"></p-dropdown>
                            </div>
                        </div>
                    </div>
                </div>
            </form>
        </div>

        <div class="col-md-4">
            <form [formGroup]="addHsmForm">
                <div class="label-header">
                    <div class="row" style="padding: 0 10px;">
                        <div class="col-md-12">
                            {{'sign.hsm' | translate}}
                        </div>
                    </div>
                </div>
                <div>

                    <!--Mã số thuế hsm-->
                    <div class="row">
                        <div class="col-md-12">
                            <div>{{'tax_code.cardId' | translate}}</div>
                            <div class="input-data">
                                <input type="text" formControlName="taxCodeHsm">
                            </div>
                            <div *ngIf="submittedSign && fHsm.taxCodeHsm.errors" class="invalid">
                                <div *ngIf="fHsm.taxCodeHsm.errors.pattern">{{'Mã số thuế/CMT/CCCD không đúng định dạng' | translate}}</div>
                            </div>
                        </div>
                    </div>

                    <!--Tên người dùng hsm-->
                    <div class="row">
                        <div class="col-md-12">
                            <div>{{'user.name.v2' | translate}}</div>
                            <div class="input-data">
                                <input type="text" formControlName="nameHsm" id="nameHsm">
                            </div>
                            <div *ngIf="submittedSign && fHsm.nameHsm.errors" class="invalid">
                                <div *ngIf="fHsm.nameHsm.errors.pattern">{{'Tên người dùng không được chứa ký tự đặc biệt' | translate}}</div>
                            </div>
                        </div>
                    </div>

                    <!--Mật khẩu cấp 1 hsm-->
                    <div class="row">
                        <div class="col-md-12">
                            <div>{{'password.level1' | translate}}</div>
                            <div class="input-line">
                                <input *ngIf="this.fieldTextType === false" class="input-text pw" type="text" formControlName="password1Hsm" id="password1Hsm">
                                <input class="input-text" *ngIf="this.fieldTextType === true" type="text" formControlName="password1Hsm" id="password1Hsm" />
                                <div class="icon-password">
                                    <i class="fa" [ngClass]="{
                                            'fa-eye-slash': !fieldTextType,
                                            'fa-eye': fieldTextType
                        }" (click)="toggleFieldTextType()" style="color: #106DB6;"></i>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </form>
        </div>
    </div>
    <div class="row" style="justify-content: center;padding-top: 0px;">
        <button class="save-button" (click)="updateSignUser()">{{'btn.update' | translate}}</button>
    </div>
</div>

<ngx-spinner bdColor="rgba(51,51,51,0.8)" size="medium" color="#fff" type="ball-spin-clockwise">
    <p style="font-size: 18px; color: white">{{'sys.processing' | translate}}...</p>
</ngx-spinner>