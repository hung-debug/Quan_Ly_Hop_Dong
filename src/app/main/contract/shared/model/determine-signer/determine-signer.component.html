
<!-- form step 2 -->
<div>
  <form [formGroup]="userForm" (ngSubmit)="onSubmit()">
    <div class="row">
      <div class="col-md-1 order">
          <input type="number" formControlName="order" class="form-control order_input">
      </div>
      <div class="col-md-11 form_content">
        <p>
          <label class="labelOrg">TỔ CHỨC CỦA TÔI</label>
          <input class="form-control textOrg" type="text" id="name" name="name" formControlName="name" readonly>
        </p>

        <!-- User view -->
        <div class="add_content"  formArrayName="userViews">
          <div class="label">Người xem xét</div>
          <hr>
          <div *ngFor="let userView of userViews().controls; let i=index" [formGroupName]="i">
            <div class="row">
              <div class="col-md-1 order">
                  <input type="number" formControlName="order" class="form-control order_input">
              </div>
              <div class="col-md-10">
                <div class="row">
                  <div class="col-md-6">
                    <div class="label_item">Họ tên <span class="require_star">*</span></div>
                    <input type="text" formControlName="name" class="form-control">
                  </div>
                  <div class="col-md-6">
                    <div class="label_item">Email <span class="require_star">*</span></div>
                      <input type="text" formControlName="email" class="form-control">
                  </div>
                </div>
              </div>
              <div class="col-md-1 remove">
                  <i (click)="removeUserView(i)" class="fa fa-times-circle remove_icon"></i>
              </div>
            </div>
          </div>
          <div class="add_click" (click)="addUserView()"><a class="add_link"><i class="fa fa-plus-circle"></i> Thêm người xem xét</a></div>
        </div>

        <!-- User sign -->
        <div class="add_content" formArrayName="userSigns">
          <div class="label">Người ký</div>
          <hr>
          <div *ngFor="let userSign of userSigns().controls; let i=index" [formGroupName]="i">
            <div class="row">
              <div class="col-md-1 order">
                <input type="number" formControlName="order" class="form-control order_input">
              </div>
              <div class="col-md-10">
                <div class="row">
                  <div class="col-md-6">
                    <div class="label_item">Họ tên <span class="require_star">*</span></div>
                    <input type="text" formControlName="name" class="form-control">
                  </div>
                  <div class="col-md-6">
                    <div class="label_item">Email <span class="require_star">*</span></div>
                      <input type="text" formControlName="email" class="form-control">
                  </div>
                </div>
                <div class="row">
                  <div class="col-md-6">
                    <div class="label_item">Loại ký <span class="require_star">*</span></div>
                    <div  class="col">
                      <ng-multiselect-dropdown
                        formControlName="signType"
                        [placeholder]="'-- Chọn --'"
                        [settings]="dropdownSignTypeSettings"
                        [data]="signTypeList">
                        <ng-template
                          #optionsTemplate
                          let-item
                          let-option="option"
                          let-id="id"
                          let-isSelected="isSelected">
                          <div style="padding: 1px 10px; margin-right: 10px; right: 2px; top: -2px;">
                            <label
                              style="color: #333; font-weight: normal;"
                              [ngStyle]="{ 'font-weight': isSelected? 'bold':' normal','color': getSignTypeItems[id].isDisabled? 'lightgrey': ''}"
                              >{{getSignTypeItems[id].item_text}}</label>
                          </div>
                        </ng-template>
                      </ng-multiselect-dropdown>
                    </div>
                  </div>
                  <div class="col-md-1">
                    <div class="label_item">OTP</div>
                    <input type="checkbox" formControlName="isOtp" class="form-check-input">
                  </div>
                  <div class="col-md-5">
                    <div class="label_item">Số điện thoại <span class="require_star">*</span></div>
                    <input type="text" formControlName="phone" class="form-control">
                  </div>
                </div>
              </div>
              <div class="col-md-1 remove">
                <i (click)="removeUserSign(i)" class="fa fa-times-circle remove_icon"></i>
              </div>
            </div>
          </div>
          <div class="add_click" (click)="addUserSign()"><a class="add_link"><i class="fa fa-plus-circle"></i> Thêm người ký</a></div>
        </div>

        <!-- User document -->
        <div class="add_content" formArrayName="userDocs">
          <div class="label">Văn thư</div>
          <hr>
          <div *ngFor="let userDoc of userDocs().controls; let i=index" [formGroupName]="i">
            <div class="row">
              <div class="col-md-1 order">
                <input type="number" formControlName="order" class="form-control order_input">
              </div>
              <div class="col-md-10">
                <div class="row">
                  <div class="col-md-6">
                    <div class="label_item">Họ tên <span class="require_star">*</span></div>
                    <input type="text" formControlName="name" class="form-control">
                  </div>
                  <div class="col-md-6">
                    <div class="label_item">Email <span class="require_star">*</span></div>
                    <input type="text" formControlName="email" class="form-control">
                  </div>
                </div>
                <div class="row">
                  <div class="col-md-6">
                    <div class="label_item">Loại ký <span class="require_star">*</span></div>
                    <div class="col">
                      <ng-multiselect-dropdown
                        formControlName="signType"
                        [placeholder]="'-- Chọn --'"
                        [settings]="dropdownSignTypeSettings"
                        [data]="signTypeList">
                        <ng-template
                          #optionsTemplate
                          let-item
                          let-option="option"
                          let-id="id"
                          let-isSelected="isSelected">
                          <div style="padding: 1px 10px; margin-right: 10px; right: 2px; top: -2px;">
                            <label
                              style="color: #333; font-weight: normal;"
                              [ngStyle]="{ 'font-weight': isSelected? 'bold':' normal','color': getSignTypeItems[id].isDisabled? 'lightgrey': ''}"
                              >{{getSignTypeItems[id].item_text}}</label>
                          </div>
                        </ng-template>
                      </ng-multiselect-dropdown>
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-md-1 remove">
                <i (click)="removeUserDoc(i)" class="fa fa-times-circle remove_icon"></i>
              </div>
            </div>
          </div>
          <div class="add_click" (click)="addUserDoc()"><a class="add_link"><i class="fa fa-plus-circle"></i> Thêm văn thư</a></div>
        </div>
      </div>
    </div>
  </form>

  <form [formGroup]="partnerForm">
    <div formArrayName='partnerArrs' *ngFor="let partners of partnerArrs().controls; let a = index;">
      <div [formGroupName]="a">
        <div class="partner_content" >
          <div class="row">
            <div class="col-md-1 order">
                <input type="number" formControlName="order" class="form-control order_input">
            </div>
            <div class="col-md-11 form_content">

              <div class="row">
                <div class="radio col-md-6 label_type">
                  <label><input type="radio" formControlName="type" [value]="1" [ngModel]="partners.value.type"> <span> Tổ chức</span></label>
                </div>
                <div class="radio col-md-6 label_type">
                  <label><input type="radio" formControlName="type" [value]="2" [ngModel]="partners.value.type"> <span> Cá nhân</span></label>
                </div>
              </div>

              <div *ngIf="partners.value.type==1">
                <p>
                  <label class="labelOrg">TÊN ĐỐI TÁC <span class="require_star">*</span></label>
                  <input class="form-control textOrg" id="name" name="name" formControlName="name">
                </p>

                <!-- Partner lead -->
                <div class="add_content" formArrayName="partnerLeads">
                  <div class="label">Người điều phối</div>
                  <hr>
                  <div *ngFor="let partnerLead of partnerLeads(a).controls; let i=index" [formGroupName]="i">
                    <div class="row">
                      <div class="col-md-1 order">
                        <input type="number" formControlName="order" class="form-control order_input">
                      </div>
                      <div class="col-md-10">
                        <div class="row">
                          <div class="col-md-6">
                            <div class="label_item">Họ tên</div>
                            <input type="text" formControlName="name" class="form-control">
                          </div>
                          <div class="col-md-6">
                            <div class="label_item">Email</div>
                            <input type="text" formControlName="email" class="form-control">
                          </div>
                        </div>
                      </div>
                      <div class="col-md-1 remove">
                        <i (click)="removePartnerLead(a, i)" class="fa fa-times-circle remove_icon"></i>
                      </div>
                    </div>
                  </div>
                  <div class="add_click" (click)="addPartnerLead(a)"><a class="add_link"><i class="fa fa-plus-circle"></i> Thêm người điều phối</a></div>
                </div>

                <!-- Partner view -->
                <div class="add_content" formArrayName="partnerViews">
                  <div class="label">Người xem xét</div>
                  <hr>
                  <div *ngFor="let partnerView of partnerViews(a).controls; let i=index" [formGroupName]="i">
                    <div class="row">
                      <div class="col-md-1 order">
                        <input type="number" formControlName="order" class="form-control order_input">
                      </div>
                      <div class="col-md-10">
                        <div class="row">
                          <div class="col-md-6">
                            <div class="label_item">Họ tên <span class="require_star">*</span></div>
                            <input type="text" formControlName="name" class="form-control">
                          </div>
                          <div class="col-md-6">
                            <div class="label_item">Email <span class="require_star">*</span></div>
                            <input type="text" formControlName="email" class="form-control">
                          </div>
                        </div>
                      </div>
                      <div class="col-md-1 remove">
                        <i (click)="removePartnerView(a, i)" class="fa fa-times-circle remove_icon"></i>
                      </div>
                    </div>
                  </div>
                  <div class="add_click" (click)="addPartnerView(a)"><a class="add_link"><i class="fa fa-plus-circle"></i> Thêm người xem xét</a></div>
                </div>

                <!-- Partner sign -->
                <div class="add_content" formArrayName="partnerSigns">
                  <div class="label">Người ký</div>
                  <hr>
                  <div *ngFor="let partnerSign of partnerSigns(a).controls; let i=index" [formGroupName]="i">
                    <div class="row">
                      <div class="col-md-1 order">
                        <input type="number" formControlName="order" class="form-control order_input">
                      </div>
                      <div class="col-md-10">
                        <div class="row">
                          <div class="col-md-6">
                            <div class="label_item">Họ tên <span class="require_star">*</span></div>
                            <input type="text" formControlName="name" class="form-control">
                          </div>
                          <div class="col-md-6">
                            <div class="label_item">Email <span class="require_star">*</span></div>
                            <input type="text" formControlName="email" class="form-control">
                          </div>
                        </div>
                        <div class="row">
                          <div class="col-md-6">
                            <div class="label_item">Loại ký <span class="require_star">*</span></div>
                            <div class="col">
                              <ng-multiselect-dropdown
                                formControlName="signType"
                                [placeholder]="'-- Chọn --'"
                                [settings]="dropdownSignTypeSettings"
                                [data]="signTypeList">
                                <ng-template
                                  #optionsTemplate
                                  let-item
                                  let-option="option"
                                  let-id="id"
                                  let-isSelected="isSelected">
                                  <div style="padding: 1px 10px; margin-right: 10px; right: 2px; top: -2px;">
                                    <label
                                      style="color: #333; font-weight: normal;"
                                      [ngStyle]="{ 'font-weight': isSelected? 'bold':' normal','color': getSignTypeItems[id].isDisabled? 'lightgrey': ''}"
                                      >{{getSignTypeItems[id].item_text}}</label>
                                  </div>
                                </ng-template>
                              </ng-multiselect-dropdown>
                            </div>
                          </div>
                          <div class="col-md-1">
                            <div class="label_item">OTP</div>
                            <input type="checkbox" formControlName="isOtp" class="form-check-input">
                          </div>
                          <div class="col-md-5">
                            <div class="label_item">Số điện thoại <span class="require_star">*</span></div>
                            <input type="text" formControlName="phone" class="form-control">
                          </div>
                        </div>
                      </div>
                      <div class="col-md-1 remove">
                        <i (click)="removePartnerSign(a, i)" class="fa fa-times-circle remove_icon"></i>
                      </div>
                    </div>
                  </div>
                  <div class="add_click" (click)="addPartnerSign(a)"><a class="add_link"><i class="fa fa-plus-circle"></i> Thêm người ký</a></div>
                </div>

                <!-- Partner document -->
                <div class="add_content" formArrayName="partnerDocs">
                  <div class="label">Văn thư</div>
                  <hr>
                  <div *ngFor="let partnerDoc of partnerDocs(a).controls; let i=index" [formGroupName]="i">
                    <div class="row">
                      <div class="col-md-1 order">
                        <input type="number" formControlName="order" class="form-control order_input">
                      </div>
                      <div class="col-md-10">
                        <div class="row">
                          <div class="col-md-6">
                            <div class="label_item">Họ tên <span class="require_star">*</span></div>
                            <input type="text" formControlName="name" class="form-control">
                          </div>
                          <div class="col-md-6">
                            <div class="label_item">Email <span class="require_star">*</span></div>
                            <input type="text" formControlName="email" class="form-control">
                          </div>
                        </div>
                        <div class="row">
                          <div class="col-md-6">
                            <div class="label_item">Loại ký <span class="require_star">*</span></div>
                            <div class="col">
                              <ng-multiselect-dropdown
                                formControlName="signType"
                                [placeholder]="'-- Chọn --'"
                                [settings]="dropdownSignTypeSettings"
                                [data]="signTypeList">
                                <ng-template
                                  #optionsTemplate
                                  let-item
                                  let-option="option"
                                  let-id="id"
                                  let-isSelected="isSelected">
                                  <div style="padding: 1px 10px; margin-right: 10px; right: 2px; top: -2px;">
                                    <label
                                      style="color: #333; font-weight: normal;"
                                      [ngStyle]="{ 'font-weight': isSelected? 'bold':' normal','color': getSignTypeItems[id].isDisabled? 'lightgrey': ''}"
                                      >{{getSignTypeItems[id].item_text}}</label>
                                  </div>
                                </ng-template>
                              </ng-multiselect-dropdown>
                            </div>
                          </div>
                        </div>
                      </div>
                      <div class="col-md-1 remove">
                        <i (click)="removePartnerDoc(a, i)" class="fa fa-times-circle remove_icon"></i>
                      </div>
                    </div>
                  </div>
                  <div class="add_click" (click)="addPartnerDoc(a)"><a class="add_link"><i class="fa fa-plus-circle"></i> Thêm văn thư</a></div>
                </div>
              </div>

              <div *ngIf="partners.value.type==2">
                <p>
                  <label class="labelOrg">TÊN ĐỐI TÁC <span class="require_star">*</span></label>
                  <input class="form-control textOrg" id="name" name="name" formControlName="name">
                </p>

                <!-- Partner user -->
                <div class="add_content" formArrayName="partnerUsers">
                  <div class="label">Người ký</div>
                  <hr>
                  <div *ngFor="let partnerUser of partnerUsers(a)?.controls; let i=index" [formGroupName]="i">
                    <div class="row">
                      <div class="col-md-1 order">
                        <input type="number" formControlName="order" class="form-control order_input">
                      </div>
                      <div class="col-md-10">
                        <div class="row">
                          <div class="col-md-6">
                            <div class="label_item">Họ tên <span class="require_star">*</span></div>
                            <input type="text" formControlName="name" class="form-control">
                          </div>
                          <div class="col-md-6">
                            <div class="label_item">Email <span class="require_star">*</span></div>
                            <input type="text" formControlName="email" class="form-control">
                          </div>
                        </div>
                        <div class="row">
                          <div class="col-md-6">
                            <div class="label_item">Loại ký <span class="require_star">*</span></div>
                            <div class="col">
                              <ng-multiselect-dropdown
                                formControlName="signType"
                                [placeholder]="'-- Chọn --'"
                                [settings]="dropdownSignTypeSettings"
                                [data]="signTypeList">
                                <ng-template
                                  #optionsTemplate
                                  let-item
                                  let-option="option"
                                  let-id="id"
                                  let-isSelected="isSelected">
                                  <div style="padding: 1px 10px; margin-right: 10px; right: 2px; top: -2px;">
                                    <label
                                      style="color: #333; font-weight: normal;"
                                      [ngStyle]="{ 'font-weight': isSelected? 'bold':' normal','color': getSignTypeItems[id].isDisabled? 'lightgrey': ''}"
                                      >{{getSignTypeItems[id].item_text}}</label>
                                  </div>
                                </ng-template>
                              </ng-multiselect-dropdown>
                            </div>
                          </div>
                          <div class="col-md-1">
                            <div class="label_item">OTP</div>
                            <input type="checkbox" formControlName="isOtp" class="form-check-input">
                          </div>
                          <div class="col-md-5">
                            <div class="label_item">Số điện thoại <span class="require_star">*</span></div>
                            <input type="text" formControlName="phone" class="form-control">
                          </div>
                        </div>
                      </div>
                      <div class="col-md-1 remove">
                        <i (click)="removePartnerUser(a, i)" class="fa fa-times-circle remove_icon"></i>
                      </div>
                    </div>
                  </div>
                  <div class="add_click" (click)="addPartnerUser(a)"><a class="add_link"><i class="fa fa-plus-circle"></i> Thêm người ký</a></div>
                </div>
              </div>
            </div>
          </div>
        </div>

      </div>

    </div>
    <div class="row">
      <div class="col-md-1"></div>
      <div class="col-md-11">
        <div class="add_click" (click)="addPartner()"><a class="add_link"><i class="fa fa-plus-circle"></i> Thêm đối tác</a></div>
      </div>
    </div>
  </form>

  <br/>
  {{this.userForm.value | json}}
  <br/>
  {{this.partnerForm.value | json}}
</div>

<div class="footer-determine" style="display: flex; justify-content: space-between">
  <div style="width: 200px;">
    <button (click)="back($event, 'infor-contract')" type="button" name="next" class="next action-button" style="background-color: #8B8B8B">Quay lại</button>
  </div>
  <div class="content_footer">@Copyright 2021 - MobiFone</div>
  <div>
    <button type="button" name="next" class="next draft-button">Lưu nháp</button>
    <button (click)="next()" type="button" name="next" class="next action-button pull-right">Tiếp theo</button>
  </div>
</div>

