<div class="container-fluid" style="padding-left: 16px; padding-right: 16px">
  <div class="contract-determine">
    <div class="contract--content">
      <div class="contract__content--title-doi-tac">
        <input id="order-organization" class="contract-total index-input" type="number"
          [(ngModel)]="data_organization.ordering" (focusout)="onChangeValue($event, 'order-organization')"
          oninput="this.value = this.value.replace(/[^0-9.]/g, '', /[^\d*[.]?\d*$]/g).replace(/(\..*?)\..*/g, '$1');" />

        <div class="organization-me">{{ "organization.me" | translate }}&nbsp;<span style="color: red">*</span>
        </div>
        <input class="input1 hover-item" type="text" [(ngModel)]="data_organization.name" />

        <!--Ẩn luồng xử lý-->
        <div class="hide-processing-thread hover-item">
          <div class="text-processing-thread">
            {{ "hide.processing.thread" | translate }}
          </div>
          <input class="checkbox-hide-processing-thread hover-item" type="checkbox" [(ngModel)]="data_organization.hideFlow" />
        </div>
      </div>

      <!-- to chuc cua toi - nguoi xem xet -->
      <div>
        <div class="label">
          {{ 'user.view' | translate }}
          <span *ngIf="getOriganzationReviewer().length > 0">
            &nbsp;({{ getOriganzationReviewer().length }})
          </span>
        </div>                    
        <div class="participants--content" *ngFor="let d of getOriganzationReviewer(); let index = index">
          <div class="participants-border hover-item">
            <div style="margin: 0 16px 16px 16px">
              <div class="header-user-view row">
                <div class="col-md-6 flex">
                  <input [id]="'ordering-organzation-view-' + index" class="contract-total index-input" (focusout)="
                      onChangeValue(
                        $event,
                        'ordering-organzation-view-' + index
                      )
                    " type="number" [(ngModel)]="d.ordering"
                    oninput="this.value = this.value.replace(/[^0-9.]/g, '', /[^\d*[.]?\d*$]/g).replace(/(\..*?)\..*/g, '$1');"
                    [disabled]="
                      getOriganzationReviewer().length == 1 && !isEditOrdering
                    " />

                  <div class="text-header-user-view">
                    {{ "user.view" | translate }}<span>&nbsp;{{ index + 1 }}</span>
                  </div>
                </div>

                <!--Chọn {{'typeOfSignEmail' | translate}} hoặc số điện thoại cho nguoi xem xet to chuc-->
                <div class="participants--input col-md-6"
                  style="display: flex; justify-content: space-between; padding-left: 7px;">
                  <div class="participants__name">
                    <div class="label_detail text-color">
                      <div class="flex">
                        <input (change)="changeTypeSign(d, index)" type="radio"
                          name="checkPhoneMailOrgViewer_{{ index }}" [value]="email" [(ngModel)]="d.login_by" />
                      </div>
                      &nbsp;
                      <div class="text-check-box-contract">
                        {{ "typeOfSignEmail" | translate }}
                      </div>
                    </div>
                  </div>
                  <div class="participants__name">
                    <div class="label_detail text-color">
                      <div class="flex">
                        <input (change)="changeTypeSign(d, index)" type="radio"
                          name="checkPhoneMailOrgViewer_{{ index }}" [(ngModel)]="d.login_by" [value]="phone" />
                      </div>
                      &nbsp;
                      <div class="text-check-box-contract">
                        {{ "typeOfSignPhone" | translate }}
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <div class="row mt-7px">
                <div class="col-md-6" style="padding-right: 7px">
                  <div class="label-text">{{ "user.name" | translate }}&nbsp;<span class="required-title">*</span></div>
                  <div class="input-data">
                    <input class="content-input hover-item" *ngIf="d.login_by === 'email'" type="text"
                      placeholder="{{ 'nhap_ho_va_ten' | translate }}" (focusin)="onFocusIn($event, index, 'view')"
                      (ngxInputSearch)="doTheSearch($event, index, 'view')" [(ngModel)]="d.name"
                      (focusout)="onFocusOut($event, d)" />

                    <input class="content-input hover-item" *ngIf="d.login_by === 'phone'" type="text"
                      placeholder="{{ 'nhap_ho_va_ten' | translate }}" (focusin)="onFocusIn($event, index, 'view')"
                      [(ngModel)]="d.name" (focusout)="onFocusOut($event, d)" />
                  </div>
                  <div class="search-name"
                    *ngIf="this.arrSearch[index] && this.arrSearchNameView && arrSearchNameView.length > 0">
                    <button class="search-name-items" *ngFor="let t of this.arrSearchNameView"
                      (click)="onSelectName(t, d)">
                      {{ t.name }} ({{ t.email }})
                    </button>
                  </div>
                </div>

                <!--NB-->
                <div style="padding-left: 7px" class="col-md-6" *ngIf="d.login_by == 'email' && this.site == 'NB'">
                  <div class="label-text">Email&nbsp;<span class="required-title">*</span></div>
                  <div class="input-data">
                    <!-- <img src="assets/img/login_email.svg" class="input-img"> -->
                    <input class="content-input hover-item" type="text" placeholder="{{ 'nhap_email' | translate }}"
                      [(ngModel)]="d.email" />
                  </div>
                </div>

                <div style="padding-left: 7px" class="col-md-6" *ngIf="d.login_by == 'phone' && this.site == 'NB'">
                  <div class="label-text">{{ "user.phone" | translate }}&nbsp;<span class="required-title">*</span>
                  </div>
                  <div class="content-input flex hover-item">

                    <input class="input-nhap-sdt" style="width: 95%;" type="text"
                      placeholder="{{ 'nhap_sdt' | translate }}" [(ngModel)]="d.phone" />

                    <div style="width: 5%;" class="participants__name">
                      <div class="input-data">
                        <div ngbDropdown class="d-inline-block" style="margin-left: 6px" [(ngModel)]="d.locale">
                          <div *ngIf="d.locale == 'vi'">
                            <button *ngIf="d.locale == 'vi'" class="btn btn-outline-primary db_icon_vietnam"
                              id="dropdownMenu1" ngbDropdownToggle>
                              {{ dropdownButtonText }}
                            </button>
                          </div>
                          <div *ngIf="d.locale == 'en'">
                            <button *ngIf="d.locale == 'en'" class="btn btn-outline-primary db_icon_english"
                              id="dropdownMenu1" ngbDropdownToggle>
                              {{ dropdownButtonText }}
                            </button>
                          </div>
                          <div ngbDropdownMenu aria-labelledby="dropdownMenu1">
                            <div class="switch-language">
                              <button class="db_icon_vietnam" ngbDropdownItem (click)="d.locale = 'vi'">
                                <div class="language">
                                  {{ "vie" | translate }}
                                </div>
                              </button>
                            </div>
                            <div class="switch-language">
                              <button class="db_icon_english" ngbDropdownItem (click)="d.locale = 'en'">
                                <div class="language">
                                  {{ "eng" | translate }}
                                </div>
                              </button>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>

                <!--KD-->
                <div *ngIf="d.login_by === 'email' && this.site == 'KD'" class="col-md-6" style="padding-left: 7px">
                  <div class="label-text">Email&nbsp;<span class="required-title">*</span></div>
                  <div class="input-data">
                    <!-- <img src="assets/img/login_email.svg" class="input-img"> -->
                    <input class="content-input hover-item" type="text" placeholder="{{ 'nhap_email' | translate }}"
                      [(ngModel)]="d.email" />
                  </div>
                </div>

                <div *ngIf="d.login_by === 'phone' && this.site == 'KD'" class="col-md-6" style="padding-left: 7px">
                  <div class="participants__name">
                    <div class="label-text">
                      {{ "user.phone" | translate }}&nbsp;
                      <span class="required-title">*</span>
                    </div>
                  </div>

                  <div class="content-input flex hover-item">
                    <input class="input-nhap-sdt" style="width: 95%;" type="text"
                      placeholder="{{ 'nhap_sdt' | translate }}" [(ngModel)]="d.phone" />

                    <div style="width: 5%;" class="input-data">
                      <div ngbDropdown class="d-inline-block" [(ngModel)]="d.locale">
                        <div *ngIf="d.locale == 'vi'">
                          <button *ngIf="d.locale == 'vi'" class="btn btn-outline-primary db_icon_vietnam"
                            id="dropdownMenu1" ngbDropdownToggle>
                            {{ dropdownButtonText }}
                          </button>
                        </div>
                        <div *ngIf="d.locale == 'en'">
                          <button *ngIf="d.locale == 'en'" class="btn btn-outline-primary db_icon_english"
                            id="dropdownMenu1" ngbDropdownToggle>
                            {{ dropdownButtonText }}
                          </button>
                        </div>
                        <div ngbDropdownMenu aria-labelledby="dropdownMenu1">
                          <div class="switch-language">
                            <button class="db_icon_vietnam" ngbDropdownItem (click)="d.locale = 'vi'">
                              <div class="language">
                                {{ "vie" | translate }}
                              </div>
                            </button>
                          </div>
                          <div class="switch-language">
                            <button class="db_icon_english" ngbDropdownItem (click)="d.locale = 'en'">
                              <div class="language">
                                {{ "eng" | translate }}
                              </div>
                            </button>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>

                </div>
              </div>

              <!--NB email-->
              <div *ngIf="this.site == 'NB' && d.login_by === 'email'" class="participants--input row mt-7px"
                style="display: flex">
                <div class="participants__name col-md-6">
                  <div class="label-text flex">
                    {{ "user.phone" | translate }}&nbsp;
                    <div style="color: #ffc107">
                      ({{ "receive.contract.process" | translate }})
                    </div>
                  </div>
                  <div class="content-input hover-item">
                    <input class="input-nhap-sdt" style="width: 95%;" type="text"
                      placeholder="{{ 'nhap_sdt' | translate }}" [(ngModel)]="d.phone" />

                    <div style="width: 5%;" ngbDropdown class="d-inline-block" [(ngModel)]="d.locale">
                      <div *ngIf="d.locale == 'vi'">
                        <button *ngIf="d.locale == 'vi'" class="btn db_icon_vietnam" id="dropdownMenu1"
                          ngbDropdownToggle>
                          {{ dropdownButtonText }}
                        </button>
                      </div>
                      <div *ngIf="d.locale == 'en'">
                        <button *ngIf="d.locale == 'en'" class="btn db_icon_english" id="dropdownMenu1"
                          ngbDropdownToggle>
                          {{ dropdownButtonText }}
                        </button>
                      </div>
                      <div ngbDropdownMenu aria-labelledby="dropdownMenu1">
                        <div class="switch-language">
                          <button class="db_icon_vietnam" ngbDropdownItem (click)="d.locale = 'vi'">
                            <div class="language">{{ "vie" | translate }}</div>
                          </button>
                        </div>
                        <div class="switch-language">
                          <button class="db_icon_english" ngbDropdownItem (click)="d.locale = 'en'">
                            <div class="language">{{ "eng" | translate }}</div>
                          </button>
                        </div>
                      </div>
                    </div>

                  </div>
                </div>
              </div>
            </div>
          </div>

          <div class="container-participants-add">
            <div *ngIf="
                getOriganzationReviewer().length > 0 &&
                index === getOriganzationReviewer().length - 1
              " class="participants--add" (click)="addOriganzationReviewer()">
              <div>
                <img class="add-icon" src="assets/img/add-square.png" alt="thêm" />
              </div>

              <u class="text-color" (click)="addOriganzationReviewer()">{{
                "btn.add.user.view" | translate
                }}</u>
            </div>

            <div class="delete-element" (click)="deleteOriganzationReviewer(index)">
              {{ "btn.add.user.delete" | translate }}
            </div>
          </div>
        </div>

        <div class="container-participants-add">
          <div *ngIf="getOriganzationReviewer().length == 0" class="participants--add-length-0"
            (click)="addOriganzationReviewer()">
            <div>
              <img class="add-icon" src="assets/img/add-square.png" alt="thêm" />
            </div>
            <u class="text-color">{{ "btn.add.user.view" | translate }}</u>
          </div>
        </div>
      </div>

      <!-- to chuc cua toi - nguoi ky-->
      <div class="mt-20px">
        <div class="label">
          {{ 'user.sign' | translate }}
          <span *ngIf="getOriganzationSignature().length > 0">
            &nbsp;({{ getOriganzationSignature().length }})
          </span>
        </div> 
        <div class="participants--content" *ngFor="let d of getOriganzationSignature(); let index = index">
          <div class="participants-border hover-item">
            <div style="margin: 0 16px 16px 16px">
              <div class="header-user-view row">
                <div class="col-md-6 flex">
                  <input [id]="'ordering-sign-' + index" class="col-md-1 contract-total"
                    (focusout)="onChangeValue($event, 'ordering-sign-' + index)" style="width: 32px; height: 32px"
                    type="number" [(ngModel)]="d.ordering"
                    oninput="this.value = this.value.replace(/[^0-9.]/g, '', /[^\d*[.]?\d*$]/g).replace(/(\..*?)\..*/g, '$1');"
                    [disabled]="
                      getOriganzationSignature().length == 1 && !isEditOrdering
                    " />

                  <div class="text-header-user-view">
                    {{ "user.sign" | translate }}<span>&nbsp;{{ index + 1 }}</span>
                  </div>
                </div>

                <div class="participants--input col-md-6"
                  style="display: flex; justify-content: space-between; padding-left: 7px;">
                  <!--Chọn {{'typeOfSignEmail' | translate}} hoặc {{'user.phone' | translate}}-->
                  <div class="participants__name">
                    <div class="label_detail text-color">
                      <div class="flex">
                        <input (change)="changeTypeSign(d, index, null, 'signer')" type="radio"
                          name="checkPhoneMailOrgSigner_{{ index }}" [value]="email" [(ngModel)]="d.login_by" />
                      </div>
                      &nbsp;
                      <div class="text-check-box-contract">
                        {{ "typeOfSignEmail" | translate }}
                      </div>
                    </div>
                  </div>
                  <div class="participants__name">
                    <div class="label_detail text-color">
                      <div class="flex">
                        <input (change)="changeTypeSign(d, index, null, 'signer')" type="radio"
                          name="checkPhoneMailOrgSigner_{{ index }}" [(ngModel)]="d.login_by" [value]="phone" />
                      </div>
                      &nbsp;
                      <div class="text-check-box-contract">
                        {{ "typeOfSignPhone" | translate }}
                      </div>
                    </div>
                  </div>

                </div>
              </div>

              <div class="row mt-7px">
                <div class="col-md-6" style="padding-right: 7px">
                  <div class="label-text">{{ "user.name" | translate }}&nbsp;<span class="required-title">*</span>
                  </div>
                  <!--Trường nhập họ và tên cho người ký tổ chức của tôi-->
                  <div class="input-data">
                    <!--Trường hợp typeOfSignEmail-->
                    <input class="content-input hover-item" *ngIf="d.login_by === 'email'" type="text"
                      placeholder="{{ 'nhap_ho_va_ten' | translate }}" (focusin)="onFocusIn($event, index, 'signature')"
                      (ngxInputSearch)="doTheSearch($event, index, 'signature')" [(ngModel)]="d.name"
                      (focusout)="onFocusOut($event, d)" />

                    <!--Trường hợp typeOfSignPhone-->
                    <input class="content-input hover-item" *ngIf="d.login_by === 'phone'" type="text"
                      placeholder="{{ 'nhap_ho_va_ten' | translate }}" (focusin)="onFocusIn($event, index, 'signature')"
                      [(ngModel)]="d.name" (focusout)="onFocusOut($event, d)" />
                  </div>

                  <div class="search-name" *ngIf="
                      this.arrSearch[index] &&
                      this.arrSearchNameSignature &&
                      arrSearchNameSignature.length > 0
                    ">
                    <button class="search-name-items" *ngFor="let t of this.arrSearchNameSignature"
                      (click)="onSelectName(t, d)">
                      {{ t.name }} ({{ t.email }})
                    </button>
                  </div>
                </div>

                <div class="col-md-6" style="padding-left: 7px; margin-top: 8px;">
                  <div class="label-text">{{ "user.sign-type" | translate }}&nbsp;<span class="required-title">*</span>
                  </div>

                  <!--Tổ chức của tôi chọn loại ký-->
                  <ng-multiselect-dropdown [(ngModel)]="d.sign_type" placeholder="{{ 'choose' | translate }}"
                    [settings]="dropdownSignTypeSettings"
                    [data]=" isListSignNotPerson[index] ? isListSignNotPerson[index] : this.getListSignType('org')"
                    (onSelect)="onItemSelect($event, data_organization.name)" (onDeSelect)="deSelectOrg($event)"
                    (ngModelChange)="selectWithOtp($event, d, 'organization')">
                    <ng-template #optionsTemplate let-item let-option="option" let-id="id" let-isSelected="isSelected">
                      <div style="
                          padding: 1px 10px;
                          margin-right: 10px;
                          right: 2px;
                          top: -2px;
                        ">
                        <label style="color: #0041C4; font-weight: normal" [ngStyle]="{
                            'font-weight': isSelected ? 'bold' : ' normal',
                            color: getContractConnectItems[id].isDisabled
                              ? 'lightgrey'
                              : ''
                          }">
                          {{ getContractConnectItems[id].name }}
                        </label>
                      </div>
                    </ng-template>
                  </ng-multiselect-dropdown>
                </div>

              </div>

              <div class="row mt-7px" *ngIf="this.site == 'KD'">
                <div class="col-md-6" style="padding-right: 7px">
                  <div *ngIf="d.login_by === 'email'" class="participants__name">
                    <div class="label-text">
                      Email&nbsp;<span class="required-title">*</span>
                    </div>
                    <div>
                      <input class="content-input hover-item" type="text" placeholder="{{ 'nhap_email' | translate }}"
                        [(ngModel)]="d.email" />
                    </div>
                  </div>

                  <div *ngIf="d.login_by === 'phone'" class="participants__name">
                    <div class="label-text">{{ "user.phone" | translate }}&nbsp;<span class="required-title">*</span>
                    </div>
                    <div class="content-input flex hover-item">
                      <input style="width: 95%;" class="input-nhap-sdt" type="text"
                        placeholder="{{ 'nhap_sdt' | translate }}" [(ngModel)]="d.phone" />

                      <div style="width: 5%;" class="input-data">
                        <div ngbDropdown class="d-inline-block" [(ngModel)]="d.locale">
                          <div *ngIf="d.locale == 'vi'">
                            <button *ngIf="d.locale == 'vi'" class="btn btn-outline-primary db_icon_vietnam"
                              id="dropdownMenu2" ngbDropdownToggle>
                              {{ dropdownButtonText }}
                            </button>
                          </div>
                          <div *ngIf="d.locale == 'en'">
                            <button *ngIf="d.locale == 'en'" class="btn btn-outline-primary db_icon_english"
                              id="dropdownMenu2" ngbDropdownToggle>
                              {{ dropdownButtonText }}
                            </button>
                          </div>
                          <div ngbDropdownMenu aria-labelledby="dropdownMenu2">
                            <div class="switch-language">
                              <button class="db_icon_vietnam" ngbDropdownItem (click)="d.locale = 'vi'">
                                <div class="language">
                                  {{ "vie" | translate }}
                                </div>
                              </button>
                            </div>
                            <div class="switch-language">
                              <button class="db_icon_english" ngbDropdownItem (click)="d.locale = 'en'">
                                <div class="language">
                                  {{ "eng" | translate }}
                                </div>
                              </button>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>

                <div class="col-md-6" style="padding-left: 7px">
                  <!--trường hiển thị khi người ký tổ chức của tôi chọn loại ký là usbtoken-->
                  <div class="participants--input" *ngIf="getDataSignUSBToken(d).length > 0">
                    <div class="label-text flex">{{ "enter.tax_code.cardId" | translate }}&nbsp;<span
                        class="required-title">*</span>
                      <div style="color: #ffc107">
                        ({{ "info.token" | translate }})
                      </div>
                    </div>
                    <div class="input-data">
                      <input class="content-input hover-item" type="text" placeholder="{{ 'enter.tax_code.cardId' | translate }}"
                        [(ngModel)]="d.card_id"
                        oninput="this.value = this.value.replace(/[\s]/g, '', /[^\d*[.]?\d*$]/g).replace(/(\..*?)\..*/g, '$1');" />
                    </div>

                  </div>

                  <!--trường hiển thị khi người ký tổ chức của tôi chọn loại ký là hsm-->
                  <div class="participants--input" *ngIf="getDataSignHsm(d).length > 0">
                    <div class="label-text flex">{{ "enter.tax_code.cardId" | translate }}&nbsp;<span
                        class="required-title">*</span>
                      <div style="color: #ffc107">
                        ({{ "info.hsm" | translate }})
                      </div>
                    </div>
                    <div class="input-data">
                      <input class="content-input hover-item" type="text" placeholder="{{ 'enter.tax_code.cardId' | translate }}"
                        [(ngModel)]="d.card_id"
                        oninput="this.value = this.value.replace(/[\s]/g, '', /[^\d*[.]?\d*$]/g).replace(/(\..*?)\..*/g, '$1');" />
                    </div>
                  </div>

                  <!--trường hiển thị khi người ký tổ chức của tôi chọn loại ký là chứng thư số/ Remote Signing-->
                  <div class="participants--input"
                    *ngIf=" getDataSignCert(d).length > 0 || getDataSignRemote(d).length > 0">
                    <div class="label-text flex">{{ "enter.tax_code.cardId" | translate }}&nbsp;<span
                        class="required-title">*</span>
                      <div style="color: #ffc107">
                        ({{ "info.cert" | translate }})
                      </div>
                    </div>
                    <div class="input-data">
                      <input class="content-input hover-item" type="text" placeholder="{{ 'enter.tax_code.cardId' | translate }}"
                        [(ngModel)]="d.card_id"
                        oninput="this.value = this.value.replace(/[\s]/g, '', /[^\d*[.]?\d*$]/g).replace(/(\..*?)\..*/g, '$1');" />
                    </div>
                  </div>
                </div>
              </div>

              <!--NB đăng nhập bằng email/người ký-->
              <div class="mt-7px" *ngIf="this.site == 'NB'">
                <div class="row" *ngIf="this.site == 'NB' && d.login_by === 'email'">
                  <!--Email-->
                  <div class="col-md-6" style="padding-right: 7px;">
                    <div class="label-text">Email&nbsp;<span class="required-title">*</span>
                    </div>
                    <div class="input-data">
                      <input class="content-input hover-item" type="text" placeholder="{{ 'nhap_email' | translate }}"
                        [(ngModel)]="d.email" />
                    </div>
                  </div>

                  <!--Số điện thoại-->
                  <div class="col-md-6" style="padding-left: 7px;">
                    <div class="label-text flex">{{ "user.phone" | translate }}&nbsp;
                      <div style="color: #ffc107">
                        ({{ "receive.contract.process" | translate }})
                      </div>
                    </div>
                    <div class="content-input flex hover-item">
                      <input style="width: 95%;" class="input-nhap-sdt" type="text"
                        placeholder="{{ 'nhap_sdt' | translate }}" [(ngModel)]="d.phone" />

                      <div style="width: 5%;" class="participants__name">
                        <div class="input-data">
                          <div ngbDropdown class="d-inline-block" [(ngModel)]="d.locale">
                            <div *ngIf="d.locale == 'vi'">
                              <button *ngIf="d.locale == 'vi'" class="btn btn-outline-primary db_icon_vietnam"
                                id="dropdownMenu1" ngbDropdownToggle>
                                {{ dropdownButtonText }}
                              </button>
                            </div>
                            <div *ngIf="d.locale == 'en'">
                              <button *ngIf="d.locale == 'en'" class="btn btn-outline-primary db_icon_english"
                                id="dropdownMenu1" ngbDropdownToggle>
                                {{ dropdownButtonText }}
                              </button>
                            </div>
                            <div ngbDropdownMenu aria-labelledby="dropdownMenu1">
                              <div class="switch-language">
                                <button class="db_icon_vietnam" ngbDropdownItem (click)="d.locale = 'vi'">
                                  <div class="language">{{ "vie" | translate }}</div>
                                </button>
                              </div>
                              <div class="switch-language">
                                <button class="db_icon_english" ngbDropdownItem (click)="d.locale = 'en'">
                                  <div class="language">{{ "eng" | translate }}</div>
                                </button>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>

                <div class="row mt-7px">
                  <!--trường hiển thị khi người ký tổ chức của tôi chọn loại ký là usbtoken-->
                  <div class="col-md-6" *ngIf="getDataSignUSBToken(d).length > 0" style="padding-right: 7px;">
                    <div class="participants__name">
                      <div class="label-text flex">{{ "tax_code.cardId" | translate }}&nbsp;<span
                          class="required-title">*</span>
                        <div style="color: #ffc107">
                          ({{ "info.token" | translate }})
                        </div>
                      </div>
                      <div class="input-data hover-item">
                        <input class="content-input" type="text" placeholder="{{ 'enter.tax_code.cardId' | translate }}"
                          [(ngModel)]="d.card_id"
                          oninput="this.value = this.value.replace(/[\s]/g, '', /[^\d*[.]?\d*$]/g).replace(/(\..*?)\..*/g, '$1');" />
                      </div>
                    </div>
                  </div>

                  <!--trường hiển thị khi người ký tổ chức của tôi chọn loại ký là hsm-->
                  <div class="col-md-6" *ngIf="getDataSignHsm(d).length > 0" style="padding-right: 7px;">
                    <div class="participants__name">
                      <div class="label-text flex">{{ "enter.tax_code.cardId" | translate }}&nbsp;<span
                          class="required-title">*</span>
                        <div style="color: #ffc107">
                          ({{ "info.hsm" | translate }})
                        </div>
                      </div>
                      <div class="input-data">
                        <input class="content-input hover-item" type="text" placeholder="{{ 'enter.tax_code.cardId' | translate }}"
                          [(ngModel)]="d.card_id"
                          oninput="this.value = this.value.replace(/[\s]/g, '', /[^\d*[.]?\d*$]/g).replace(/(\..*?)\..*/g, '$1');" />
                      </div>
                    </div>
                  </div>

                  <!--trường hiển thị khi người ký tổ chức của tôi chọn loại ký là chứng thư số/ Remote Signing-->
                  <div class="col-md-6" *ngIf=" getDataSignCert(d).length > 0 || getDataSignRemote(d).length > 0"
                    style="padding-right: 7px;">
                    <div class="participants__name">
                      <div class="label-text flex"> {{ "tax_code.cardId" | translate }}&nbsp;<span
                          class="required-title">*</span>
                        <div style="color: #ffc107">
                          ({{ "info.cert" | translate }})
                        </div>
                      </div>
                      <div class="input-data">
                        <input class="content-input hover-item" type="text" placeholder="{{ 'enter.tax_code.cardId' | translate }}"
                          [(ngModel)]="d.card_id"
                          oninput="this.value = this.value.replace(/[\s]/g, '', /[^\d*[.]?\d*$]/g).replace(/(\..*?)\..*/g, '$1');" />
                      </div>
                    </div>
                  </div>

                  <!--NB phone-->
                  <div class="col-md-6" *ngIf="this.site == 'NB' && d.login_by === 'phone'" style="padding-left: 7px;">
                    <div class="participants__name">
                      <div class="label-text">
                        {{ "user.phone" | translate }}&nbsp;
                        <span class="required-title">*</span>
                      </div>
                      <div class="content-input flex hover-item">
                        <input class="input-nhap-sdt" style="width: 95%;" type="text"
                          placeholder="{{ 'nhap_sdt' | translate }}" [(ngModel)]="d.phone" />

                        <div class="participants__name" style="width: 5%">
                          <div class="input-data">
                            <div ngbDropdown class="d-inline-block" [(ngModel)]="d.locale">
                              <div *ngIf="d.locale == 'vi'">
                                <button *ngIf="d.locale == 'vi'" class="btn btn-outline-primary db_icon_vietnam"
                                  id="dropdownMenu1" ngbDropdownToggle>
                                  {{ dropdownButtonText }}
                                </button>
                              </div>
                              <div *ngIf="d.locale == 'en'">
                                <button *ngIf="d.locale == 'en'" class="btn btn-outline-primary db_icon_english"
                                  id="dropdownMenu1" ngbDropdownToggle>
                                  {{ dropdownButtonText }}
                                </button>
                              </div>
                              <div ngbDropdownMenu aria-labelledby="dropdownMenu1">
                                <div class="switch-language">
                                  <button class="db_icon_vietnam" ngbDropdownItem (click)="d.locale = 'vi'">
                                    <div class="language">{{ "vie" | translate }}</div>
                                  </button>
                                </div>
                                <div class="switch-language">
                                  <button class="db_icon_english" ngbDropdownItem (click)="d.locale = 'en'">
                                    <div class="language">{{ "eng" | translate }}</div>
                                  </button>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div class="container-participants-add">
            <div *ngIf=" getOriganzationSignature().length > 0 && index === getOriganzationSignature().length - 1"
              class="participants--add" (click)="addOriganzationSignature()">
              <div>
                <img class="add-icon" src="assets/img/add-square.png" alt="thêm" />
              </div>

              <u class="text-color" (click)="addOriganzationSignature()">{{"btn.add.user.sign" | translate}}</u>
            </div>

            <div *ngIf="getOriganzationSignature().length > 1" class="delete-element"
              (click)="deleteOriganzationSignature(index)">
              {{ "btn.add.user.delete" | translate }}
            </div>
          </div>
        </div>

        <div class="container-participants-add">
          <div *ngIf="getOriganzationSignature().length == 0" class="participants--add-length-0"
            (click)="addOriganzationSignature()">
            <div>
              <img class="add-icon" src="assets/img/add-square.png" alt="thêm" />
            </div>
            <u class="text-color">{{ "btn.add.user.sign" | translate }}</u>
          </div>
        </div>
      </div>

      <!-- to chuc cua toi - nguoi van thu -->
      <div>
        <div class="label">
          {{ 'user.doc' | translate }}
          <span *ngIf="getOriganzationDocument().length > 0">
            &nbsp;({{ getOriganzationDocument().length }})
          </span>
        </div> 
        <div class="participants--content" *ngFor="let d of getOriganzationDocument(); let index = index">
          <div class="participants-border hover-item">
            <div style="margin: 0 16px 16px 16px">
              <div class="header-user-view row">
                <div class="col-md-6 flex">
                  <input [id]="'ordering-doc-' + index" class="contract-total index-input"
                    (focusout)="onChangeValue($event, 'ordering-doc-' + index)" style="width: 32px; height: 32px"
                    type="number" [(ngModel)]="d.ordering" [disabled]="
                    getOriganzationDocument().length == 1 && !isEditOrdering"
                    oninput="this.value = this.value.replace(/[^0-9.]/g, '', /[^\d*[.]?\d*$]/g).replace(/(\..*?)\..*/g, '$1');" />

                  <div class="text-header-user-view">
                    {{ "user.doc" | translate }}<span>&nbsp;{{ index + 1 }}</span>
                  </div>
                </div>
              </div>

              <div class="row mt-7px">
                <div class="col-md-6" style="padding-right: 7px;">
                  <div class="label-text">
                    {{ "user.name" | translate }}&nbsp;<span class="required-title">*</span>
                  </div>
                  <div class="input-data">
                    <input class="content-input hover-item" type="text" placeholder="{{ 'nhap_ho_va_ten' | translate }}"
                      (focusin)="onFocusIn($event, index, 'doc')" (ngxInputSearch)="doTheSearch($event, index, 'doc')"
                      [(ngModel)]="d.name" (focusout)="onFocusOut($event, d)" />
                  </div>
                  <div class="search-name" *ngIf="
                      this.arrSearch[index] &&
                      this.arrSearchNameDoc &&
                      arrSearchNameDoc.length > 0
                    ">
                    <button class="search-name-items" *ngFor="let t of this.arrSearchNameDoc"
                      (click)="onSelectName(t, d)">
                      {{ t.name }} ({{ t.email }})
                    </button>
                  </div>
                </div>

                <div class="col-md-6 mt-8px" style="padding-left: 7px;">
                  <div class="label-text">
                    {{ "user.sign-type" | translate }}&nbsp;<span class="required-title">*</span>
                    <!-- &nbsp;-&nbsp;<div style="color: #ffc107;">({{'Chỉ được chọn 1 kiểu ký số' | translate}})</div> -->
                  </div>

                  <!--Văn thư tổ chức của tôi chọn loại ký-->
                  <ng-multiselect-dropdown [(ngModel)]="d.sign_type" placeholder="{{ 'choose' | translate }}"
                    [settings]="dropdownSignTypeSettings" [data]="signType_doc"
                    (ngModelChange)="selectWithOtp($event, d, 'organization')">
                    <ng-template #optionsTemplate let-item let-option="option" let-id="id" let-isSelected="isSelected">
                      <div style="
                          padding: 1px 10px;
                          margin-right: 10px;
                          right: 2px;
                          top: -2px;
                        ">
                        <label style="color: #333; font-weight: normal" [ngStyle]="{
                            'font-weight': isSelected ? 'bold' : ' normal',
                            color: getContractConnectItems[id].isDisabled
                              ? 'lightgrey'
                              : ''
                          }">
                          {{ getContractConnectItems[id].name }}
                        </label>
                      </div>
                    </ng-template>
                  </ng-multiselect-dropdown>
                </div>
              </div>

              <!--NB-->
              <div class="row mt-7px" *ngIf="this.site == 'NB'">
                <div class="col-md-6" style="padding-right: 7px;">
                  <div class="label-text">
                    Email&nbsp;
                    <span class="required-title">*</span>
                  </div>
                  <div class="input-data">
                    <input class="content-input hover-item" type="text" placeholder="{{ 'nhap_email' | translate }}"
                      [(ngModel)]="d.email" />
                  </div>
                </div>

                <div class="col-md-6" style="padding-left: 7px;">
                  <div class="label-text flex">
                    {{ "user.phone" | translate }}&nbsp;
                    <div style="color: #ffc107">
                      ({{ "receive.contract.process" | translate }})
                    </div>
                  </div>
                  <div class="content-input flex hover-item">
                    <input style="width: 95%;" class="input-nhap-sdt" type="text"
                      placeholder="{{ 'nhap_sdt' | translate }}" [(ngModel)]="d.phone" />

                    <div style="width: 5%;" class="participants__name">
                      <div class="input-data">
                        <div ngbDropdown class="d-inline-block" [(ngModel)]="d.locale">
                          <div *ngIf="d.locale == 'vi'">
                            <button *ngIf="d.locale == 'vi'" class="btn btn-outline-primary db_icon_vietnam"
                              id="dropdownMenu1" ngbDropdownToggle>
                              {{ dropdownButtonText }}
                            </button>
                          </div>
                          <div *ngIf="d.locale == 'en'">
                            <button *ngIf="d.locale == 'en'" class="btn btn-outline-primary db_icon_english"
                              id="dropdownMenu1" ngbDropdownToggle>
                              {{ dropdownButtonText }}
                            </button>
                          </div>
                          <div ngbDropdownMenu aria-labelledby="dropdownMenu1">
                            <div class="switch-language">
                              <button class="db_icon_vietnam" ngbDropdownItem (click)="d.locale = 'vi'">
                                <div class="language">{{ "vie" | translate }}</div>
                              </button>
                            </div>
                            <div class="switch-language">
                              <button class="db_icon_english" ngbDropdownItem (click)="d.locale = 'en'">
                                <div class="language">{{ "eng" | translate }}</div>
                              </button>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <div class="row mt-7px" *ngIf="this.site == 'NB'">
                <div class="col-md-6" *ngIf="getDataSignEkyc(d).length > 0" style="padding-right: 7px;">
                  <div class="participants__name">
                    <div class="label-text">
                      {{ "cardId" | translate }}&nbsp;<span class="required-title">*</span>
                    </div>
                    <div class="input-data">
                      <input class="content-input hover-item" type="text" placeholder="{{ 'enter.cardId' | translate }}"
                        [(ngModel)]="d.card_id"
                        oninput="this.value = this.value.replace(/[\s]/g, '', /[^\d*[.]?\d*$]/g).replace(/(\..*?)\..*/g, '$1');" />
                    </div>
                  </div>
                </div>

                <!--trường hiển thị khi văn thư tổ chức của tôi chọn loại ký là usb token-->
                <div class="col-md-6" *ngIf="getDataSignUSBToken(d).length > 0" style="padding-right: 7px;">
                  <div class="participants__name">
                    <div class="label-text flex">
                      {{ "tax_code.cardId" | translate }}&nbsp;<span class="required-title">*</span>
                      <div style="color: #ffc107">
                        ({{ "info.token" | translate }})
                      </div>
                    </div>
                    <div class="input-data">
                      <input class="content-input hover-item" type="text" placeholder="{{ 'enter.tax_code.cardId' | translate }}"
                        [(ngModel)]="d.card_id"
                        oninput="this.value = this.value.replace(/[\s]/g, '', /[^\d*[.]?\d*$]/g).replace(/(\..*?)\..*/g, '$1');" />
                    </div>
                  </div>
                </div>

                <div class="col-md-6" *ngIf="getDataSignHsm(d).length > 0" style="padding-right: 7px;">
                  <div class="participants__name">
                    <div class="label-text">
                      {{ "tax_code" | translate }}&nbsp;<span class="required-title">*</span>
                    </div>
                    <div class="input-data">
                      <input class="content-input hover-item" type="text" placeholder="{{ 'enter.tax_code.cardId' | translate }}"
                        [(ngModel)]="d.card_id"
                        oninput="this.value = this.value.replace(/[\s]/g, '', /[^\d*[.]?\d*$]/g).replace(/(\..*?)\..*/g, '$1');" />
                    </div>
                  </div>
                </div>

                <!--trường hiển thị khi văn thư tổ chức của tôi chọn loại ký là chứng thư số-->
                <div class="col-md-6" *ngIf="
                    getDataSignCert(d).length > 0 ||
                    getDataSignRemote(d).length > 0
                  " style="padding-right: 7px;">
                  <div class="participants__name">
                    <div class="label-text flex">
                      {{ "tax_code.cardId" | translate }}&nbsp;
                      <span class="required-title">*</span>
                      <div style="color: #ffc107">
                        ({{ "info.cert" | translate }})
                      </div>
                    </div>
                    <div class="input-data">
                      <input class="content-input hover-item" type="text" placeholder="{{ 'enter.tax_code.cardId' | translate }}"
                        [(ngModel)]="d.card_id"
                        oninput="this.value = this.value.replace(/[\s]/g, '', /[^\d*[.]?\d*$]/g).replace(/(\..*?)\..*/g, '$1');" />
                    </div>
                  </div>
                </div>
              </div>

              <div class="row mt-7px" *ngIf="this.site == 'KD'">
                <div class="col-md-6" style="padding-right: 7px;">
                  <div class="label-text">
                    Email&nbsp;<span class="required-title">*</span>
                  </div>
                  <div class="input-data">
                    <input class="content-input hover-item" type="text" placeholder="{{ 'nhap_email' | translate }}"
                      [(ngModel)]="d.email" />
                  </div>
                </div>

                <div class="col-md-6" *ngIf="getDataSignEkyc(d).length > 0" style="padding-left: 7px;">
                  <div class="participants__name">
                    <div class="label-text">
                      {{ "cardId" | translate }}&nbsp;<span class="required-title">*</span>
                    </div>
                    <div class="input-data">
                      <input class="content-input hover-item" type="text" placeholder="{{ 'enter.cardId' | translate }}"
                        [(ngModel)]="d.card_id"
                        oninput="this.value = this.value.replace(/[\s]/g, '', /[^\d*[.]?\d*$]/g).replace(/(\..*?)\..*/g, '$1');" />
                    </div>
                  </div>
                </div>

                <!--trường hiển thị khi văn thư tổ chức của tôi chọn loại ký là usb token-->
                <div class="col-md-6" *ngIf="getDataSignUSBToken(d).length > 0" style="padding-left: 7px;">
                  <div class="participants__name">
                    <div class="label-text flex">
                      {{ "tax_code.cardId" | translate }}&nbsp;<span class="required-title">*</span>
                      <div style="color: #ffc107">
                        ({{ "info.token" | translate }})
                      </div>
                    </div>
                    <div class="input-data">
                      <input class="content-input hover-item" type="text" placeholder="{{ 'enter.tax_code.cardId' | translate }}"
                        [(ngModel)]="d.card_id"
                        oninput="this.value = this.value.replace(/[\s]/g, '', /[^\d*[.]?\d*$]/g).replace(/(\..*?)\..*/g, '$1');" />
                    </div>
                  </div>
                </div>

                <div class="col-md-6" *ngIf="getDataSignHsm(d).length > 0" style="padding-left: 7px;">
                  <div class="participants__name">
                    <div class="label-text">
                      {{ "tax_code" | translate }}&nbsp;<span class="required-title">*</span>
                    </div>
                    <div class="input-data">
                      <input class="content-input hover-item" type="text" placeholder="{{ 'enter.tax_code.cardId' | translate }}"
                        [(ngModel)]="d.card_id"
                        oninput="this.value = this.value.replace(/[\s]/g, '', /[^\d*[.]?\d*$]/g).replace(/(\..*?)\..*/g, '$1');" />
                    </div>
                  </div>
                </div>

                <!--trường hiển thị khi văn thư tổ chức của tôi chọn loại ký là chứng thư số-->
                <div class="col-md-6" *ngIf="
                    getDataSignCert(d).length > 0 ||
                    getDataSignRemote(d).length > 0
                  " style="padding-left: 7px;">
                  <div class="participants__name">
                    <div class="label-text flex">
                      {{ "tax_code.cardId" | translate }}&nbsp;
                      <span class="required-title">*</span>
                      <div style="color: #ffc107">
                        ({{ "info.cert" | translate }})
                      </div>
                    </div>
                    <div class="input-data">
                      <input class="content-input hover-item" type="text" placeholder="{{ 'enter.tax_code.cardId' | translate }}"
                        [(ngModel)]="d.card_id"
                        oninput="this.value = this.value.replace(/[\s]/g, '', /[^\d*[.]?\d*$]/g).replace(/(\..*?)\..*/g, '$1');" />
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- <div class="col-md-1 delete-element" (click)="deleteOriganzationDocument(index)">
            <img src="assets/img/border_close.svg" alt="close.vn" />
            <img class="close-btn" src="assets/img/x_close.svg" alt="close.vn" />
          </div> -->

          <div class="container-participants-add">
            <div *ngIf=" getOriganzationDocument().length > 0 && index === getOriganzationDocument().length - 1"
              class="participants--add" (click)="addOriganzationDocument()">
              <div>
                <img class="add-icon" src="assets/img/add-square.png" alt="thêm" />
              </div>

              <u class="text-color" (click)="addOriganzationDocument()">{{"btn.add.user.doc" | translate}}</u>
            </div>

            <div class="delete-element" (click)="deleteOriganzationDocument(index)">
              {{ "btn.add.user.delete" | translate }}
            </div>
          </div>

        </div>

        <div class="container-participants-add">
          <div *ngIf="getOriganzationDocument().length == 0" class="participants--add-length-0"
            (click)="addOriganzationDocument()">
            <div>
              <img class="add-icon" src="assets/img/add-square.png" alt="thêm" />
            </div>
            <u class="text-color">{{ "btn.add.user.doc" | translate }}</u>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!--  Đối tác-->
  <div class="contract-determine" *ngFor="let item of dataParnterOrganization(); let id = index" style="display: flex">
    <div class="contract--content">
      <div class="contract__content--title-doi-tac">
        <input [id]="'ordering-partner-' + id" class="contract-total index-input"
          (focusout)="onChangeValue($event, 'ordering-partner-' + id)" style="width: 32px; height: 32px" type="number"
          [(ngModel)]="item.ordering"
          oninput="this.value = this.value.replace(/[^0-9.]/g, '', /[^\d*[.]?\d*$]/g).replace(/(\..*?)\..*/g, '$1');" />

        <div class="organization-me">{{ "doi_tac" | translate | uppercase }}&nbsp;<span style="color: red">*</span>
        </div>

        <div style="margin-right: 10px;">
          <label class="custom-select-wrapper">
            <select [(ngModel)]="item.type" (change)="changeType($event, item, id)" class="custom-select">
              <option class="label-text" [value]="2">{{ "organization" | translate }}</option>
              <option class="label-text" [value]="3">{{ "personal" | translate }}</option>
            </select>
          </label>
        </div>

        <input class="input1 hover-item" type="text"
          placeholder="{{(item.type == 2 ? 'nhap_ten_doi_tac_to_chuc' : '') | translate}}" [(ngModel)]="item.name"
          [disabled]="item.type == 3" />

        <div class="delete-doi-tac-div hover-item" *ngIf="item.type == 2">
          <div class="label-text text-delete-doi-tac" (click)="findPartner('ORGANIZATION', id, item)">
            {{ "btn.search" | translate }}
          </div>
        </div>
        <div class="delete-doi-tac-div hover-item" *ngIf="item.type == 3">
          <div class="label-text text-delete-doi-tac" (click)="findPartner('PERSONAL', id, item)">
            {{ "btn.search" | translate }}
          </div>
        </div>

        <div class="hide-processing-thread hover-item">
          <div class="text-processing-thread">{{ "hide.processing.thread" | translate }}
          </div>
          <input class="checkbox-hide-processing-thread hover-item" type="checkbox" [(ngModel)]="item.hideFlow" />
        </div>

        <div class="delete-doi-tac-div hover-item" *ngIf="this.dataParnterOrganization().length >= 1">
          <div class="label-text text-delete-doi-tac" (click)="deletePartner(id, item)">
            {{(item.type == 2 ? "xoa_doi_tac" : "xoa_doi_tac") | translate}}
          </div>
        </div>
      </div>


      <div>
        <div *ngIf="item.type == 2">
          <!-- doi tac - nguoi dieu phoi -->
          <div>
            <div class="label">
              {{ 'user.lead' | translate }}
              <span *ngIf="getPartnerCoordination(item).length > 0">
                &nbsp;({{ getPartnerCoordination(item).length }})
              </span>
            </div> 
            <div class="participants--content" *ngFor="let d of getPartnerCoordination(item); let index = index">
              <div class="participants-border hover-item">
                <div style="margin: 0 16px 16px 16px">
                  <div class="header-user-view row">
                    <div class="col-md-6 flex">
                      <input [id]="'ordering-lead-' + index" class="col-md-1 contract-total"
                        style="width: 32px; height: 32px" type="number" [ngModel]="1" disabled />
                      <div class="text-header-user-view">
                        {{ "user.lead" | translate }}<span>&nbsp;{{ index + 1 }}</span>
                      </div>
                    </div>
                  </div>

                  <div class="row mt-7px">
                    <div class="col-md-6" style="padding-right: 7px;">
                      <div class="label-text">
                        {{ "user.name" | translate }}&nbsp;<span class="required-title">*</span>
                      </div>
                      <div class="input-data">
                        <input class="content-input hover-item" type="text" placeholder="{{ 'nhap_ho_va_ten' | translate }}"
                          [(ngModel)]="d.name" />
                      </div>
                    </div>

                    <div class="col-md-6" style="padding-left: 7px;">
                      <div class="label-text flex">
                        Email&nbsp;<span class="required-title">*</span>&nbsp;-&nbsp;
                        <div style="color: #ffc107">
                          ({{
                          "Chỉ được trùng với email trong cùng tổ chức"
                          | translate
                          }})
                        </div>
                      </div>
                      <div class="input-data">
                        <input class="content-input hover-item" type="text" placeholder="{{ 'nhap_email' | translate }}"
                          [(ngModel)]="d.email" />
                      </div>
                    </div>
                  </div>

                  <div class="row mt-7px" *ngIf="this.site == 'NB'">
                    <div class="col-md-6" style="padding-right: 7px">
                      <div class="label-text flex">
                        {{ "user.phone" | translate }}&nbsp;-&nbsp;
                        <div style="color: #ffc107">
                          ({{ "Nhận thông báo khi xử lý hợp đồng" | translate }})
                        </div>
                      </div>
                      <div class="content-input flex hover-item">
                        <input class="input-nhap-sdt" style="width: 95%;" type="text"
                          placeholder="{{ 'nhap_sdt' | translate }}" [(ngModel)]="d.phone"
                          oninput="this.value = this.value.replace(/[\s]/g, '', /[^\d*[.]?\d*$]/g).replace(/(\..*?)\..*/g, '$1');" />

                        <div style="width: 5%" class="participants__name">
                          <div class="input-data">
                            <div ngbDropdown class="d-inline-block" [(ngModel)]="d.locale">
                              <div *ngIf="d.locale == 'vi'">
                                <button *ngIf="d.locale == 'vi'" class="btn btn-outline-primary db_icon_vietnam"
                                  id="dropdownMenu1" ngbDropdownToggle>
                                  {{ dropdownButtonText }}
                                </button>
                              </div>
                              <div *ngIf="d.locale == 'en'">
                                <button *ngIf="d.locale == 'en'" class="btn btn-outline-primary db_icon_english"
                                  id="dropdownMenu1" ngbDropdownToggle>
                                  {{ dropdownButtonText }}
                                </button>
                              </div>
                              <div ngbDropdownMenu aria-labelledby="dropdownMenu1">
                                <div class="switch-language">
                                  <button class="db_icon_vietnam" ngbDropdownItem (click)="d.locale = 'vi'">
                                    <div class="language">
                                      {{ "vie" | translate }}
                                    </div>
                                  </button>
                                </div>
                                <div class="switch-language">
                                  <button class="db_icon_english" ngbDropdownItem (click)="d.locale = 'en'">
                                    <div class="language">
                                      {{ "eng" | translate }}
                                    </div>
                                  </button>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <div class="container-participants-add">
                <div class="delete-element" (click)="deletePartnerCoordination(index, item, id)">
                  {{ "btn.add.user.delete" | translate }}
                </div>
              </div>
            </div>

            <div (click)="addPartnerCoordination(item, id)" *ngIf="getPartnerCoordination(item).length < 1"
              class="container-participants-add">
              <div class="participants--add-length-0">
                <div>
                  <img class="add-icon" src="assets/img/add-square.png" alt="thêm" />
                </div>

                <u class="text-color" (click)="addPartnerCoordination(item, id)">{{ "btn.add.user.lead" |
                  translate}}</u>
              </div>
            </div>
          </div>

          <!-- doi tac - nguoi xem xet -->
          <div class="mt-7px">
            <div class="label">
              {{ 'user.view' | translate }}
              <span *ngIf="getPartnerReviewer(item).length > 0">
                &nbsp;({{ getPartnerReviewer(item).length }})
              </span>
            </div> 
            <div class="participants--content" *ngFor="let d of getPartnerReviewer(item); let index = index">
              <div class="participants-border hover-item">
                <div style="margin: 0 16px 16px 16px">
                  <div class="header-user-view row">
                    <div class="col-md-6 flex">
                      <input [id]="'ordering-view-' + index" class="contract-total"
                        (focusout)="onChangeValue($event, 'ordering-view-' + index)" style="width: 32px; height: 32px"
                        type="number" [(ngModel)]="d.ordering" [disabled]="
                          getPartnerReviewer(item).length == 1 && !isEditOrdering
                        "
                        oninput="this.value = this.value.replace(/[^0-9.]/g, '', /[^\d*[.]?\d*$]/g).replace(/(\..*?)\..*/g, '$1');" />

                      <div class="text-header-user-view">
                        {{ "user.view" | translate }}<span>&nbsp;{{ index + 1 }}</span>
                      </div>
                    </div>

                    <!--Chọn {{'typeOfSignEmail' | translate}} hoặc {{'user.phone' | translate}} cho nguoi xem xet doi tac-->
                    <div class="participants--input col-md-6"
                      style="display: flex; justify-content: space-between; padding-left: 7px;">
                      <div class="participants__name">
                        <div class="label_detail text-color">
                          <div class="flex">
                            <input (change)="changeTypeSign(d, index)" type="radio"
                              name="checkPhoneMailParticipantViewer_{{ index }}" [value]="email"
                              [(ngModel)]="d.login_by" />
                          </div>
                          &nbsp;
                          <div class="text-check-box-contract">
                            {{ "typeOfSignEmail" | translate }}
                          </div>
                        </div>
                      </div>
                      <div class="participants__name">
                        <div class="label_detail text-color">
                          <div class="flex">
                            <input (change)="changeTypeSign(d, index)" type="radio"
                              name="checkPhoneMailParticipantViewer_{{ index }}" [(ngModel)]="d.login_by"
                              [value]="phone" />
                          </div>
                          &nbsp;
                          <div class="text-check-box-contract">
                            {{ "typeOfSignPhone" | translate }}
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>

                  <div class="row mt-7px">
                    <div class="col-md-6" style="padding-right: 7px">
                      <div class="label-text">
                        {{ "user.name" | translate }}&nbsp;<span class="required-title">*</span>
                      </div>
                      <div class="input-data">
                        <input class="content-input hover-item" type="text" placeholder="{{ 'nhap_ho_va_ten' | translate }}"
                          [(ngModel)]="d.name" />
                      </div>
                    </div>

                    <!--NB-->
                    <div class="col-md-6" style="padding-left: 7px" *ngIf="d.login_by == 'email' && this.site == 'NB'">
                      <div class="label-text">
                        Email&nbsp;
                        <span class="required-title">*</span>
                      </div>
                      <div class="input-data">
                        <input class="content-input hover-item" type="text" placeholder="{{ 'nhap_email' | translate }}"
                          [(ngModel)]="d.email" />
                      </div>
                    </div>

                    <div class="col-md-6" style="padding-left: 7px" *ngIf="d.login_by == 'phone' && this.site == 'NB'">
                      <div class="label-text">
                        {{ "user.phone" | translate }}&nbsp;
                        <span class="required-title">*</span>
                      </div>
                      <div class="content-input flex hover-item">
                        <input style="width: 95%;" class="input-nhap-sdt" type="text"
                          placeholder="{{ 'nhap_sdt' | translate }}" [(ngModel)]="d.phone" />

                        <div style="width: 5%;" class="participants__name">
                          <div class="input-data">
                            <div ngbDropdown class="d-inline-block" [(ngModel)]="d.locale">
                              <div *ngIf="d.locale == 'vi'">
                                <button *ngIf="d.locale == 'vi'" class="btn btn-outline-primary db_icon_vietnam"
                                  id="dropdownMenu1" ngbDropdownToggle>
                                  {{ dropdownButtonText }}
                                </button>
                              </div>
                              <div *ngIf="d.locale == 'en'">
                                <button *ngIf="d.locale == 'en'" class="btn btn-outline-primary db_icon_english"
                                  id="dropdownMenu1" ngbDropdownToggle>
                                  {{ dropdownButtonText }}
                                </button>
                              </div>
                              <div ngbDropdownMenu aria-labelledby="dropdownMenu1">
                                <div class="switch-language">
                                  <button class="db_icon_vietnam" ngbDropdownItem (click)="d.locale = 'vi'">
                                    <div class="language">
                                      {{ "vie" | translate }}
                                    </div>
                                  </button>
                                </div>
                                <div class="switch-language">
                                  <button class="db_icon_english" ngbDropdownItem (click)="d.locale = 'en'">
                                    <div class="language">
                                      {{ "eng" | translate }}
                                    </div>
                                  </button>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>

                    <!--KD-->
                    <div class="col-md-6" style="padding-left: 7px" *ngIf="d.login_by == 'email' && this.site == 'KD'">
                      <div class="label-text">
                        Email&nbsp;
                        <span class="required-title">*</span>
                      </div>
                      <div class="input-data">
                        <input class="content-input hover-item" type="text" placeholder="{{ 'nhap_email' | translate }}"
                          [(ngModel)]="d.email" />
                      </div>
                    </div>

                    <div class="col-md-6" style="padding-left: 7px" *ngIf="d.login_by == 'phone' && this.site == 'KD'">
                      <div class="label-text flex">
                        {{ "user.phone" | translate }}&nbsp;
                        <span class="required-title">*</span>
                      </div>
                      <div class="content-input flex hover-item">
                        <input style="width: 95%;" class="input-nhap-sdt" type="text"
                          placeholder="{{ 'nhap_sdt' | translate }}" [(ngModel)]="d.phone" />

                        <div style="width: 5%;" class="participants__name">
                          <div class="label_detail text-color">
                            <span class="required-title"></span>
                          </div>
                          <div class="input-data">
                            <div ngbDropdown class="d-inline-block" [(ngModel)]="d.locale">
                              <div *ngIf="d.locale == 'vi'">
                                <button *ngIf="d.locale == 'vi'" class="btn btn-outline-primary db_icon_vietnam"
                                  id="dropdownMenu1" ngbDropdownToggle>
                                  {{ dropdownButtonText }}
                                </button>
                              </div>
                              <div *ngIf="d.locale == 'en'">
                                <button *ngIf="d.locale == 'en'" class="btn btn-outline-primary db_icon_english"
                                  id="dropdownMenu1" ngbDropdownToggle>
                                  {{ dropdownButtonText }}
                                </button>
                              </div>
                              <div ngbDropdownMenu aria-labelledby="dropdownMenu1">
                                <div class="switch-language">
                                  <button class="db_icon_vietnam" ngbDropdownItem (click)="d.locale = 'vi'">
                                    <div class="language">
                                      {{ "vie" | translate }}
                                    </div>
                                  </button>
                                </div>
                                <div class="switch-language">
                                  <button class="db_icon_english" ngbDropdownItem (click)="d.locale = 'en'">
                                    <div class="language">
                                      {{ "eng" | translate }}
                                    </div>
                                  </button>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>

                  <div class="row mt-7px">
                    <!--NB email-->
                    <div class="col-md-6" style="padding-left: 7px;"
                      *ngIf="this.site == 'NB' && d.login_by === 'email'">
                      <div class="label-text flex">
                        {{ "user.phone" | translate }}&nbsp;
                        <div style="color: #ffc107">
                          ({{ "receive.contract.process" | translate }})
                        </div>
                      </div>
                      <div class="content-input flex hover-item">
                        <input style="width: 95%;" class="input-nhap-sdt" type="text"
                          placeholder="{{ 'nhap_sdt' | translate }}" [(ngModel)]="d.phone" />

                        <div style="width: 5%" class="participants__name">
                          <div class="label_detail text-color">
                            <span class="required-title"></span>
                          </div>
                          <div class="input-data">
                            <div ngbDropdown class="d-inline-block" [(ngModel)]="d.locale">
                              <div *ngIf="d.locale == 'vi'">
                                <button *ngIf="d.locale == 'vi'" class="btn btn-outline-primary db_icon_vietnam"
                                  id="dropdownMenu1" ngbDropdownToggle>
                                  {{ dropdownButtonText }}
                                </button>
                              </div>
                              <div *ngIf="d.locale == 'en'">
                                <button *ngIf="d.locale == 'en'" class="btn btn-outline-primary db_icon_english"
                                  id="dropdownMenu1" ngbDropdownToggle>
                                  {{ dropdownButtonText }}
                                </button>
                              </div>
                              <div ngbDropdownMenu aria-labelledby="dropdownMenu1">
                                <div class="switch-language">
                                  <button class="db_icon_vietnam" ngbDropdownItem (click)="d.locale = 'vi'">
                                    <div class="language">
                                      {{ "vie" | translate }}
                                    </div>
                                  </button>
                                </div>
                                <div class="switch-language">
                                  <button class="db_icon_english" ngbDropdownItem (click)="d.locale = 'en'">
                                    <div class="language">
                                      {{ "eng" | translate }}
                                    </div>
                                  </button>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <!-- <div class="col-md-1 delete-element" (click)="deletePartnerReviewer(index, item, id)">
                <img src="assets/img/border_close.svg" alt="close.vn" />
                <img class="close-btn" src="assets/img/x_close.svg" alt="close.vn" />
              </div> -->

              <div class="container-participants-add">
                <div *ngIf="
                    getPartnerReviewer(item).length > 0 &&
                    index === getPartnerReviewer(item).length - 1
                  " class="participants--add" (click)="addPartnerReviewer(item, id)">
                  <div>
                    <img class="add-icon" src="assets/img/add-square.png" alt="thêm" />
                  </div>

                  <u class="text-color" (click)="addPartnerReviewer(item, id)">{{
                    "btn.add.user.view" | translate
                    }}</u>
                </div>

                <div class="delete-element" (click)="deletePartnerReviewer(index, item, id)">
                  {{ "btn.add.user.delete" | translate }}
                </div>
              </div>
            </div>

            <div (click)="addPartnerReviewer(item, id)" *ngIf="getPartnerReviewer(item).length == 0"
              class="container-participants-add">
              <div class="participants--add-length-0">
                <div>
                  <img class="add-icon" src="assets/img/add-square.png" alt="thêm" />
                </div>

                <u class="text-color" (click)="addPartnerReviewer(item, id)">{{ "btn.add.user.view" | translate}}</u>
              </div>
            </div>

            <!-- <div class="participants--add">
              <u class="label text-color" (click)="addPartnerReviewer(item, id)">{{ "btn.add.user.view" | translate
                }}</u>
            </div> -->
          </div>

          <!-- doi tac - nguoi ky -->
          <div class="mt-7px">
            <div class="label">
              {{ 'user.sign' | translate }}
              <span *ngIf="getPartnerSignature(item).length > 0">
                &nbsp;({{ getPartnerSignature(item).length }})
              </span>
            </div>
            <div class="participants--content" *ngFor="let d of getPartnerSignature(item); let index = index">
              <div class="participants-border hover-item">
                <div style="margin: 0 16px 16px 16px">
                  <div class="header-user-view row">
                    <div class="col-md-6 flex">
                      <input [id]="'ordering-sign-partner-' + index" (focusout)="
                          onChangeValue($event, 'ordering-sign-partner-' + index)
                        " class="col-md-1 contract-total" style="width: 32px; height: 32px" type="number"
                        [(ngModel)]="d.ordering"
                        oninput="this.value = this.value.replace(/[^0-9.]/g, '', /[^\d*[.]?\d*$]/g).replace(/(\..*?)\..*/g, '$1');"
                        [disabled]="
                          getPartnerSignature(item).length == 1 && !isEditOrdering
                        " />

                      <div class="text-header-user-view">
                        {{ "user.sign" | translate }}<span>&nbsp;{{ index + 1 }}</span>
                      </div>
                    </div>

                    <div class="participants--input col-md-6"
                      style="display: flex; justify-content: space-between; padding-left: 7px;">
                      <div class="participants__name">
                        <div class="label_detail text-color">
                          <div class="flex">
                            <input (change)="changeTypeSign(d, index, id, 'sign_partner')" name="checkPhoneMailParticipantSigner_{{ index }}_{{id}}" type="radio" [value]="email" [(ngModel)]="d.login_by" />
                          </div>&nbsp;
                          <div class="text-check-box-contract">
                            {{ "typeOfSignEmail" | translate }}
                          </div>
                        </div>
                      </div>
                      <div class="participants__name">
                        <div class="label_detail text-color">
                          <div class="flex">
                            <input (change)="changeTypeSign(d, index, id, 'sign_partner')" name="checkPhoneMailParticipantSigner_{{ index }}_{{id}}" type="radio" [value]="phone" [(ngModel)]="d.login_by" />
                          </div>&nbsp;
                          <div class="text-check-box-contract">
                            {{ "typeOfSignPhone" | translate }}
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>

                  <div class="row mt-7px">
                    <div class="col-md-6" style="padding-right: 7px;">
                      <div class="label-text">
                        {{ "user.name" | translate }}&nbsp;<span class="required-title">*</span>
                      </div>
                      <div class="input-data">
                        <input class="content-input hover-item" [id]="'signature-partner-' + d.ordering" type="text"
                          placeholder="{{ 'nhap_ho_va_ten' | translate }}" [(ngModel)]="d.name" />
                      </div>
                    </div>

                    <div class="col-md-6 mt-7px" style="padding-left: 7px;">
                      <div class="label-text">
                        {{ "user.sign-type" | translate }}&nbsp;<span class="required-title">*</span>
                      </div>

                      <!--Người ký đối tác tổ chức chọn loại ký-->
                      <ng-multiselect-dropdown [(ngModel)]="d.sign_type" placeholder="{{ 'choose' | translate }}"
                        [settings]="dropdownSignTypeSettings" [data]="
                            d.isListSignNotPersonPartner
                              ? d.isListSignNotPersonPartner
                              : this.getListSignType('partner')
                          " (onSelect)="onItemSelect($event, item.type)"
                        (onDeSelect)="deSelectPartnerSign($event, item)"
                        (ngModelChange)="selectWithOtp($event, d, item.type)">
                        <ng-template #optionsTemplate let-item let-option="option" let-id="id"
                          let-isSelected="isSelected">
                          <div style="
                                padding: 1px 10px;
                                margin-right: 10px;
                                right: 2px;
                                top: -2px;
                              ">
                            <label style="color: #333; font-weight: normal" [ngStyle]="{
                                  'font-weight': isSelected ? 'bold' : ' normal',
                                  color: getContractConnectItems[id].isDisabled
                                    ? 'lightgrey'
                                    : ''
                                }">
                              {{ getContractConnectItems[id].name }}
                            </label>
                          </div>
                        </ng-template>
                      </ng-multiselect-dropdown>
                    </div>
                  </div>

                  <!--KD-->
                  <div class="row mt-7px" *ngIf="this.site == 'KD'">
                    <div class="col-md-6" *ngIf="d.login_by === 'email'" style="padding-right: 7px;">
                      <div class="label-text">
                        Email&nbsp;<span class="required-title">*</span>
                      </div>
                      <div class="input-data">
                        <input class="content-input hover-item" type="text" placeholder="{{ 'nhap_email' | translate }}"
                          [(ngModel)]="d.email" />
                      </div>
                    </div>

                    <div class="col-md-6" *ngIf="d.login_by === 'phone'" style="padding-right: 7px;">
                      <div class="label-text">
                        {{ "user.phone" | translate }}&nbsp;
                        <span class="required-title">*</span>
                      </div>
                      <div class="content-input flex hover-item">
                        <input class="input-nhap-sdt" style="width: 95%;" type="text"
                          placeholder="{{ 'nhap_sdt' | translate }}" [(ngModel)]="d.phone" />

                        <div class="input-data" style="width: 5%">
                          <div ngbDropdown class="d-inline-block" [(ngModel)]="d.locale">
                            <div *ngIf="d.locale == 'vi'">
                              <button *ngIf="d.locale == 'vi'" class="btn btn-outline-primary db_icon_vietnam"
                                id="dropdownMenu1" ngbDropdownToggle>
                                {{ dropdownButtonText }}
                              </button>
                            </div>
                            <div *ngIf="d.locale == 'en'">
                              <button *ngIf="d.locale == 'en'" class="btn btn-outline-primary db_icon_english"
                                id="dropdownMenu1" ngbDropdownToggle>
                                {{ dropdownButtonText }}
                              </button>
                            </div>
                            <div ngbDropdownMenu aria-labelledby="dropdownMenu1">
                              <div class="switch-language">
                                <button class="db_icon_vietnam" ngbDropdownItem (click)="d.locale = 'vi'">
                                  <div class="language">
                                    {{ "vie" | translate }}
                                  </div>
                                </button>
                              </div>
                              <div class="switch-language">
                                <button class="db_icon_english" ngbDropdownItem (click)="d.locale = 'en'">
                                  <div class="language">
                                    {{ "eng" | translate }}
                                  </div>
                                </button>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>

                    <!--Check ký usb token cho đối tác, nếu có thì render trường {{'tax_code' | translate}}/cccd-->
                    <div class="col-md-6" *ngIf="getDataSignUSBToken(d).length > 0" style="padding-left: 7px;">
                      <div class="participants__name">
                        <div class="label-text flex">
                          {{ "tax_code.cardId" | translate }}&nbsp;<span class="required-title">*</span>
                          <div style="color: #ffc107">
                            ({{ "info.token" | translate }})
                          </div>
                        </div>
                        <div class="input-data">
                          <input class="content-input hover-item" type="text"
                            placeholder="{{ 'enter.tax_code.cardId' | translate }}" [(ngModel)]="d.card_id"
                            oninput="this.value = this.value.replace(/[\s]/g, '', /[^\d*[.]?\d*$]/g).replace(/(\..*?)\..*/g, '$1');" />
                        </div>
                      </div>
                    </div>

                    <!--trường hiển thị khi người ký của đối tác chọn loại ký là hsm-->
                    <div class="col-md-6" *ngIf="getDataSignHsm(d).length > 0" style="padding-left: 7px;">
                      <div class="participants__name">
                        <div class="label-text flex">
                          {{ "tax_code.cardId" | translate }}&nbsp;<span class="required-title">*</span>
                          <div style="color: #ffc107">
                            ({{ "info.hsm" | translate }})
                          </div>
                        </div>
                        <div class="input-data">
                          <input class="content-input hover-item" type="text"
                            placeholder="{{ 'enter.tax_code.cardId' | translate }}" [(ngModel)]="d.card_id"
                            oninput="this.value = this.value.replace(/[\s]/g, '', /[^\d*[.]?\d*$]/g).replace(/(\..*?)\..*/g, '$1');" />
                        </div>
                      </div>
                    </div>

                    <!--trường hiển thị khi người ký đối tác chọn loại ký là chứng thư số-->
                    <div style="padding-left: 7px;" class="col-md-6" *ngIf="
                          getDataSignCert(d).length > 0 ||
                          getDataSignRemote(d).length > 0
                        ">
                      <div class="participants__name">
                        <div class="label-text flex">
                          {{ "tax_code.cardId" | translate }}&nbsp;
                          <span class="required-title">*</span>
                          <div style="color: #ffc107">
                            ({{ "info.cert" | translate }})
                          </div>
                        </div>
                        <div class="input-data">
                          <input class="content-input hover-item" type="text"
                            placeholder="{{ 'enter.tax_code.cardId' | translate }}" [(ngModel)]="d.card_id"
                            oninput="this.value = this.value.replace(/[\s]/g, '', /[^\d*[.]?\d*$]/g).replace(/(\..*?)\..*/g, '$1');" />
                        </div>
                      </div>
                    </div>
                  </div>

                  <!--NB email-->
                  <div class="row mt-7px" *ngIf="this.site == 'NB' && d.login_by === 'email'">
                    <div class="participants__name" class="col-md-6" style="padding-right: 7px;">
                      <div class="label-text">
                        Email&nbsp;
                        <span class="required-title">*</span>
                      </div>
                      <div class="input-data">
                        <input class="content-input hover-item" type="text" placeholder="{{ 'nhap_email' | translate }}"
                          [(ngModel)]="d.email" />
                      </div>
                    </div>

                    <div class="col-md-6" style="padding-left: 7px;">
                      <div class="label-text flex">
                        {{ "user.phone" | translate }}&nbsp;
                        <div style="color: #ffc107">
                          ({{ "receive.contract.process" | translate }})
                        </div>
                      </div>
                      <div class="content-input flex hover-item">
                        <input class="input-nhap-sdt" style="width: 95%;" type="text"
                          placeholder="{{ 'nhap_sdt' | translate }}" [(ngModel)]="d.phone" />

                        <div style="width: 5%;" class="participants__name">
                          <div class="input-data">
                            <div ngbDropdown class="d-inline-block" [(ngModel)]="d.locale">
                              <div *ngIf="d.locale == 'vi'">
                                <button *ngIf="d.locale == 'vi'" class="btn btn-outline-primary db_icon_vietnam"
                                  id="dropdownMenu1" ngbDropdownToggle>
                                  {{ dropdownButtonText }}
                                </button>
                              </div>
                              <div *ngIf="d.locale == 'en'">
                                <button *ngIf="d.locale == 'en'" class="btn btn-outline-primary db_icon_english"
                                  id="dropdownMenu1" ngbDropdownToggle>
                                  {{ dropdownButtonText }}
                                </button>
                              </div>
                              <div ngbDropdownMenu aria-labelledby="dropdownMenu1">
                                <div class="switch-language">
                                  <button class="db_icon_vietnam" ngbDropdownItem (click)="d.locale = 'vi'">
                                    <div class="language">
                                      {{ "vie" | translate }}
                                    </div>
                                  </button>
                                </div>
                                <div class="switch-language">
                                  <button class="db_icon_english" ngbDropdownItem (click)="d.locale = 'en'">
                                    <div class="language">
                                      {{ "eng" | translate }}
                                    </div>
                                  </button>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>

                  <!--NB phone-->
                  <div class="row mt-7px" *ngIf="this.site == 'NB'">
                    <div class="col-md-6" *ngIf="this.site == 'NB' && d.login_by === 'phone'"
                      style="padding-right: 7px;">
                      <div class="participants__name">
                        <div class="label-text">
                          {{ "user.phone" | translate }}&nbsp;<span class="required-title">*</span>
                        </div>
                        <div class="content-input flex hover-item">
                          <!-- <img src="assets/img/login_email.svg" class="input-img"> -->
                          <input class="input-nhap-sdt" style="width: 95%;" type="text"
                            placeholder="{{ 'nhap_sdt' | translate }}" [(ngModel)]="d.phone" />

                          <div class="participants__name" style="width: 5%">
                            <div class="label_detail text-color">
                              <span class="required-title"></span>
                            </div>
                            <div class="input-data">
                              <div ngbDropdown class="d-inline-block" [(ngModel)]="d.locale">
                                <div *ngIf="d.locale == 'vi'">
                                  <button *ngIf="d.locale == 'vi'" class="btn btn-outline-primary db_icon_vietnam"
                                    id="dropdownMenu1" ngbDropdownToggle>
                                    {{ dropdownButtonText }}
                                  </button>
                                </div>
                                <div *ngIf="d.locale == 'en'">
                                  <button *ngIf="d.locale == 'en'" class="btn btn-outline-primary db_icon_english"
                                    id="dropdownMenu1" ngbDropdownToggle>
                                    {{ dropdownButtonText }}
                                  </button>
                                </div>
                                <div ngbDropdownMenu aria-labelledby="dropdownMenu1">
                                  <div class="switch-language">
                                    <button class="db_icon_vietnam" ngbDropdownItem (click)="d.locale = 'vi'">
                                      <div class="language">
                                        {{ "vie" | translate }}
                                      </div>
                                    </button>
                                  </div>
                                  <div class="switch-language">
                                    <button class="db_icon_english" ngbDropdownItem (click)="d.locale = 'en'">
                                      <div class="language">
                                        {{ "eng" | translate }}
                                      </div>
                                    </button>
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>

                    <!--Check ký usb token cho đối tác, nếu có thì render trường {{'tax_code' | translate}}/cccd-->
                    <div class="col-md-6" *ngIf="getDataSignUSBToken(d).length > 0">
                      <div class="participants__name">
                        <div class="label-text flex">
                          {{ "tax_code.cardId" | translate }}&nbsp;<span class="required-title">*</span>
                          <div style="color: #ffc107">
                            ({{ "info.token" | translate }})
                          </div>
                        </div>
                        <div class="input-data">
                          <input class="content-input hover-item" type="text"
                            placeholder="{{ 'enter.tax_code.cardId' | translate }}" [(ngModel)]="d.card_id"
                            oninput="this.value = this.value.replace(/[\s]/g, '', /[^\d*[.]?\d*$]/g).replace(/(\..*?)\..*/g, '$1');" />
                        </div>
                      </div>
                    </div>

                    <!--trường hiển thị khi người ký của đối tác chọn loại ký là hsm-->
                    <div class="col-md-6" *ngIf="getDataSignHsm(d).length > 0">
                      <div class="participants__name">
                        <div class="label-text flex">
                          {{ "tax_code.cardId" | translate }}&nbsp;<span class="required-title">*</span>
                          <div style="color: #ffc107">
                            ({{ "info.hsm" | translate }})
                          </div>
                        </div>
                        <div class="input-data">
                          <input class="content-input hover-item" type="text"
                            placeholder="{{ 'enter.tax_code.cardId' | translate }}" [(ngModel)]="d.card_id"
                            oninput="this.value = this.value.replace(/[\s]/g, '', /[^\d*[.]?\d*$]/g).replace(/(\..*?)\..*/g, '$1');" />
                        </div>
                      </div>
                    </div>

                    <!--trường hiển thị khi người ký đối tác chọn loại ký là chứng thư số-->
                    <div class="col-md-6" class="participants--input" *ngIf="
                          getDataSignCert(d).length > 0 ||
                          getDataSignRemote(d).length > 0
                        ">
                      <div class="participants__name">
                        <div class="label-text flex">
                          {{ "tax_code.cardId" | translate }}&nbsp;
                          <span class="required-title">*</span>
                          <div style="color: #ffc107">
                            ({{ "info.cert" | translate }})
                          </div>
                        </div>
                        <div class="input-data">
                          <input class="content-input hover-item" type="text"
                            placeholder="{{ 'enter.tax_code.cardId' | translate }}" [(ngModel)]="d.card_id"
                            oninput="this.value = this.value.replace(/[\s]/g, '', /[^\d*[.]?\d*$]/g).replace(/(\..*?)\..*/g, '$1');" />
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              
              <div class="container-participants-add">
                <div *ngIf="getPartnerSignature(item).length > 0 && index === getPartnerSignature(item).length - 1"
                  class="participants--add" (click)="addPartnerSignature(item, id)">
                  <div>
                    <img class="add-icon" src="assets/img/add-square.png" alt="thêm" />
                  </div>

                  <u class="text-color" (click)="addPartnerSignature(item, id)">{{"btn.add.user.sign" | translate}}</u>
                </div>

                <div *ngIf="getPartnerSignature(item).length > 1 || getPartnerCoordination(item).length > 0"
                  class="delete-element" (click)="deletePartnerSignature(index, item)">
                  {{ "btn.add.user.delete" | translate }}
                </div>
              </div>
            </div>

            <div (click)="addPartnerSignature(item, id)" *ngIf="getPartnerSignature(item).length == 0"
              class="container-participants-add">
              <div class="participants--add-length-0">
                <div>
                  <img class="add-icon" src="assets/img/add-square.png" alt="thêm" />
                </div>

                <u class="text-color">{{ "btn.add.user.view" | translate}}</u>
              </div>
            </div>
          </div>

          <!-- doi tac - nguoi van thu -->
          <div class="mt-7px">
            <div class="label">
              {{ 'user.doc' | translate }}
              <span *ngIf="getPartnerDocument(item).length > 0">
                &nbsp;({{ getPartnerDocument(item).length }})
              </span>
            </div>
            <div class="participants--content" *ngFor="let d of getPartnerDocument(item); let index = index">
              <div class="participants-border hover-item">
                <div style="margin: 0 16px 16px 16px">
                  <div class="header-user-view row">
                    <div class="col-md-6 flex">
                      <input [id]="'ordering-partner-doc-' + index" (focusout)="
                          onChangeValue($event, 'ordering-partner-doc-' + index)
                        " class="col-md-1 contract-total" style="width: 32px; height: 32px" type="number"
                      [(ngModel)]="d.ordering"
                      oninput="this.value = this.value.replace(/[^0-9.]/g, '', /[^\d*[.]?\d*$]/g).replace(/(\..*?)\..*/g, '$1');"
                      [disabled]="
                          getPartnerDocument(item).length == 1 && !isEditOrdering
                        " />

                      <div class="text-header-user-view">
                        {{ "user.doc" | translate }}<span>&nbsp;{{ index + 1 }}</span>
                      </div>
                    </div>
                  </div>


                  <div class="row mt-7px">
                    <div class="col-md-6" style="padding-right: 7px;">
                      <div class="label-text">
                        {{ "user.name" | translate }}&nbsp;<span class="required-title">*</span>
                      </div>
                      <div class="input-data">
                        <input class="content-input hover-item" type="text" placeholder="{{ 'nhap_ho_va_ten' | translate }}" [(ngModel)]="d.name" />
                      </div>
                    </div>
  
                    <!--Văn thư-->
                    <div class="col-md-6 mt-7px" style="padding-left: 7px;">
                      <div class="label-text">
                        {{ "user.sign-type" | translate }}&nbsp;<span class="required-title">*</span>
                        <!-- &nbsp;-&nbsp;<div style="color: #ffc107;">({{'Chỉ được chọn 1 kiểu ký số' | translate}})</div> -->
                      </div>
  
                      <!--Đối tác là văn thư chọn loại ký-->
                      <ng-multiselect-dropdown [(ngModel)]="d.sign_type" placeholder="{{ 'choose' | translate }}"
                        [settings]="dropdownSignTypeSettings" [data]="signType_doc"
                        (ngModelChange)="selectWithOtp($event, d, item.type)" (onSelect)="selectPartnerDocument($event)"
                        (onDeSelect)="deSelectPartnerDocument($event, item)">
                        <ng-template #optionsTemplate let-item let-option="option" let-id="id"
                          let-isSelected="isSelected">
                          <div style="
                                padding: 1px 10px;
                                margin-right: 10px;
                                right: 2px;
                                top: -2px;
                              ">
                            <label style="color: #333; font-weight: normal" [ngStyle]="{
                                  'font-weight': isSelected ? 'bold' : ' normal',
                                  color: getContractConnectItems[id].isDisabled
                                    ? 'lightgrey'
                                    : ''
                                }">
                              {{ getContractConnectItems[id].name }}
                            </label>
                          </div>
                        </ng-template>
                      </ng-multiselect-dropdown>
                    </div>
                  </div>

                  <!--NB-->
                  <div class="row mt-7px" style="display: flex" *ngIf="this.site == 'NB'">
                    <div class="col-md-6" style="padding-right: 7px;">
                      <div class="label-text">
                        Email&nbsp;<span class="required-title">*</span>
                      </div>
                      <div class="input-data">
                        <input class="content-input hover-item" type="text" placeholder="{{ 'nhap_email' | translate }}" [(ngModel)]="d.email" />
                      </div>
                    </div>

                    <div class="col-md-6" style="padding-left: 7px;">
                      <div class="label-text flex">
                        {{ "user.phone" | translate }}&nbsp;
                        <div style="color: #ffc107">
                          ({{ "receive.contract.process" | translate }})
                        </div>
                      </div>
                      <div class="content-input flex hover-item">
                        <input class="input-nhap-sdt" style="width: 95%;" type="text" placeholder="{{ 'nhap_sdt' | translate }}" [(ngModel)]="d.phone" />

                        <div class="participants__name" style="width: 5%;">
                          <div class="input-data">
                            <div ngbDropdown class="d-inline-block" [(ngModel)]="d.locale">
                              <div *ngIf="d.locale == 'vi'">
                                <button *ngIf="d.locale == 'vi'" class="btn btn-outline-primary db_icon_vietnam"
                                  id="dropdownMenu1" ngbDropdownToggle>
                                  {{ dropdownButtonText }}
                                </button>
                              </div>
                              <div *ngIf="d.locale == 'en'">
                                <button *ngIf="d.locale == 'en'" class="btn btn-outline-primary db_icon_english"
                                  id="dropdownMenu1" ngbDropdownToggle>
                                  {{ dropdownButtonText }}
                                </button>
                              </div>
                              <div ngbDropdownMenu aria-labelledby="dropdownMenu1">
                                <div class="switch-language">
                                  <button class="db_icon_vietnam" ngbDropdownItem (click)="d.locale = 'vi'">
                                    <div class="language">
                                      {{ "vie" | translate }}
                                    </div>
                                  </button>
                                </div>
                                <div class="switch-language">
                                  <button class="db_icon_english" ngbDropdownItem (click)="d.locale = 'en'">
                                    <div class="language">
                                      {{ "eng" | translate }}
                                    </div>
                                  </button>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>

                  <div class="row mt-7px">
                    <!--KD-->
                    <div class="col-md-6" *ngIf="this.site == 'KD'"  style="padding-right: 7px;">
                      <div class="participants__name">
                        <div class="label-text">
                          Email&nbsp;<span class="required-title">*</span>
                        </div>
                        <div class="input-data">
                          <input class="content-input hover-item" type="text" placeholder="{{ 'nhap_email' | translate }}" [(ngModel)]="d.email" />
                        </div>
                      </div>
                    </div> 

                    <div class="col-md-6" *ngIf="getDataSignEkyc(d).length > 0">
                      <div class="participants__name">
                        <div class="label-text">
                          {{ "cardId" | translate }}&nbsp;<span class="required-title">*</span>
                        </div>
                        <div class="input-data">
                          <input class="content-input hover-item" type="text" placeholder="{{ 'enter.cardId' | translate }}" [(ngModel)]="d.card_id"
                            oninput="this.value = this.value.replace(/[\s]/g, '', /[^\d*[.]?\d*$]/g).replace(/(\..*?)\..*/g, '$1');" />
                        </div>
                      </div>
                    </div>
    
                    <!--trường hiển thị khi văn thư đối tác của tổ chức chọn loại ký là usb token-->
                    <div class="col-md-6" *ngIf="getDataSignUSBToken(d).length > 0">
                      <div class="participants__name">
                        <div class="label-text flex">
                          {{ "tax_code.cardId" | translate }}&nbsp;<span class="required-title">*</span>
                          <div style="color: #ffc107">
                            ({{ "info.token" | translate }})
                          </div>
                        </div>
                        <div class="input-data">
                          <input class="content-input hover-item" type="text" placeholder="{{ 'enter.tax_code.cardId' | translate }}" [(ngModel)]="d.card_id"
                            oninput="this.value = this.value.replace(/[\s]/g, '', /[^\d*[.]?\d*$]/g).replace(/(\..*?)\..*/g, '$1');" />
                        </div>
                      </div>
                    </div>
    
                    <!--trường hiển thị khi văn thư đối tác của tổ chức chọn loại ký là hsm-->
                    <div class="col-md-6" *ngIf="getDataSignHsm(d).length > 0">
                      <div class="participants__name">
                        <div class="label-text">
                          {{ "tax_code" | translate }}&nbsp;<span class="required-title">*</span>
                        </div>
                        <div class="input-data">
                          <input class="content-input hover-item" type="text" placeholder="{{ 'enter.tax.code' | translate }}" [(ngModel)]="d.card_id"
                            oninput="this.value = this.value.replace(/[\s]/g, '', /[^\d*[.]?\d*$]/g).replace(/(\..*?)\..*/g, '$1');" />
                        </div>
                      </div>
                    </div>
    
                    <!--trường hiển thị khi văn thư đối tác chọn loại ký là chứng thư số-->
                    <div class="participants--input" class="col-md-6" *ngIf="
                          getDataSignCert(d).length > 0 ||
                          getDataSignRemote(d).length > 0
                        ">
                      <div class="participants__name">
                        <div class="label-text flex">
                          {{ "tax_code.cardId" | translate }}&nbsp;
                          <span class="required-title">*</span>
                          <div style="color: #ffc107">
                            ({{ "info.cert" | translate }})
                          </div>
                        </div>
                        <div class="input-data">
                          <input class="content-input hover-item" type="text" placeholder="{{ 'enter.tax_code.cardId' | translate }}" [(ngModel)]="d.card_id"
                            oninput="this.value = this.value.replace(/[\s]/g, '', /[^\d*[.]?\d*$]/g).replace(/(\..*?)\..*/g, '$1');" />
                        </div>
                      </div>
                    </div>
                  </div>

                </div>
              </div>

              <!-- <div class="col-md-1 delete-element" (click)="deletePartnerDocument(index, item)">
                <img src="assets/img/border_close.svg" alt="close.vn" />
                <img class="close-btn" src="assets/img/x_close.svg" alt="close.vn" />
              </div> -->

              <div class="container-participants-add">
                <div *ngIf="
                    getPartnerDocument(item).length > 0 &&
                    index === getPartnerDocument(item).length - 1
                  " class="participants--add" (click)="addPartnerDocument(item, id)">
                  <div>
                    <img class="add-icon" src="assets/img/add-square.png" alt="thêm" />
                  </div>
    
                  <u class="text-color" (click)="addPartnerDocument(item, id)">{{
                    "btn.add.user.doc" | translate
                    }}</u>
                </div>
    
                <div class="delete-element" (click)="deletePartnerDocument(index, item)">
                  {{ "btn.add.user.delete" | translate }}
                </div>
              </div>

            </div>

            <div class="container-participants-add">
              <div *ngIf="getPartnerDocument(item).length == 0" class="participants--add-length-0"
              (click)="addPartnerDocument(item, id)">
                <div>
                  <img class="add-icon" src="assets/img/add-square.png" alt="thêm" />
                </div>
                <u class="text-color">{{ "btn.add.user.doc" | translate }}</u>
              </div>
            </div>
            
            <!-- <div class="participants--add">
              <u class="label text-color" style="color: #106db6" (click)="addPartnerDocument(item, id)">{{
                "btn.add.user.doc" | translate }}</u>
            </div> -->
          </div>
        </div>

        <!--Đối tác là cá nhân-->
        <div *ngIf="item.type == 3">
          <div>
            <div class="label">
              {{ 'user.sign' | translate }}
              <span *ngIf="getPartnerSignature(item).length > 0">
                &nbsp;({{ getPartnerSignature(item).length }})
              </span>
            </div>
            <div class="participants--content" *ngFor="let d of getPartnerSignature(item); let index = index">
              <div class="participants-border hover-item">
                <div style="margin: 0 16px 16px 16px">
                  <div class="header-user-view row">
                    <div class="col-md-6 flex">
                      <input [id]="'ordering-sign-partner-' + index" (focusout)="
                          onChangeValue($event, 'ordering-sign-partner-' + index)
                        " class="col-md-1 contract-total" style="width: 32px; height: 32px" type="number"
                      oninput="this.value = this.value.replace(/[^0-9.]/g, '', /[^\d*[.]?\d*$]/g).replace(/(\..*?)\..*/g, '$1');"
                      [(ngModel)]="d.ordering" [disabled]="getPartnerSignature(item).length == 1" />
               
                      <div class="text-header-user-view">
                        {{ "user.sign" | translate }}<span>&nbsp;{{ index + 1 }}</span>
                      </div>
                    </div>

                    <!--Chọn {{'typeOfSignEmail' | translate}} hoặc {{'user.phone' | translate}} đối với người ký là cá nhân-->
                    <div class="participants--input col-md-6" style="display: flex; justify-content: space-between; padding-left: 7px;">
                      <div class="participants__name">
                        <div class="label_detail text-color">
                          <div class="flex">
                            <input (change)="changeTypeSign(d, index, null, 'personal')"
                              name="checkPhoneMailPerson_{{ index }}_{{ id }}" type="radio" [value]="email"
                              [(ngModel)]="d.login_by" />
                          </div>
                          &nbsp;
                          <div class="text-check-box-contract">
                            {{ "typeOfSignEmail" | translate }}
                          </div>
                        </div>
                      </div>
                      <div class="participants__name">
                        <div class="label_detail text-color">
                          <div class="flex">
                            <input (change)="changeTypeSign(d, index, null, 'personal')"
                              name="checkPhoneMailPerson_{{ index }}_{{ id }}" type="radio" [value]="phone"
                              [(ngModel)]="d.login_by" />
                          </div>
                          &nbsp;
                          <div class="text-check-box-contract">
                            {{ "typeOfSignPhone" | translate }}
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>

                  <div class="row mt-7px">
                    <div class="col-md-6" style="padding-right: 7px;">
                      <div class="label-text">
                        {{ "user.name" | translate }}&nbsp;<span class="required-title">*</span>
                      </div>
                      <div class="input-data">
                        <input class="content-input hover-item" [id]="'signature-partner-' + d.ordering" type="text"
                          placeholder="{{ 'nhap_ho_va_ten' | translate }}" [(ngModel)]="d.name"
                          (change)="getName($event, item)" />
                      </div>
                    </div>
  
                    <div class="col-md-6 mt-7px" style="padding-left: 7px;">
                      <div class="label-text">
                        {{ "user.sign-type" | translate }}&nbsp;<span class="required-title">*</span>
                      </div>
  
                      <!--Đối tác là cá nhân ký-->
                      <ng-multiselect-dropdown [(ngModel)]="d.sign_type" placeholder="{{ 'choose' | translate }}"
                        [settings]="dropdownSignTypeSettings" [data]="
                            d.isListSignPersonal
                              ? d.isListSignPersonal
                              : this.getListSignType('personal')
                          " (onSelect)="onItemSelect($event, item.type)" (onDeSelect)="deSelectPartnerSign($event, item)"
                        (ngModelChange)="selectWithOtp($event, d, item.type)">
                        <ng-template #data let-item>
                          <span>{{ item.id | translate }}</span>
                        </ng-template>
                      </ng-multiselect-dropdown>
                    </div>
                  </div>

                  <div *ngIf="this.site == 'NB'">
                    <!--NB email-->
                    <div class="row mt-7px" *ngIf="this.site == 'NB' && d.login_by === 'email'">
                      <div class="col-md-6" style="padding-right: 7px;">
                        <div class="label-text">
                          Email&nbsp;<span class="required-title">*</span>
                        </div>
                        <div class="input-data">
                          <input class="content-input hover-item" type="text" placeholder="{{ 'nhap_email' | translate }}" [(ngModel)]="d.email" />
                        </div>
                      </div>

                      <div class="col-md-6" style="padding-left: 7px;">
                        <div class="label-text flex">
                          {{ "user.phone" | translate }}&nbsp;<span *ngIf="getDataSignCka(d).length > 0"
                            class="required-title">*</span>
                          <div style="color: #ffc107">
                            ({{ "receive.contract.process" | translate }})
                          </div>
                        </div>
                        <div class="content-input flex hover-item">
                          <!-- <img src="assets/img/login_email.svg" class="input-img"> -->
                          <input class="input-nhap-sdt" style="width: 95%;" type="text" placeholder="{{ 'nhap_sdt' | translate }}" [(ngModel)]="d.phone" />

                          <div class="participants__name" style="width: 5%">
                            <div class="label_detail text-color">
                              <span class="required-title"></span>
                            </div>
                            <div class="input-data">
                              <div ngbDropdown class="d-inline-block" [(ngModel)]="d.locale">
                                <div *ngIf="d.locale == 'vi'">
                                  <button *ngIf="d.locale == 'vi'" class="btn btn-outline-primary db_icon_vietnam"
                                    id="dropdownMenu1" ngbDropdownToggle>
                                    {{ dropdownButtonText }}
                                  </button>
                                </div>
                                <div *ngIf="d.locale == 'en'">
                                  <button *ngIf="d.locale == 'en'" class="btn btn-outline-primary db_icon_english"
                                    id="dropdownMenu1" ngbDropdownToggle>
                                    {{ dropdownButtonText }}
                                  </button>
                                </div>
                                <div ngbDropdownMenu aria-labelledby="dropdownMenu1">
                                  <div class="switch-language">
                                    <button class="db_icon_vietnam" ngbDropdownItem (click)="d.locale = 'vi'">
                                      <div class="language">
                                        {{ "vie" | translate }}
                                      </div>
                                    </button>
                                  </div>
                                  <div class="switch-language">
                                    <button class="db_icon_english" ngbDropdownItem (click)="d.locale = 'en'">
                                      <div class="language">
                                        {{ "eng" | translate }}
                                      </div>
                                    </button>
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>

                  <div class="row mt-7px">
                    <div *ngIf="this.site == 'KD'" class="col-md-6" style="padding-right: 7px;">
                      <div *ngIf="d.login_by === 'phone'">
                        <div class="label-text">
                          {{ "user.phone" | translate }}&nbsp;
                          <span class="required-title">*</span>
                        </div>
                        <div class="content-input flex hover-item">
                          <input class="input-nhap-sdt" style="width: 95%;" type="text" placeholder="{{ 'nhap_sdt' | translate }}" [(ngModel)]="d.phone" />

                          <div style="width: 5%;" class="input-data">
                            <div ngbDropdown class="d-inline-block" [(ngModel)]="d.locale">
                              <div *ngIf="d.locale == 'vi'">
                                <button *ngIf="d.locale == 'vi'" class="btn btn-outline-primary db_icon_vietnam"
                                  id="dropdownMenu1" ngbDropdownToggle>
                                  {{ dropdownButtonText }}
                                </button>
                              </div>
                              <div *ngIf="d.locale == 'en'">
                                <button *ngIf="d.locale == 'en'" class="btn btn-outline-primary db_icon_english"
                                  id="dropdownMenu1" ngbDropdownToggle>
                                  {{ dropdownButtonText }}
                                </button>
                              </div>
                              <div ngbDropdownMenu aria-labelledby="dropdownMenu1">
                                <div class="switch-language">
                                  <button class="db_icon_vietnam" ngbDropdownItem (click)="d.locale = 'vi'">
                                    <div class="language">
                                      {{ "vie" | translate }}
                                    </div>
                                  </button>
                                </div>
                                <div class="switch-language">
                                  <button class="db_icon_english" ngbDropdownItem (click)="d.locale = 'en'">
                                    <div class="language">
                                      {{ "eng" | translate }}
                                    </div>
                                  </button>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
    
                      <div *ngIf="d.login_by === 'email'">
                        <div class="label-text">
                          Email&nbsp;<span class="required-title">*</span>
                        </div>
                        <div class="input-data">
                          <input class="content-input hover-item" type="text" placeholder="{{ 'nhap_email' | translate }}" [(ngModel)]="d.email" />
                        </div>
                      </div>
                    </div>

                    <!--NB phone-->
                    <div *ngIf="this.site == 'NB' && d.login_by === 'phone'" class="col-md-6" style="padding-right: 7px;">
                      <div class="participants__name">
                        <div class="label-text">
                          {{ "user.phone" | translate }}&nbsp;<span class="required-title">*</span>
                        </div>
                        <div class="content-input flex hover-item">
                          <!-- <img src="assets/img/login_email.svg" class="input-img"> -->
                          <input class="input-nhap-sdt" style="width: 95%;" type="text" placeholder="{{ 'nhap_sdt' | translate }}" [(ngModel)]="d.phone" />

                          <div class="participants__name" style="width: 5%">
                            <div class="label_detail text-color">
                              <span class="required-title"></span>
                            </div>
                            <div class="input-data">
                              <div ngbDropdown class="d-inline-block" style="margin-left: 6px" [(ngModel)]="d.locale">
                                <div *ngIf="d.locale == 'vi'">
                                  <button *ngIf="d.locale == 'vi'" class="btn btn-outline-primary db_icon_vietnam"
                                    id="dropdownMenu1" ngbDropdownToggle>
                                    {{ dropdownButtonText }}
                                  </button>
                                </div>
                                <div *ngIf="d.locale == 'en'">
                                  <button *ngIf="d.locale == 'en'" class="btn btn-outline-primary db_icon_english"
                                    id="dropdownMenu1" ngbDropdownToggle>
                                    {{ dropdownButtonText }}
                                  </button>
                                </div>
                                <div ngbDropdownMenu aria-labelledby="dropdownMenu1" style="min-width: 6rem">
                                  <div class="switch-language">
                                    <button class="db_icon_vietnam" ngbDropdownItem (click)="d.locale = 'vi'">
                                      <div class="language">
                                        {{ "vie" | translate }}
                                      </div>
                                    </button>
                                  </div>
                                  <div class="switch-language">
                                    <button class="db_icon_english" ngbDropdownItem (click)="d.locale = 'en'">
                                      <div class="language">
                                        {{ "eng" | translate }}
                                      </div>
                                    </button>
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>

                    <!--trường hiển thị khi đối tác là cá nhân chọn loại ký là eKYC-->
                    <div class="col-md-6" *ngIf="getDataSignEkyc(d).length > 0">
                      <div class="participants__name">
                        <div class="label-text">
                          {{ "cardId" | translate }}&nbsp;<span class="required-title">*</span>
                        </div>
                        <div class="input-data">
                          <input class="content-input hover-item" type="text" placeholder="{{ 'enter.cardId' | translate }}" [(ngModel)]="d.card_id"
                            oninput="this.value = this.value.replace(/[\s]/g, '', /[^\d*[.]?\d*$]/g).replace(/(\..*?)\..*/g, '$1');" />
                        </div>
                      </div>
                    </div>
    
                    <!--trường hiển thị khi đối tác là cá nhân chọn loại ký là usb token-->
                    <div class="col-md-6" *ngIf="getDataSignUSBToken(d).length > 0">
                      <div class="participants__name">
                        <div class="label-text flex">
                          {{ "tax_code.cardId" | translate }}&nbsp;<span class="required-title">*</span>
                          <div style="color: #ffc107">
                            ({{ "info.token" | translate }})
                          </div>
                        </div>
                        <div class="input-data">
                          <input class="content-input hover-item" type="text" placeholder="{{ 'enter.tax_code.cardId' | translate }}" [(ngModel)]="d.card_id"
                            oninput="this.value = this.value.replace(/[\s]/g, '', /[^\d*[.]?\d*$]/g).replace(/(\..*?)\..*/g, '$1');" />
                        </div>
                      </div>
                    </div>
    
                    <!--trường hiển thị khi đối tác là cá nhân chọn loại ký là hsm-->
                    <div class="col-md-6" *ngIf="getDataSignHsm(d).length > 0">
                      <div class="participants__name">
                        <div class="label-text flex">
                          {{ "tax_code.cardId" | translate }}&nbsp;<span class="required-title">*</span>
                          <div style="color: #ffc107">
                            ({{ "info.hsm" | translate }})
                          </div>
                        </div>
                        <div class="input-data">
                          <input class="content-input hover-item" type="text" placeholder="{{ 'enter.tax_code.cardId' | translate }}" [(ngModel)]="d.card_id"
                            oninput="this.value = this.value.replace(/[\s]/g, '', /[^\d*[.]?\d*$]/g).replace(/(\..*?)\..*/g, '$1');" />
                        </div>
                      </div>
                    </div>
    
                    <!--trường hiển thị khi đối tác là cá nhân chọn loại ký là chứng thư số-->
                    <div class="participants--input" class="col-md-6" *ngIf="
                          getDataSignCert(d).length > 0 ||
                          getDataSignRemote(d).length > 0
                        ">
                      <div class="participants__name">
                        <div class="label-text flex">
                          {{ "tax_code.cardId" | translate }}&nbsp;
                          <span class="required-title">*</span>
                          <div style="color: #ffc107">
                            ({{ "info.cert" | translate }})
                          </div>
                        </div>
                        <div class="input-data">
                          <input class="content-input hover-item" type="text" placeholder="{{ 'enter.tax_code.cardId' | translate }}" [(ngModel)]="d.card_id"
                            oninput="this.value = this.value.replace(/[\s]/g, '', /[^\d*[.]?\d*$]/g).replace(/(\..*?)\..*/g, '$1');" />
                        </div>
                      </div>
                    </div>
    
                    <!--KD-->
                    <div class="col-md-6" *ngIf="
                          this.site === 'KD' &&
                          getDataSignCka(d).length > 0 &&
                          d.login_by == 'email'
                        ">
                      <div class="participants__name">
                        <div class="label-text">
                          {{ "user.phone" | translate }}&nbsp;
                          <span class="required-title">*</span>
                        </div>
                        <div class="content-input flex hover-item">
                          <input class="input-nhap-sdt" style="width: 95%;" type="text" placeholder="{{ 'nhap_sdt' | translate }}" [(ngModel)]="d.phone"
                            oninput="this.value = this.value.replace(/[\s]/g, '', /[^\d*[.]?\d*$]/g).replace(/(\..*?)\..*/g, '$1');" />

                          <div class="participants__name" style="width: 5%">
                            <div class="label_detail text-color">
                              <span class="required-title"></span>
                            </div>
                            <div class="input-data">
                              <div ngbDropdown class="d-inline-block" [(ngModel)]="d.locale">
                                <div *ngIf="d.locale == 'vi'">
                                  <button *ngIf="d.locale == 'vi'" class="btn btn-outline-primary db_icon_vietnam"
                                    id="dropdownMenu1" ngbDropdownToggle>
                                    {{ dropdownButtonText }}
                                  </button>
                                </div>
                                <div *ngIf="d.locale == 'en'">
                                  <button *ngIf="d.locale == 'en'" class="btn btn-outline-primary db_icon_english"
                                    id="dropdownMenu1" ngbDropdownToggle>
                                    {{ dropdownButtonText }}
                                  </button>
                                </div>
                                <div ngbDropdownMenu aria-labelledby="dropdownMenu1">
                                  <div class="switch-language">
                                    <button class="db_icon_vietnam" ngbDropdownItem (click)="d.locale = 'vi'">
                                      <div class="language">
                                        {{ "vie" | translate }}
                                      </div>
                                    </button>
                                  </div>
                                  <div class="switch-language">
                                    <button class="db_icon_english" ngbDropdownItem (click)="d.locale = 'en'">
                                      <div class="language">
                                        {{ "eng" | translate }}
                                      </div>
                                    </button>
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>


              <div class="container-participants-add">
                <div *ngIf="getPartnerSignature(item).length > 1" class="participants--add" (click)="addPartnerSignature(item, id)">
                  <div>
                    <img class="add-icon" src="assets/img/add-square.png" alt="thêm" />
                  </div>
    
                  <u class="text-color" (click)="addPartnerSignature(item, id)">{{
                    "btn.add.user.sign" | translate
                    }}</u>
                </div>
    
                <div *ngIf="getPartnerSignature(item).length > 1" class="delete-element" (click)="deletePartnerSignature(index, item)">
                  {{ "btn.add.user.delete" | translate }}
                </div>
              </div>

              <!-- <div *ngIf="getPartnerSignature(item).length >= 1" class="col-md-1 delete-element"
                (click)="deletePartnerSignature(index, item)">
                <img src="assets/img/border_close.svg" alt="close.vn" />
                <img class="close-btn" src="assets/img/x_close.svg" alt="close.vn" />
              </div>
              <div *ngIf="getPartnerSignature(item).length == 0" class="col-md-1 delete-element"></div> -->
            </div>

            <!-- <div *ngIf="getPartnerSignature(item).length > 1" class="participants--add">
              <u class="label text-color" style="color: #106db6" (click)="addPartnerSignature(item, id)">{{
                "btn.add.user.sign" | translate }}</u>
            </div> -->

            <div class="container-participants-add">
              <div *ngIf="getPartnerSignature(item).length == 0" class="participants--add-length-0"
              (click)="addPartnerSignature(item, id)">
                <div>
                  <img class="add-icon" src="assets/img/add-square.png" alt="thêm" />
                </div>
                <u class="text-color">{{ "btn.add.user.sign" | translate }}</u>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<!-- them doi tac -->
<div style="display: flex">
  <div style="display: flex; cursor: pointer">
    <u class="label text-color" (click)="addPartner()" style="background-color: #ffffff">{{ "them_doi_tac" | translate
      }}</u>
  </div>
</div>

<div class="footer-determine" style="display: flex; justify-content: space-between">
  <div style="width: 200px">
    <button (click)="back($event, 'infor-contract')" type="button" name="next" class="next action-button-previous">
      {{ "btn.previous" | translate }}
    </button>
  </div>
  <div>
    <button [disabled]="isButtonDisabled" type="button" name="next" class="next draft-button"
      (click)="next('save-draft')">
      {{ "btn.save-draft" | translate }}
    </button>
    <button [disabled]="isButtonDisabled" (click)="next('save-step')" type="button" name="next"
      class="next action-button pull-right">
      {{ "btn.next" | translate }}
    </button>
  </div>
</div>
<ngx-spinner bdColor="rgba(51,51,51,0.8)" size="medium" color="#fff" type="ball-spin-clockwise">
  <p style="font-size: 18px; color: white">
    {{ "sys.processing" | translate }}...
  </p>
</ngx-spinner>