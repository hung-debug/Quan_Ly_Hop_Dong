<!-- <p-selectButton [options]="stateOptions" [(ngModel)]="isOrg" optionLabel="label" optionValue="value" (click)="changeTab()" class="row" style="padding: 10px; ">
    <ng-template #options let-item>
        <span style="margin: auto;width: 50%;">{{item.label | translate}}</span>
    </ng-template>
</p-selectButton> -->

<!--Truong hop dang xu ly va sap het han-->
<div #mydiv *ngIf="(this.filter_status == 20 || this.filter_status == 33) && this.isOrg == 'off'" class="col-md-4" class="container-fluid">
  <div class="row container-fluid-bg">
    <div class="margin-top-16">
      <p-selectButton [options]="stateOptions" [(ngModel)]="isOrg" optionLabel="label" optionValue="value" (click)="changeTab()" class="row">
        <ng-template #options let-item>
            <span class="button-classify">{{ item.label | translate}}</span>
        </ng-template>
      </p-selectButton>
    </div>
    <ng-template [ngIf]="!roleMess">
      <div class="row cancel-padding" style="margin: 16px auto;">
        <div class="col-lg-9-8 btn-padding-right">
            <div class="input-line search">
                <!-- <img src="../../assets/img/icon_search.svg" class="input-img" /> -->
                <input type="text" id="filter_name" [value]="filter_name" class="input-text" placeholder="{{'contract.search.name.placeholder' | translate}}" (keyup)="autoSearch($event)" />
                <!-- <img src="../../assets/img/icon_search_group.svg" class="input-img" (click)="searchContract()" /> -->
            </div>

        </div>
        <div class="col-lg-1-1 col-md-6 btn_search btn-padding-right btn-padding-left" >
          <button class="btn-block btn_advanced" (click)="searchContract()" >
            {{'btn.advance' | translate}}
            <img src="../../assets/img/vector_advance.svg" class="input-img" />
          </button>
        </div>
        <div class="col-lg-1-1 col-md-6 btn_search btn-padding-left">
          <button (click)="cancelMany()" class="btn-block btn_cancel">{{'cancel.multi'| translate}}</button>
        </div>
      </div>

      <div class="row list_header" *ngIf="pageTotal > 0;" >
          <!-- <div *ngIf="this.filter_status == 20 || this.filter_status == 33" class="col-md-4">{{'contract.process' | translate}}</div> -->
          <!-- <div class="col-sm-0-5 bg-header" style="text-align: left;"> -->
            <!-- <input type="checkbox" style="width: 20px; height: 20px;"> -->
          <!-- </div> -->
          <div class="col-sm-5 bg-header">{{'contract.process' | translate}}
          </div>
          <div class="col-sm-2 bg-header">{{'report.status.contract' | translate}}
            <!-- <img src="../../assets/img/sort.svg"/> -->
          </div>
          <div class="col-sm-2 bg-header">{{'create-time' | translate}}
            <!-- <img src="../../assets/img/sort.svg"/> -->
          </div>
          <!-- <div class="col-md-2">{{'expiration-date' | translate}}
            <img src="../../assets/img/sort.svg"/>
          </div> -->
          <div class="col-sm-2 bg-header">{{'sign-expired-time' | translate}}
            <!-- <img src="../../assets/img/sort.svg"/> -->
          </div>
          <div class="col-sm-1 bg-header"></div>
      </div>
      <div *ngIf="pageTotal > 0" class="table-contract" style="min-height: 60vh">
        <div class="item_contract" *ngFor="let item of contracts | paginate:{itemsPerPage: page, currentPage:p, totalItems: pageTotal}">
          <div class="row">
            <!--Cột 1-->
              <!-- <div class="col-sm-0-5 item_icon">
                <div style="display: flex;">
                    <div class="col-md-1 calendar_create" style="display: flex;">
                      <div>
                        <input class="input-checkbox" name="item" type="checkbox" value="{{item.contractId}}" [(ngModel)]="item.checked"/>
                      </div>
                    </div>
                </div>
              </div> -->
              <!--Cột 2-->
              <div class="col-sm-5">
                  <div class="flex-container">
                      <div>
                        <input class="input-checkbox col-md-1" name="item" type="checkbox" value="{{item.contractId}}" [(ngModel)]="item.checked"/>
                      </div>

                      <div class="col-md-11" style="display: flex;margin-left: 12px;cursor: pointer;" (click)="isQLHD_07?openDetail(item.id):null">
                        <img src="../../assets/img/frame_contract.svg" style="width: 72px;">
                        <div style="margin-left: 12px;">
                          <div class="item_contract_name">
                              <a class="item_contract_name" style="text-decoration: none;" (click)="isQLHD_07?openDetail(item.id):null" [routerLink]="['/main/form-contract/detail', item.id]" [queryParams]="{
                                          'page': this.p,
                                          'filter_type': this.filter_type,
                                          'filter_contract_no': this.filter_contract_no,
                                          'filter_from_date': this.filter_from_date,
                                          'filter_to_date': this.filter_to_date,
                                          'isOrg': this.isOrg,
                                          'organization_id': this.organization_id,
                                          'status': this.status
                                        }">{{item.name}}</a>
                          </div>

                          <div class="row item_contract_infor" *ngFor="let itemPar of sortParticipant(item.participants); let index = index">
                              <div>{{'side' | translate}} {{getNameOrganization(itemPar, index)}}
                              </div>
                          </div>
                        </div>
                          <!-- <div class="row">
                              <div class="item_contract_infor">{{'contract.status' | translate}}:
                                  <span class="status_blue">{{this.filter_status | pipe | translate}}
                                      {{getNameStatusCeca(item.status, item.ceca_push, item.ceca_status) |
                                      translate}}</span>
                              </div>
                          </div> -->
                      </div>

                  </div>
              </div>

              <!--Cột 3: Trạng thái HĐ-->
              <div class="col-sm-2 calendar_create">
                <div class="item_contract_status">
                  <!-- <span class="status_blue">{{this.filter_status | pipe | translate}}
                    {{getNameStatusCeca(item.status, item.ceca_push, item.ceca_status) |
                    translate}}</span> -->
                  <span class="status_blue" [ngStyle]="{'color': this.color, 'background-color': this.backgroundColor}">{{this.filter_status | pipe | translate}}</span>
                </div>
              </div>

              <!--Cột 4: Ngày tạo HĐ-->
              <!-- <div class="col-md-2 calendar_deadline">
                  <div style="display: flex; justify-content: center;">
                      <div class="div_icon"><i class="fa fa-calendar fa_icon"></i><span class="item_date">{{item.sign_time | date:
                              'dd/MM/yyyy'}}</span></div>
                      <div class="div_icon"><img src="../../assets/img/icon_edit.svg" class="img_icon" ngbTooltip="{{'edit.exp.sign.time' | translate}}" (click)="openEditExpiration(item)" />
                      </div>
                  </div>
              </div> -->
              <div class="col-sm-2 calendar_create">
                <div><i class="fa fa_icon"></i><span class="item_date">{{item.created_at | date:
                        'dd/MM/yyyy HH:mm:ss'}}</span></div>
                </div>

              <!--Cột 5: Ngày cập nhật-->
              <div class="col-sm-2 calendar_create">
                <!-- để tạm ngày tạo HĐ -->
                <div><i class="fa fa_icon"></i><span class="item_date">{{item.sign_time | date:
                  'dd/MM/yyyy'}}</span>
                </div>
              </div>

              <!--Cột 6: Thao tác-->
              <div class="col-sm-1 item_icon">
                <div class="three_dot" *ngIf="isOrg=='off'" style="display: flex; justify-content: flex-end;">
                  <!-- <img src="../../assets/img/lets-icons_meatballs-menu.svg"/> -->
                  <button mat-icon-button [matMenuTriggerFor]="menu" style="border: none; background-color: white;">
                    <mat-icon><img src="../../assets/img/lets-icons_meatballs-menu.svg"/></mat-icon>
                  </button>
                  <mat-menu #menu="matMenu">
                    <button mat-menu-item  class="div_icon" *ngIf="(status == 'draft' || status == 'processing' || status == 'expire' || status == 'overdue' || status == 'complete') && isQLHD_08 && this.isOrg == 'off'" (click)="openCopy(item.id)">
                      <mat-icon><img src="../../assets/img/copy.svg" class="img_icon"/></mat-icon>
                      <span class="three_dot_text">{{'contract.copy' | translate}}</span>
                    </button>
                    <button mat-menu-item class="div_icon" *ngIf="(status == 'processing' || status == 'expire' || status == 'complete') && isQLHD_12 && this.isOrg == 'off'" (click)="contractConnect(item.id)">
                      <mat-icon><img src="../../assets/img/document-text.svg" class="img_icon"/></mat-icon>
                      <span class="three_dot_text">{{'contract.connect.view' | translate}}</span>
                    </button>
                    <button mat-menu-item class="div_icon" (click)="processHandleContract(item.id)">
                      <mat-icon><img src="../../assets/img/programming-arrow.svg" class="img_icon"/></mat-icon>
                      <span class="three_dot_text">{{'view.processing.flow' | translate}}</span>
                    </button>
                    <button mat-menu-item class="div_icon" (click)="openEditExpiration(item)" *ngIf="this.isOrg == 'off' && (status == 'processing' || status == 'expire' || status == 'overdue')">
                      <mat-icon><img src="../../assets/img/timer-start.svg" class="img_icon"/></mat-icon>
                      <span class="three_dot_text">{{'edit.sign.time' | translate}}</span>
                    </button>
                    <button mat-menu-item class="div_icon" *ngIf="(status == 'processing' || status == 'expire') && isQLHD_09 && this.isOrg == 'off'" (click)="cancelContract(item.id);">
                      <mat-icon><img src="../../assets/img/slash.svg" class="img_icon"/></mat-icon>
                      <span class="three_dot_text">{{'contract.cancel' | translate}}</span>
                    </button>
                  </mat-menu>
                </div>
                  <!-- <div *ngIf="isOrg=='off'" style="display: flex; justify-content: center;"> -->
                      <!-- <div class="div_icon" *ngIf="(status == 'draft' || status == 'processing' || status == 'expire' || status == 'overdue') && isQLHD_08">
                          <img src="../../assets/img/icon_copy.svg" class="img_icon" ngbTooltip="{{'contract.copy' | translate}}" (click)="openCopy(item.id)" />
                      </div>
                      <div class="div_icon" *ngIf="status == 'draft' && isQLHD_02">
                          <img src="../../assets/img/icon_edit.svg" class="img_icon" ngbTooltip="{{'contract.edit' | translate}}" (click)="openEdit(item.id)" />
                      </div>
                      <div class="div_icon" *ngIf="status == 'draft'">
                          <img src="../../assets/img/icon_delete.svg" class="img_icon" ngbTooltip="{{'contract.delete' | translate}}" (click)="deleteContract(item.id)" />
                      </div>
                      <div class="div_icon" *ngIf="(status == 'processing' || status == 'expire' || status == 'complete') && isQLHD_12">
                          <img src="../../assets/img/icon_view_connect.svg" class="img_icon" ngbTooltip="{{'contract.connect.view' | translate}}" (click)="contractConnect(item.id)" />
                      </div> -->
                      <!--
                          <div class="div_icon" *ngIf="status == 'processing' || status == 'expire'">
                              <img src="../../assets/img/icon_add_connect.svg" class="img_icon" ngbTooltip="{{'contract.connect.add' | translate}}" (click)="addContractConnect(item.id)"/>
                          </div> --> <!--comment-->
                      <!-- <div class="div_icon" *ngIf="status == 'complete' && isQLHD_11">
                          <img src="../../assets/img/icon_add_connect.svg" class="img_icon" ngbTooltip="{{'contract.connect.add' | translate}}" (click)="addContractConnectNew(item.id)" />
                      </div>
                      <div class="div_icon" *ngIf="(status == 'processing' || status == 'expire') && isQLHD_09">
                          <img src="../../assets/img/icon_stop.svg" class="img_icon" ngbTooltip="{{'contract.cancel' | translate}}" (click)="cancelContract(item.id);" />
                      </div>
                      <div class="div_icon" *ngIf="status == 'complete'">
                          <img src="../../assets/img/icon_download.svg" class="img_icon" ngbTooltip="{{'contract.download' | translate}}" (click)="downloadContract(item.id);" />
                      </div>
                      <div class="div_icon" *ngIf="status == 'complete' && isQLHD_13">
                          <img src="../../assets/img/icon_share.svg" class="img_icon" ngbTooltip="{{'contract.share' | translate}}" (click)="shareContract(item.id);" />
                      </div> -->

                      <!-- <div class="div_icon" *ngIf="status == 'cancel'"> -->
                          <!-- <img src="../../assets/img/view_reason_icon.svg" class="img_icon" ngbTooltip="{{'reasson.cancel.contract' | translate}}" (click)="ViewReasonCancel(item.id)" /> -->  <!--comment-->
                          <!-- <img src="../../assets/img/cancel_notes.svg" class="img_icon" ngbTooltip="{{ 'reasson.cancel.contract' | translate}}" (click)="ViewReasonCancel(item.id)" /> -->
                      <!-- </div> -->
                  <!-- </div> -->
              </div>
          </div>
        </div>
      </div>
      <div *ngIf="pageTotal == 0" style="min-height: 65vh;display: table;top: 0;left: 0;width: 100%;text-align: center;margin-top: 20px;">
          <div style="display: table-cell;vertical-align: middle;">
              <img src="../../../assets/img/no_data.svg" />
              <div style="color: #94A7C6">{{'no.data' | translate}}</div>
          </div>
      </div>
    </ng-template>
  </div>
    <div class="contract_footer">
      <div class="footer_contract_per_page">
          <div>Số lượng hiển thị&nbsp;</div>
          <select [(ngModel)]="this.page" (change)="changePageNumber($event)">
              <option value="" hidden>{{this.page}}</option>
              <option *ngFor="let d of this.pageOptions">{{d}}</option>
          </select>
          <div>&nbsp;{{'contracts.per.page' | translate}}</div>
      </div>
      <div class="footer_title">
      </div>
      <div class="footer_pagination">
        <pagination-controls *ngIf="pageTotal > 0;" (pageChange)="p=$event; getContractList()" previousLabel="" nextLabel=""></pagination-controls>
        <div class="enterPage" *ngIf="pageTotal > 0">
            <input class="text-enterPage" placeholder="{{'contract.enterPage' | translate}}" (keypress)="validateInput($event)" [(ngModel)]="enterPage" (input)="onInput($event)"/>
            <p>của {{countPage()}} trang</p>
        </div>
    </div>
      <!-- <div class="footer_page_number">{{'chart.number' | translate}}: {{this.getPageStartEnd()}} / {{pageTotal}} -->
      <div class="footer_page_number">Hiển thị <span style="color:#001A4D ;">{{this.getPageStartEnd()}} / {{pageTotal}}</span> kết quả
      </div>
    </div>
    <div class="contract_footer_responsive">
      <div class="contract_footer_per_page_responsive">
          <div>Số lượng hiển thị&nbsp;</div>
          <select [(ngModel)]="this.page" (change)="changePageNumber($event)">
            <option value="" hidden>10</option>
            <option *ngFor="let d of this.pageOptions">{{d}}</option>
          </select>
        <div>&nbsp;{{'contracts.per.page' | translate}}</div>
    </div>
    <div class="footer_pagination">
      <pagination-controls *ngIf="pageTotal > 0;" (pageChange)="p=$event; getContractList()" previousLabel="" nextLabel=""></pagination-controls>
      <div class="enterPage" *ngIf="pageTotal > 0">
          <input class="text-enterPage" placeholder="{{'contract.enterPage' | translate}}" (keypress)="validateInput($event)" [(ngModel)]="enterPage" (input)="onInput($event)"/>
          <p>của {{countPage()}} trang</p>
      </div>
    </div>
      <div class="footer_page_number">Hiển thị <span style="color:#001A4D ;">{{this.getPageStartEnd()}} / {{pageTotal}}</span> kết quả
    </div>
  </div>
  <div class="contract_footer_pagination_responsive">
    <pagination-controls *ngIf="pageTotal > 0;" (pageChange)="p=$event; getContractList()" previousLabel="" nextLabel=""></pagination-controls>
    <div class="enterPage" *ngIf="pageTotal > 0">
        <input class="text-enterPage" placeholder="{{'contract.enterPage' | translate}}" (keypress)="validateInput($event)" [(ngModel)]="enterPage" (input)="onInput($event)"/>
        <p>của {{countPage()}} trang</p>
    </div>
  </div>
    <div>{{roleMess | translate}}</div>
</div>

<!--Truong hop khac-->
<div *ngIf="!((this.filter_status == 20 ||
               this.filter_status == 33 ||
               this.filter_status == 30 ||
               this.typeDisplay =='multiDeleteDraft' ||
               this.typeDisplay =='release') && this.isOrg == 'off') && status != 'complete'" class="container-fluid">
  <div class="row container-fluid-bg">
    <div class="margin-top-16">
      <p-selectButton [options]="stateOptions" [(ngModel)]="isOrg" optionLabel="label" optionValue="value" (click)="changeTab()" class="row">
        <ng-template #options let-item>
            <span class="button-classify">{{item.label | translate}}</span>
        </ng-template>
      </p-selectButton>
    </div>
    <ng-template [ngIf]="!roleMess">
      <div class="row cancel-padding" style="margin: 16px auto;">
        <div [ngClass]="{'col-lg-10-9': !(status === 'draft' && isOrg === 'off'), 'col-lg-8-7': status === 'draft' && isOrg === 'off', 'btn-padding-right': true}">
            <div class="input-line search">
                <!-- <img src="../../assets/img/icon_search.svg" class="input-img" /> -->
                <input type="text" id="filter_name" [value]="filter_name" class="input-text" placeholder="{{'contract.search.name.placeholder' | translate}}" (keyup)="autoSearch($event)" />
                <!-- <img src="../../assets/img/icon_search_group.svg" class="input-img" (click)="searchContract()" /> -->
            </div>
        </div>

        <div [ngClass]="{'btn-padding-right': status === 'draft' && isOrg === 'off', 'col-lg-1-1': true, 'col-md-4': status === 'draft' && isOrg === 'off', 'btn_search': true, 'btn-padding-left': true}">
          <button class="btn-block btn_advanced" (click)="searchContract()" >
            {{'btn.advance' | translate}}
            <img src="../../assets/img/vector_advance.svg" class="input-img" />
          </button>
        </div>

        <div *ngIf="status == 'draft' && this.isOrg == 'off'" class="col-lg-1-1 col-md-4 btn_search btn-padding-right btn-padding-left" >
          <button class="btn-block btn_cancel" (click)="release()">
            {{'release'|translate}}
          </button>
        </div>

        <div *ngIf="status == 'draft' && this.isOrg == 'off'" class="col-lg-1-1 col-md-4 btn_search btn-padding-left" >
          <button class="btn-block btn_cancel" (click)="multiDeleteDraft('multiDelete')">
            {{'btn.multi.delete'|translate}}
          </button>
        </div>
      </div>

        <div class="row list_header" *ngIf="pageTotal > 0;">
            <!-- <div class="col-xxl-1 col-md-1" style="text-align: left;"> -->
              <!-- <input type="checkbox" style="width: 20px; height: 20px;"> -->
            <!-- </div> -->
            <div class="col-sm-5 bg-header">{{'contract.process' | translate}}</div>
            <!-- <div class="col-md-1" *ngIf="this.filter_status == 30 || this.filter_status == 40">{{'status.ceca' | translate}}
              <img src="../../assets/img/sort.svg"/>
            </div> -->
            <div class="col-sm-2 bg-header">{{'report.status.contract' | translate}}
              <!-- <img src="../../assets/img/sort.svg"/> -->
            </div>
            <div class="col-sm-2 bg-header">{{'create-time' | translate}}
              <!-- <img src="../../assets/img/sort.svg"/> -->
            </div>

            <ng-container [ngSwitch]="filter_status">
              <div *ngSwitchCase="0" class="col-sm-2 bg-header">{{'time.update' | translate}}</div>
              <div *ngSwitchCase="20" class="col-sm-2 bg-header">{{'sign-expired-time' | translate}}</div>
              <div *ngSwitchCase="33" class="col-sm-2 bg-header">{{'sign-expired-time' | translate}}</div>
              <div *ngSwitchCase="34" class="col-sm-2 bg-header">{{'sign-expired-time' | translate}}</div>
              <div *ngSwitchCase="31" class="col-sm-2 bg-header">{{'refuse-time' | translate}}</div>
              <div *ngSwitchCase="32" class="col-sm-2 bg-header">{{'cancel-time' | translate}}</div>
              <div *ngSwitchCase="40" class="col-sm-2 bg-header">{{'liquidated-time' | translate}}</div>
              <div *ngSwitchDefault class="col-sm-2 bg-header">{{'day.update' | translate}}</div>
            </ng-container>

            <div class="col-sm-1 bg-header"></div>
        </div>

        <div *ngIf="pageTotal > 0" class="table-contract">
          <div class="item_contract" *ngFor="let item of contracts | paginate:{itemsPerPage: page, currentPage:p, totalItems: pageTotal}">

            <div class="row">
                <!--Cột 1-->
                <!-- <div class="col-xxl-1 col-md-1 item_icon"> -->
                  <!-- <div style="display: flex;"> -->
                      <!-- <div class="col-md-1">
                        <div style="margin-left: 35px;">
                          <img src="../../assets/img/frame_contract.svg" style="width: 72px;">
                        </div>
                      </div> -->
                  <!-- </div>
                </div> -->
                <!--Cột 2-->
                <div class="col-sm-5">
                    <div class="row">
                      <div class="col-md-11" style="display: flex;margin-left: 6px; cursor: pointer;" (click)="isQLHD_07?openDetail(item.id):null">
                          <img src="../../assets/img/frame_contract.svg" style="width: 72px;">
                          <div style="margin-left: 12px;">
                            <div class="item_contract_name">
                                <a class="item_contract_name" style="text-decoration: none;"  [routerLink]="['/main/form-contract/detail', item.id]" [queryParams]="{
                                        'page': this.p,
                                        'filter_type': this.filter_type,
                                        'filter_contract_no': this.filter_contract_no,
                                        'filter_from_date': this.filter_from_date,
                                        'filter_to_date': this.filter_to_date,
                                        'isOrg': this.isOrg,
                                        'organization_id': this.organization_id,
                                        'status': this.status
                                      }">{{item.name}}</a>
                            </div>

                            <div class="row" *ngFor="let itemPar of sortParticipant(item.participants); let index = index">
                                <div class="item_contract_infor">{{'side' | translate}} {{getNameOrganization(itemPar, index)}}
                                </div>
                            </div>

                            <!-- <div class="row">
                                <div class="item_contract_infor">{{'contract.status' | translate}}:
                                    <span class="status_blue">{{this.filter_status | pipe | translate}}
                                        {{getNameStatusCeca(item.status, item.ceca_push, item.ceca_status) |
                                        translate}}</span>
                                </div>
                            </div>
                            <div class="row">
                              <div class="item_contract_infor">
                                <u style="color: #106DB6; cursor: pointer" (click)="processHandleContract(item.id)">{{'contract_processing_flow' | translate}}</u>
                              </div>
                            </div> -->
                        </div>
                      </div>
                    </div>
                </div>

                <!--Cột 3: Trạng thái HĐ-->
                <div class="col-sm-2 calendar_create">
                  <div class="item_contract_status">
                    <span class="status_blue" [ngStyle]="{'color': this.color, 'background-color': this.backgroundColor}">{{this.filter_status | pipe | translate}}</span>
                  </div>
                </div>

                <!--Cột 4: Ngày tạo-->
                <div class="col-sm-2 calendar_create">
                    <div><i class="fa fa_icon"></i><span class="item_date">{{item.created_at | date:
                            'dd/MM/yyyy HH:mm:ss'}}</span></div>
                </div>

                <!--Cột 5: Ngày cập nhật-->
                <div class="col-sm-2 calendar_create">
                  <!-- để tạm ngày tạo HĐ -->
                  <div><i class="fa fa_icon"></i>
                    <span *ngIf = "this.filter_status == 20 || this.filter_status == 33" class="item_date">
                      {{item.sign_time | date:'dd/MM/yyyy HH:mm:ss'}}
                    </span>
                    <span *ngIf = "this.filter_status == 34" class="item_date">
                      {{item.sign_time | date:'dd/MM/yyyy'}}
                    </span>
                    <span *ngIf = "this.filter_status == 31" class="item_date">
                      {{item.reject_time | date:'dd/MM/yyyy HH:mm:ss'}}
                    </span>
                    <span *ngIf = "this.filter_status == 32" class="item_date">
                      {{item.cancelDate | date:'dd/MM/yyyy HH:mm:ss'}}
                    </span>
                    <span *ngIf = "this.filter_status == 40" class="item_date">
                      {{item.sign_time | date:'dd/MM/yyyy'}}
                    </span>
                    <span *ngIf = "this.filter_status != 20 && this.filter_status != 33 && this.filter_status != 34 && this.filter_status != 31 && this.filter_status != 32 && this.filter_status != 40" class="item_date">
                      {{item.updated_at | date:'dd/MM/yyyy HH:mm:ss'}}
                    </span>
                  </div>
                </div>
                <!-- <div class="col-md-2 calendar_deadline">
                    <div style="display: flex; justify-content: center;">
                        <div class="div_icon"><i class="fa fa-calendar fa_icon"></i><span class="item_date">{{item.sign_time | date:
                                'dd/MM/yyyy'}}</span></div> -->
                        <!--34: quá hạn cho phép sửa ngay hết hạn-->
                        <!-- <div *ngIf="this.filter_status == 34" class="div_icon"><img src="../../assets/img/icon_edit.svg" class="img_icon" ngbTooltip="{{'edit.exp.sign.time' | translate}}" (click)="openEditExpiration(item)" />
                        </div>
                    </div>
                </div> -->

                <!--Cột 6: Thao tác-->
                <div class="col-sm-1 item_icon">
                  <div class="three_dot" style="display: flex; justify-content: flex-end;">
                    <button mat-icon-button [matMenuTriggerFor]="menu" style="border: none; background-color: white;">
                      <mat-icon><img src="../../assets/img/lets-icons_meatballs-menu.svg"/></mat-icon>
                    </button>
                    <mat-menu #menu="matMenu">
                      <button mat-menu-item  class="div_icon" *ngIf="(status == 'draft' || status == 'processing' || status == 'expire' || status == 'overdue' || status == 'complete') && isQLHD_08 && this.isOrg == 'off'" (click)="openCopy(item.id)">
                        <mat-icon><img src="../../assets/img/copy.svg" class="img_icon"/></mat-icon>
                        <span class="three_dot_text">{{'contract.copy' | translate}}</span>
                      </button>
                      <button mat-menu-item class="div_icon" *ngIf="(status == 'processing' || status == 'expire' || status == 'complete') && isQLHD_12 && this.isOrg == 'off'" (click)="contractConnect(item.id)">
                        <mat-icon><img src="../../assets/img/document-text.svg" class="img_icon"/></mat-icon>
                        <span class="three_dot_text">{{'contract.connect.view' | translate}}</span>
                      </button>
                      <button mat-menu-item class="div_icon" (click)="processHandleContract(item.id)">
                        <mat-icon><img src="../../assets/img/programming-arrow.svg" class="img_icon"/></mat-icon>
                        <span class="three_dot_text">{{'view.processing.flow' | translate}}</span>
                      </button>
                      <button mat-menu-item class="div_icon" *ngIf="(status == 'processing' || status == 'expire' || status == 'overdue') && this.isOrg == 'off'" (click)="openEditExpiration(item)">
                        <mat-icon><img src="../../assets/img/timer-start.svg" class="img_icon"/></mat-icon>
                        <span class="three_dot_text">{{'edit.sign.time' | translate}}</span>
                      </button>
                      <button mat-menu-item class="div_icon" *ngIf="(status == 'processing' || status == 'expire') && isQLHD_09 && this.isOrg == 'off'" (click)="cancelContract(item.id);">
                        <mat-icon><img src="../../assets/img/slash.svg" class="img_icon"/></mat-icon>
                        <span class="three_dot_text">{{'contract.cancel' | translate}}</span>
                      </button>
                      <button mat-menu-item class="div_icon" *ngIf="status == 'cancel' && this.isOrg == 'off'" (click)="ViewReasonCancel(item.id)">
                        <mat-icon><img src="../../assets/img/cancel_notes.svg" class="img_icon"/></mat-icon>
                        <span class="three_dot_text">{{'reasson.cancel.contract' | translate}}</span>
                      </button>
                      <button mat-menu-item class="div_icon" *ngIf="status == 'draft' && isQLHD_02 && this.isOrg == 'off'" (click)="openEdit(item.id)">
                        <mat-icon><img src="../../assets/img/edit.svg" class="img_icon"/></mat-icon>
                        <span class="three_dot_text">{{'contract.edit' | translate}}</span>
                      </button>
                      <button mat-menu-item class="div_icon" *ngIf="status == 'draft' && this.isOrg == 'off'" (click)="deleteContract(item.id)">
                        <mat-icon><img src="../../assets/img/trash_contract.svg" class="img_icon"/></mat-icon>
                        <span class="three_dot_text">{{'contract.delete' | translate}}</span>
                      </button>
                    </mat-menu>
                  </div>

                    <!-- <div style="display: flex; justify-content: center;"> -->
                        <!-- <div *ngIf="this.isOrg == 'off'"> -->
                        <!-- <div class="div_icon" *ngIf="(status == 'draft' || status == 'processing' || status == 'expire' || status == 'overdue' || status == 'cancel') && isQLHD_08 && this.isOrg == 'off'">
                            <img src="../../assets/img/icon_copy.svg" class="img_icon" ngbTooltip="{{'contract.copy' | translate}}" (click)="openCopy(item.id)" />
                        </div>
                        <div class="div_icon" *ngIf="status == 'draft' && isQLHD_02 && this.isOrg == 'off'">
                            <img src="../../assets/img/icon_edit.svg" class="img_icon" ngbTooltip="{{'contract.edit' | translate}}" (click)="openEdit(item.id)" />
                        </div>
                        <div class="div_icon" *ngIf="status == 'draft' && this.isOrg == 'off'">
                            <img src="../../assets/img/icon_delete.svg" class="img_icon" ngbTooltip="{{'contract.delete' | translate}}" (click)="deleteContract(item.id)" />
                        </div>
                        <div class="div_icon" *ngIf="(status == 'processing' || status == 'expire' || status == 'complete') && isQLHD_12 && this.isOrg == 'off'">
                            <img src="../../assets/img/icon_view_connect.svg" class="img_icon" ngbTooltip="{{'contract.connect.view' | translate}}" (click)="contractConnect(item.id)" />
                        </div>
                        <div class="div_icon" *ngIf="status == 'complete' && isQLHD_11 && this.isOrg == 'off'">
                            <img src="../../assets/img/icon_add_connect.svg" class="img_icon" ngbTooltip="{{'contract.connect.add' | translate}}" (click)="addContractConnectNew(item.id)" />
                        </div>
                        <div class="div_icon" *ngIf="(status == 'processing' || status == 'expire') && isQLHD_09 && this.isOrg == 'off'">
                            <img src="../../assets/img/icon_stop.svg" class="img_icon" ngbTooltip="{{'contract.cancel' | translate}}" (click)="cancelContract(item.id);" />
                        </div>
                        <div class="div_icon" *ngIf="status == 'complete' && this.isOrg == 'off'">
                            <img src="../../assets/img/icon_download.svg" class="img_icon" ngbTooltip="{{'contract.download' | translate}}" (click)="downloadContract(item.id);" />
                        </div>
                        <div class="div_icon" *ngIf="status == 'complete' && isQLHD_13 && this.isOrg == 'off'">
                            <img src="../../assets/img/icon_share.svg" class="img_icon" ngbTooltip="{{'contract.share' | translate}}" (click)="shareContract(item.id);" />
                        </div>
                        <div class="div_icon" *ngIf="status == 'cancel'">
                            <img src="../../assets/img/cancel_notes.svg" class="img_icon" ngbTooltip="{{'reasson.cancel.contract' | translate}}" (click)="ViewReasonCancel(item.id)" />
                        </div> -->
                    <!-- </div> -->
                </div>
            </div>
          </div>
        </div>

        <div *ngIf="pageTotal == 0" style="min-height: 65vh;display: table;top: 0;left: 0;width: 100%;text-align: center;margin-top: 20px;">
            <div style="display: table-cell;vertical-align: middle;">
                <img src="../../../assets/img/no_data.svg" />
                <div style="color: #94A7C6">{{'no.data' | translate}}</div>
            </div>
        </div>

      </ng-template>
    </div>
    <div class="contract_footer">
      <div class="footer_contract_per_page">
          <div>Số lượng hiển thị&nbsp;</div>
          <select [(ngModel)]="this.page" (change)="changePageNumber($event)">
              <option value="" hidden>10</option>
              <option *ngFor="let d of this.pageOptions">{{d}}</option>
          </select>
          <div>&nbsp;{{'contracts.per.page' | translate}}</div>
      </div>
      <div class="footer_title"></div>
      <div class="footer_pagination">
        <pagination-controls *ngIf="pageTotal > 0;" (pageChange)="p=$event; getContractList()" previousLabel="" nextLabel=""></pagination-controls>
        <div class="enterPage" *ngIf="pageTotal > 0">
            <input class="text-enterPage" placeholder="{{'contract.enterPage' | translate}}" (keypress)="validateInput($event)" [(ngModel)]="enterPage" (input)="onInput($event)"/>
            <p>của {{countPage()}} trang</p>
        </div>
      </div>
      <!-- <div class="footer_page_number">{{'chart.number' | translate}}: {{this.getPageStartEnd()}} / {{pageTotal}} -->
        <div class="footer_page_number">Hiển thị <span style="color:#001A4D ;">{{this.getPageStartEnd()}} / {{pageTotal}}</span> kết quả
      </div>
    </div>
    <div class="contract_footer_responsive">
        <div class="contract_footer_per_page_responsive">
            <div>Số lượng hiển thị&nbsp;</div>
            <select [(ngModel)]="this.page" (change)="changePageNumber($event)">
              <option value="" hidden>10</option>
              <option *ngFor="let d of this.pageOptions">{{d}}</option>
            </select>
          <div>&nbsp;{{'contracts.per.page' | translate}}</div>
      </div>
      <div class="footer_pagination">
        <pagination-controls *ngIf="pageTotal > 0;" (pageChange)="p=$event; getContractList()" previousLabel="" nextLabel=""></pagination-controls>
        <div class="enterPage" *ngIf="pageTotal > 0">
            <input class="text-enterPage" placeholder="{{'contract.enterPage' | translate}}" (keypress)="validateInput($event)" [(ngModel)]="enterPage" (input)="onInput($event)"/>
            <p>của {{countPage()}} trang</p>
        </div>
      </div>
        <div class="footer_page_number">Hiển thị <span style="color:#001A4D ;">{{this.getPageStartEnd()}} / {{pageTotal}}</span> kết quả
      </div>
    </div>
    <div class="contract_footer_pagination_responsive">
      <pagination-controls *ngIf="pageTotal > 0;" (pageChange)="p=$event; getContractList()" previousLabel="" nextLabel=""></pagination-controls>
      <div class="enterPage" *ngIf="pageTotal > 0">
          <input class="text-enterPage" placeholder="{{'contract.enterPage' | translate}}" (keypress)="validateInput($event)" [(ngModel)]="enterPage" (input)="onInput($event)"/>
          <p>của {{countPage()}} trang</p>
      </div>
    </div>
    <div>{{roleMess | translate}}</div>
</div>

<!-- Màn HĐ hoàn thành HĐ của tổ chức-->
<div *ngIf="!((this.filter_status == 20 ||
              this.filter_status == 33 ||
              this.filter_status == 30 ||
              this.typeDisplay =='release') && this.isOrg == 'off')
              && this.typeDisplay !== 'downloadMany' && status == 'complete'" class="container-fluid">
  <div class="row container-fluid-bg">
    <div class="margin-top-16">
      <p-selectButton [options]="stateOptions" [(ngModel)]="isOrg" optionLabel="label" optionValue="value" (click)="changeTab()" class="row">
        <ng-template #options let-item>
            <span class="button-classify">{{item.label | translate}}</span>
        </ng-template>
      </p-selectButton>
    </div>
    <ng-template [ngIf]="!roleMess">
      <div class="row cancel-padding" style="margin: 16px auto;">
        <div class="col-lg-9-8 btn-padding-right">
            <div class="input-line search">
                <!-- <img src="../../assets/img/icon_search.svg" class="input-img" /> -->
                <input type="text" id="filter_name" [value]="filter_name" class="input-text" placeholder="{{'contract.search.name.placeholder' | translate}}" (keyup)="autoSearch($event)" />
                <!-- <img src="../../assets/img/icon_search_group.svg" class="input-img" (click)="searchContract()" /> -->
            </div>
        </div>

        <div class="col-lg-1-1 col-md-6 btn_search btn-padding-right btn-padding-left" >
          <button class="btn-block btn_advanced" (click)="searchContract()" >
            {{'btn.advance' | translate}}
            <img src="../../assets/img/vector_advance.svg" class="input-img" />
          </button>
        </div>

        <div class="col-lg-1-1 col-md-6 btn_search btn-padding-left">
          <button *ngIf="this.typeDisplay === 'view'" (click)="downloadMany()" class="btn-block btn_cancel">{{'download.multi'|translate}}</button>
        </div>
      </div>

      <div class="row list_header" *ngIf="pageTotal > 0;">
          <!-- <div class="col-xxl-1 col-md-1" style="text-align: left;">
            <input type="checkbox" style="width: 20px; height: 20px;">
          </div> -->
          <div class="col-sm-5 bg-header">{{'contract.process' | translate}}</div>
          <div class="col-sm-2 bg-header">{{'report.status.contract' | translate}}
            <!-- <img src="../../assets/img/sort.svg"/> -->
          </div>
          <div class="col-sm-2 bg-header">{{'create-time' | translate}}
            <!-- <img src="../../assets/img/sort.svg"/> -->
          </div>
          <div class="col-sm-2 bg-header">{{'complete-time' | translate}}
            <!-- <img src="../../assets/img/sort.svg"/> -->
          </div>
          <div class="col-sm-1 bg-header"></div>
      </div>

      <div *ngIf="pageTotal > 0" class="table-contract">
        <div class="item_contract" *ngFor="let item of contracts | paginate:{itemsPerPage: page, currentPage:p, totalItems: pageTotal}">
            <div class="row">
                <!--Cột 1-->
                <!-- <div class="col-xxl-1 col-md-1 item_icon"> -->
                  <!-- <div style="display: flex;"> -->
                      <!-- <div class="col-md-1">
                        <div style="margin-left: 35px;">
                          <img src="../../assets/img/frame_contract.svg" style="width: 72px;">
                        </div>
                      </div> -->
                  <!-- </div>
                </div> -->
                <!--Cột 2-->
                <div class="col-sm-5">
                    <div class="row">
                        <div class="col-md-11" style="display: flex; margin-left: 12px; cursor: pointer;" (click)="isQLHD_07?openDetail(item.id):null">
                          <img src="../../assets/img/frame_contract.svg" style="width: 72px;">
                          <div style="margin-left: 12px;">
                            <div class="item_contract_name">
                                <a class="item_contract_name" style="text-decoration: none;"  [routerLink]="['/main/form-contract/detail', item.id]" [queryParams]="{
                                        'page': this.p,
                                        'filter_type': this.filter_type,
                                        'filter_contract_no': this.filter_contract_no,
                                        'filter_from_date': this.filter_from_date,
                                        'filter_to_date': this.filter_to_date,
                                        'isOrg': this.isOrg,
                                        'organization_id': this.organization_id,
                                        'status': this.status
                                      }">{{item.name}}</a>
                            </div>

                            <div class="row" *ngFor="let itemPar of sortParticipant(item.participants); let index = index">
                                <div class="item_contract_infor">{{'side' | translate}} {{getNameOrganization(itemPar, index)}}
                                </div>
                            </div>

                            <!-- <div class="row">
                                <div class="item_contract_infor">{{'contract.status' | translate}}:
                                    <span class="status_blue">{{this.filter_status | pipe | translate}}
                                        {{getNameStatusCeca(item.status, item.ceca_push, item.ceca_status) |
                                        translate}}</span>
                                </div>
                            </div> -->
                            <!-- <div class="row">
                              <div class="item_contract_infor">
                                <u style="color: #106DB6; cursor: pointer" (click)="processHandleContract(item.id)">{{'contract_processing_flow' | translate}}</u>
                              </div>
                            </div> -->
                        </div>
                      </div>
                    </div>
                </div>

                <!--Cột 3: Trạng thái HĐ-->
                <div class="col-sm-2 calendar_create">
                  <div class="item_contract_status">
                    <span class="status_blue" [ngStyle]="{'color': this.color, 'background-color': this.backgroundColor}">{{this.filter_status | pipe | translate}}
                    </span>
                  </div>
                </div>

                <!--Cột 4: Ngày tạo-->
                <div class="col-sm-2 calendar_create">
                  <div><i class="fa fa_icon"></i><span class="item_date">{{item.created_at | date:
                          'dd/MM/yyyy HH:mm:ss'}}</span></div>
                </div>
                <!-- <div class="col-md-2 calendar_deadline"> -->
                    <!-- <div style="display: flex; justify-content: center;">
                        <div class="div_icon"><i class="fa fa-calendar fa_icon"></i><span class="item_date">{{item.sign_time | date:
                                'dd/MM/yyyy'}}</span></div> -->
                        <!--34: quá hạn cho phép sửa ngay hết hạn-->
                        <!-- <div *ngIf="this.filter_status == 34" class="div_icon"><img src="../../assets/img/icon_edit.svg" class="img_icon" ngbTooltip="{{'edit.exp.sign.time' | translate}}" (click)="openEditExpiration(item)" />
                        </div> -->
                    <!-- </div> -->
                <!-- </div> -->

                <!--Cột 5: Ngày cập nhật-->
                <div class="col-sm-2 calendar_create">
                  <!-- để tạm ngày tạo HĐ -->
                  <div><i class="fa fa_icon"></i><span class="item_date">{{item.success_time | date:
                    'dd/MM/yyyy HH:mm:ss'}}</span>
                  </div>
                </div>
                <!-- <div class="col-md-3 item_icon">
                    <div style="display: flex; justify-content: center;">
                        <div class="div_icon" *ngIf="status == 'complete' && this.isOrg == 'on'">
                          <img src="../../assets/img/icon_download.svg" class="img_icon" ngbTooltip="{{'contract.download' | translate}}" (click)="downloadContract(item.id);" />
                        </div>
                    </div>
                </div> -->
                <!--Cột 6: Thao tác-->
                <div class="col-sm-1 item_icon">
                  <div class="three_dot" style="display: flex; justify-content: flex-end;">
                    <button mat-icon-button [matMenuTriggerFor]="menu" style="border: none; background-color: white;">
                      <mat-icon><img src="../../assets/img/lets-icons_meatballs-menu.svg"/></mat-icon>
                    </button>
                    <mat-menu #menu="matMenu">
                      <button mat-menu-item class="div_icon" *ngIf="status == 'complete' && this.isOrg == 'on'" (click)="downloadContract(item.id);">
                        <mat-icon><img src="../../assets/img/download_contract.svg" class="img_icon"/></mat-icon>
                        <span class="three_dot_text">{{'contract.download' | translate}}</span>
                      </button>
                      <button mat-menu-item class="div_icon" (click)="processHandleContract(item.id)">
                        <mat-icon><img src="../../assets/img/programming-arrow.svg" class="img_icon"/></mat-icon>
                        <span class="three_dot_text">{{'view.processing.flow' | translate}}</span>
                      </button>
                    </mat-menu>
                  </div>
                </div>
            </div>
        </div>

      </div>
      <div *ngIf="pageTotal == 0" style="min-height: 65vh;display: table;top: 0;left: 0;width: 100%;text-align: center;margin-top: 20px;">
          <div style="display: table-cell;vertical-align: middle;">
              <img src="../../../assets/img/no_data.svg" />
              <div style="color: #94A7C6">{{'no.data' | translate}}</div>
          </div>
      </div>
      </ng-template>
    </div>
    <div class="contract_footer">
      <div class="footer_contract_per_page">
          <div>Số lượng hiển thị&nbsp;</div>
          <select [(ngModel)]="this.page" (change)="changePageNumber($event)">
              <option value="" hidden>10</option>
              <option *ngFor="let d of this.pageOptions">{{d}}</option>
          </select>
          <div>&nbsp;{{'contracts.per.page' | translate}}</div>
      </div>
      <div class="footer_title"></div>
      <div class="footer_pagination">
        <pagination-controls *ngIf="pageTotal > 0;" (pageChange)="p=$event; getContractList()" previousLabel="" nextLabel=""></pagination-controls>
        <div class="enterPage" *ngIf="pageTotal > 0">
            <input class="text-enterPage" placeholder="{{'contract.enterPage' | translate}}" (keypress)="validateInput($event)" [(ngModel)]="enterPage" (input)="onInput($event)"/>
            <p>của {{countPage()}} trang</p>
        </div>
    </div>
      <!-- <div class="footer_page_number">{{'chart.number' | translate}}: {{this.getPageStartEnd()}} / {{pageTotal}} -->
      <div class="footer_page_number">Hiển thị <span style="color:#001A4D ;">{{this.getPageStartEnd()}} / {{pageTotal}}</span> kết quả
      </div>
    </div>
    <div>{{roleMess | translate}}</div>
</div>

<!-- HD Hoàn thành -->
<div *ngIf="(this.filter_status == 30 && this.isOrg == 'off' && this.typeDisplay === 'view')" class="container-fluid">
  <div class="row container-fluid-bg">
    <div class="margin-top-16">
      <p-selectButton [options]="stateOptions" [(ngModel)]="isOrg" optionLabel="label" optionValue="value" (click)="changeTab()" class="row">
        <ng-template #options let-item>
            <span class="button-classify">{{item.label | translate}}</span>
        </ng-template>
      </p-selectButton>
    </div>
    <ng-template [ngIf]="!roleMess">
      <div class="row cancel-padding" style="margin: 16px auto;">
        <div class="col-lg-9-8 btn-padding-right">
            <div class="input-line search">
                <!-- <img src="../../assets/img/icon_search.svg" class="input-img" /> -->
                <input type="text" id="filter_name" [value]="filter_name" class="input-text" placeholder="{{'contract.search.name.placeholder' | translate}}" (keyup)="autoSearch($event)" />
                <!-- <img src="../../assets/img/icon_search_group.svg" class="input-img" (click)="searchContract()" /> -->
            </div>
        </div>

        <div class="col-lg-1-1 col-md-6 btn_search btn-padding-right btn-padding-left" >
          <button class="btn-block btn_advanced" (click)="searchContract()" >
            {{'btn.advance' | translate}}
            <img src="../../assets/img/vector_advance.svg" class="input-img" />
          </button>
        </div>

        <div class="col-lg-1-1 col-md-6 btn_search btn-padding-left">
          <button *ngIf="this.typeDisplay === 'view'" (click)="downloadMany()" class="btn-block btn_cancel">{{'download.multi'|translate}}</button>
        </div>
      </div>

        <div class="row list_header" *ngIf="pageTotal > 0;">
            <!-- <div class="col-sm-5 bg-header" style="text-align: left;"> -->
              <!-- <input type="checkbox" style="width: 20px; height: 20px;"> -->
            <!-- </div> -->
            <div class="col-sm-5 bg-header">{{'contract.process' | translate}}</div>
            <div class="col-sm-2 bg-header">{{'report.status.contract' | translate}}
              <!-- <img src="../../assets/img/sort.svg"/> -->
            </div>
            <div class="col-sm-2 bg-header">{{'create-time' | translate}}
              <!-- <img src="../../assets/img/sort.svg"/> -->
            </div>
            <div class="col-sm-2 bg-header">{{'complete-time' | translate}}
              <!-- <img src="../../assets/img/sort.svg"/> -->
            </div>
            <div class="col-sm-1 bg-header"></div>
        </div>
        <div *ngIf="pageTotal > 0" class="table-contract">
          <div class="item_contract" *ngFor="let item of contracts | paginate:{itemsPerPage: page, currentPage:p, totalItems: pageTotal}">
            <div class="row">
                <!--Cột 1-->
                <!-- <div class="col-xxl-1 col-md-1 item_icon">
                  <div style="display: flex;">
                      <div class="col-md-1">
                        <div style="margin-left: 35px;">
                          <img src="../../assets/img/frame_contract.svg" style="width: 72px;">
                        </div>
                      </div>
                  </div>
                </div> -->
                <!--Cột 2-->
                <div class="col-sm-5">
                    <div class="row">
                        <div class="col-md-11" style="display: flex; cursor: pointer;" (click)="isQLHD_07?openDetail(item.id):null">
                          <img src="../../assets/img/frame_contract.svg" style="width: 72px;">
                          <div style="margin-left: 12px;">
                            <div class="item_contract_name">
                                <a class="item_contract_name" style="text-decoration: none;"  [routerLink]="['/main/form-contract/detail', item.id]" [queryParams]="{
                                        'page': this.p,
                                        'filter_type': this.filter_type,
                                        'filter_contract_no': this.filter_contract_no,
                                        'filter_from_date': this.filter_from_date,
                                        'filter_to_date': this.filter_to_date,
                                        'isOrg': this.isOrg,
                                        'organization_id': this.organization_id,
                                        'status': this.status
                                      }">{{item.name}}</a>
                            </div>

                            <div class="row" *ngFor="let itemPar of sortParticipant(item.participants); let index = index">
                                <div class="item_contract_infor">{{'side' | translate}} {{getNameOrganization(itemPar, index)}}
                                </div>
                            </div>

                            <!-- <div class="row">
                                <div class="item_contract_infor">{{'contract.status' | translate}}:
                                    <span class="status_blue">{{this.filter_status | pipe | translate}}
                                        {{getNameStatusCeca(item.status, item.ceca_push, item.ceca_status) |
                                        translate}}</span>
                                </div>
                            </div>
                            <div class="row">
                              <div class="item_contract_infor">
                                <u style="color: #106DB6; cursor: pointer" (click)="processHandleContract(item.id)">{{'contract_processing_flow' | translate}}</u>
                              </div>
                            </div> -->
                        </div>
                      </div>
                    </div>
                </div>

                <!--Cột 3: Trạng thái HĐ-->
                <div class="col-sm-2 calendar_create">
                  <div class="item_contract_status">
                    <!-- <span class="status_blue">{{this.filter_status | pipe | translate}}
                      {{getNameStatusCeca(item.status, item.ceca_push, item.ceca_status) | translate}}</span> -->
                      <span class="status_blue" [ngStyle]="{'color': this.color, 'background-color': this.backgroundColor}">{{this.filter_status | pipe | translate}}</span>
                  </div>
                </div>

                <!--Cột 4: Ngày tạo-->
                <div class="col-sm-2 calendar_create">
                    <div><i class="fa fa_icon"></i><span class="item_date">{{item.created_at | date:
                            'dd/MM/yyyy HH:mm:ss'}}</span></div>
                </div>

                <!--Cột 5: Ngày cập nhật cuối-->
                <div class="col-md-2 calendar_deadline">
                    <div><i class="fa fa_icon"></i><span class="item_date">{{item.success_time | date:
                            'dd/MM/yyyy HH:mm:ss'}}</span></div>
                </div>

                <!--Cột 6: Thao tác-->
                <div class="col-sm-1 item_icon">
                  <div class="three_dot" style="display: flex; justify-content: flex-end;">
                    <button mat-icon-button [matMenuTriggerFor]="menu" style="border: none; background-color: white;">
                      <mat-icon><img src="../../assets/img/lets-icons_meatballs-menu.svg"/></mat-icon>
                    </button>
                    <mat-menu #menu="matMenu">
                      <button mat-menu-item  class="div_icon" *ngIf="(status == 'draft' || status == 'processing' || status == 'expire' || status == 'overdue' || status == 'complete') && isQLHD_08 && this.isOrg == 'off'" (click)="openCopy(item.id)">
                        <mat-icon><img src="../../assets/img/copy.svg" class="img_icon"/></mat-icon>
                        <span class="three_dot_text">{{'contract.copy' | translate}}</span>
                      </button>
                      <button mat-menu-item class="div_icon" *ngIf="(status == 'processing' || status == 'expire' || status == 'complete') && isQLHD_12 && this.isOrg == 'off'" (click)="contractConnect(item.id)">
                        <mat-icon><img src="../../assets/img/document-text.svg" class="img_icon"/></mat-icon>
                        <span class="three_dot_text">{{'contract.connect.view' | translate}}</span>
                      </button>
                      <button mat-menu-item class="div_icon" *ngIf="status == 'complete' && isQLHD_11 && this.isOrg == 'off'" (click)="addContractConnectNew(item.id)">
                        <mat-icon><img src="../../assets/img/add_contract_dup.svg" class="img_icon"/></mat-icon>
                        <span class="three_dot_text">{{'contract.connect.add' | translate}}</span>
                      </button>
                      <button mat-menu-item class="div_icon" *ngIf="status == 'complete' && this.isOrg == 'off'" (click)="downloadContract(item.id);">
                        <mat-icon><img src="../../assets/img/download_contract.svg" class="img_icon"/></mat-icon>
                        <span class="three_dot_text">{{'contract.download' | translate}}</span>
                      </button>
                      <button mat-menu-item class="div_icon" *ngIf="status == 'complete' && isQLHD_13 && this.isOrg == 'off'" (click)="shareContract(item.id);">
                        <mat-icon><img src="../../assets/img/share_contract.svg" class="img_icon"/></mat-icon>
                        <span class="three_dot_text">{{'contract.share' | translate}}</span>
                      </button>
                      <button mat-menu-item class="div_icon" *ngIf="status == 'complete' && this.isOrg == 'off'" (click)="uploadAttachFiles(item);">
                        <mat-icon><img src="../../assets/img/attach-square.svg" class="img_icon"/></mat-icon>
                        <span class="three_dot_text">{{'upload_attach_files' | translate}}</span>
                      </button>
                      <button mat-menu-item class="div_icon" *ngIf="status == 'complete' && this.isOrg == 'off' && item.liquidationContractId == null && item.originalContractId == null && this.isQLHD_16" (click)="addContractLiquidationNew(item.id);">
                        <mat-icon><img src="../../assets/img/clipboard-tick.svg" class="img_icon"/></mat-icon>
                        <span class="three_dot_text">{{'contract.liquidation' | translate}}</span>
                      </button>
                      <button mat-menu-item class="div_icon" (click)="processHandleContract(item.id)">
                        <mat-icon><img src="../../assets/img/programming-arrow.svg" class="img_icon"/></mat-icon>
                        <span class="three_dot_text">{{'view.processing.flow' | translate}}</span>
                      </button>
                    </mat-menu>
                  </div>
                </div>
                <!-- <div class="col-md-3 item_icon"> -->
                    <!-- <div style="display: flex; justify-content: center;"> -->
                        <!-- <div *ngIf="this.isOrg == 'off'"> -->
                        <!-- <div class="div_icon" *ngIf="(status == 'draft' || status == 'processing' || status == 'expire' || status == 'overdue' || status == 'complete') && isQLHD_08 && this.isOrg == 'off'">
                            <img src="../../assets/img/icon_copy.svg" class="img_icon" ngbTooltip="{{'contract.copy' | translate}}" (click)="openCopy(item.id)" />
                        </div>
                        <div class="div_icon" *ngIf="status == 'draft' && isQLHD_02 && this.isOrg == 'off'">
                            <img src="../../assets/img/icon_edit.svg" class="img_icon" ngbTooltip="{{'contract.edit' | translate}}" (click)="openEdit(item.id)" />
                        </div>
                        <div class="div_icon" *ngIf="status == 'draft' && this.isOrg == 'off'">
                            <img src="../../assets/img/icon_delete.svg" class="img_icon" ngbTooltip="{{'contract.delete' | translate}}" (click)="deleteContract(item.id)" />
                        </div>
                        <div class="div_icon" *ngIf="(status == 'processing' || status == 'expire' || status == 'complete') && isQLHD_12 && this.isOrg == 'off'">
                            <img src="../../assets/img/icon_view_connect.svg" class="img_icon" ngbTooltip="{{'contract.connect.view' | translate}}" (click)="contractConnect(item.id)" />
                        </div>
                        <div class="div_icon" *ngIf="status == 'complete' && isQLHD_11 && this.isOrg == 'off'">
                            <img src="../../assets/img/icon_add_connect.svg" class="img_icon" ngbTooltip="{{'contract.connect.add' | translate}}" (click)="addContractConnectNew(item.id)" />
                        </div>
                        <div class="div_icon" *ngIf="(status == 'processing' || status == 'expire') && isQLHD_09 && this.isOrg == 'off'">
                            <img src="../../assets/img/icon_stop.svg" class="img_icon" ngbTooltip="{{'contract.cancel' | translate}}" (click)="cancelContract(item.id);" />
                        </div>
                        <div class="div_icon" *ngIf="status == 'complete' && this.isOrg == 'off'">
                            <img src="../../assets/img/icon_download.svg" class="img_icon" ngbTooltip="{{'contract.download' | translate}}" (click)="downloadContract(item.id);" />
                        </div>
                        <div class="div_icon" *ngIf="status == 'complete' && isQLHD_13 && this.isOrg == 'off'">
                            <img src="../../assets/img/icon_share.svg" class="img_icon" ngbTooltip="{{'contract.share' | translate}}" (click)="shareContract(item.id);" />
                        </div>
                        <div class="div_icon" *ngIf="status == 'complete'">
                            <img src="../../assets/img/upload_file.svg" class="img_icon" ngbTooltip="{{'upload_attach_files' | translate}}" (click)="uploadAttachFiles(item);" />
                        </div>
                        <div class="div_icon" *ngIf="status == 'cancel'">
                            <img src="../../assets/img/cancel_notes.svg" class="img_icon" ngbTooltip="{{'reasson.cancel.contract' | translate}}" (click)="ViewReasonCancel(item.id)" />
                        </div>
                        <div class="div_icon" *ngIf="status == 'complete' && this.isOrg == 'off' && item.liquidationContractId == null && item.originalContractId == null && this.isQLHD_16">
                            <img src="../../../assets/img/contract-liquidation.svg" class="img_icon" ngbTooltip="{{'contract.liquidation' | translate}}" (click)="addContractLiquidationNew(item.id);" />
                        </div> -->
                    <!-- </div> -->
                <!-- </div> -->

            </div>
          </div>
        </div>
        <div *ngIf="pageTotal == 0" style="min-height: 65vh;display: table;top: 0;left: 0;width: 100%;text-align: center;margin-top: 20px;">
            <div style="display: table-cell;vertical-align: middle;">
                <img src="../../../assets/img/no_data.svg" />
                <div style="color: #94A7C6">{{'no.data' | translate}}</div>
            </div>
        </div>

      </ng-template>
    </div>
    <div class="contract_footer">
      <div class="footer_contract_per_page">
        <div>Số lượng hiển thị&nbsp;</div>
          <select [(ngModel)]="this.page" (change)="changePageNumber($event)">
              <option value="" hidden>10</option>
              <option *ngFor="let d of this.pageOptions">{{d}}</option>
          </select>
          <div>&nbsp;{{'contracts.per.page' | translate}}</div>
      </div>
      <div class="footer_title"></div>
      <div class="footer_pagination">
        <pagination-controls *ngIf="pageTotal > 0;" (pageChange)="p=$event; getContractList()" previousLabel="" nextLabel=""></pagination-controls>
        <div class="enterPage" *ngIf="pageTotal > 0">
            <input class="text-enterPage" placeholder="{{'contract.enterPage' | translate}}" (keypress)="validateInput($event)" [(ngModel)]="enterPage" (input)="onInput($event)"/>
            <p>của {{countPage()}} trang</p>
        </div>
    </div>
      <!-- <div class="footer_page_number">{{'chart.number' | translate}}: {{this.getPageStartEnd()}} / {{pageTotal}} -->
      <div class="footer_page_number">Hiển thị <span style="color:#001A4D ;">{{this.getPageStartEnd()}} / {{pageTotal}}</span> kết quả
      </div>
    </div>
    <div class="contract_footer_responsive">
      <div class="contract_footer_per_page_responsive">
          <div>Số lượng hiển thị&nbsp;</div>
          <select [(ngModel)]="this.page" (change)="changePageNumber($event)">
            <option value="" hidden>10</option>
            <option *ngFor="let d of this.pageOptions">{{d}}</option>
          </select>
        <div>&nbsp;{{'contracts.per.page' | translate}}</div>
      </div>
    <div class="footer_pagination">
      <pagination-controls *ngIf="pageTotal > 0;" (pageChange)="p=$event; getContractList()" previousLabel="" nextLabel=""></pagination-controls>
      <div class="enterPage" *ngIf="pageTotal > 0">
          <input class="text-enterPage" placeholder="{{'contract.enterPage' | translate}}" (keypress)="validateInput($event)" [(ngModel)]="enterPage" (input)="onInput($event)"/>
          <p>của {{countPage()}} trang</p>
      </div>
      </div>
        <div class="footer_page_number">Hiển thị <span style="color:#001A4D ;">{{this.getPageStartEnd()}} / {{pageTotal}}</span> kết quả
      </div>
    </div>
    <div class="contract_footer_pagination_responsive">
      <pagination-controls *ngIf="pageTotal > 0;" (pageChange)="p=$event; getContractList()" previousLabel="" nextLabel=""></pagination-controls>
      <div class="enterPage" *ngIf="pageTotal > 0">
          <input class="text-enterPage" placeholder="{{'contract.enterPage' | translate}}" (keypress)="validateInput($event)" [(ngModel)]="enterPage" (input)="onInput($event)"/>
          <p>của {{countPage()}} trang</p>
      </div>
    </div>
    <div>{{roleMess | translate}}</div>
</div>

<!-- Hợp đồng hoàn thành -->
<div *ngIf="(this.typeDisplay == 'downloadMany' && this.filter_status == 30)">
    <div class="row container-fluid-bg">
      <div class="margin-top-16">
        <p-selectButton [options]="stateOptions" [(ngModel)]="isOrg" optionLabel="label" optionValue="value" (click)="changeTab()" class="row">
          <ng-template #options let-item>
              <span class="button-classify">{{item.label | translate}}</span>
          </ng-template>
        </p-selectButton>
      </div>
        <ng-template [ngIf]="!roleMess">
          <div class="row cancel-padding" style="margin: 16px auto;">
            <div class="col-lg-8-7 btn-padding-right">
                <div class="input-line search">
                    <!-- <img src="../../assets/img/icon_search.svg" class="input-img" /> -->
                    <input type="text" id="filter_name" [value]="filter_name" class="input-text" placeholder="{{'contract.search.name.placeholder' | translate}}" (keyup)="autoSearch($event)" />
                    <!-- <img src="../../assets/img/icon_search_group.svg" class="input-img" (click)="searchContract()" /> -->
                </div>
            </div>

            <div class="col-lg-1-1 col-md-4 btn_search btn-padding-right btn-padding-left" >
              <button class="btn-block btn_advanced" (click)="searchContract()" >
                {{'btn.advance' | translate}}
                <img src="../../assets/img/vector_advance.svg" class="input-img" />
              </button>
            </div>

            <div class="col-lg-1-1 col-md-4 btn_search btn-padding-right btn-padding-left" *ngIf="this.typeDisplay === 'downloadMany'">
              <button (click)="downloadManyContract()" class="btn-block btn_cancel">{{'contract.down'| translate}}</button>
            </div>

            <div class="col-lg-1-1 col-md-4 btn_search btn-padding-left" *ngIf="this.typeDisplay === 'downloadMany'">
              <button (click)="cancelDownloadMany()" class="btn-block btn_cancel">{{'cancel'| translate}}</button>
            </div>

            <!-- <div *ngIf="this.typeDisplay === 'downloadMany'" style="padding-top: 10px;">
                <button class="btn_submit" (click)="downloadManyContract()">{{'contract.down'| translate}}</button>

                <button class="btn_submit" style="width: 90px;" (click)="cancelDownloadMany()">{{'cancel'| translate}}</button>
            </div> -->
          </div>

          <div class="row list_header" *ngIf="pageTotal > 0;">
              <!-- <div class="col-xxl-1 col-md-1" style="text-align: left;" *ngIf="this.filter_status == 30">
                <input type="checkbox" style="width: 16px; height: 16px;" id="allDownload" name="allDownload" [(ngModel)]="checkedAll" (click)="toggleDownload(checkedAll)">
              </div> -->

              <div class="col-sm-5 bg-header">
                <div class="col-sm-1" style="text-align: justify;">
                  <input type="checkbox" style="width: 16px; height: 16px;" id="allDownload" name="allDownload" [(ngModel)]="checkedAll" (click)="toggleDownload(checkedAll)">
                </div>
                <div class="col-sm-11">
                  {{'contract.process' | translate}}
                </div>
              </div>

              <div class="col-sm-2 bg-header">{{'report.status.contract' | translate}}
                <!-- <img src="../../assets/img/sort.svg"/> -->
              </div>
              <div class="col-sm-2 bg-header">{{'create-time' | translate}}
                <!-- <img src="../../assets/img/sort.svg"/> -->
              </div>
              <!-- <div class="col-md-2">{{'expiration-date' | translate}}
                <img src="../../assets/img/sort.svg"/>
              </div> -->
              <div class="col-sm-2 bg-header">{{'complete-time' | translate}}
                <!-- <img src="../../assets/img/sort.svg"/> -->
              </div>
              <div class="col-sm-1 bg-header"></div>
          </div>
          <div *ngIf="pageTotal > 0" class="table-contract">
            <div class="item_contract" *ngFor="let item of contracts | paginate:{itemsPerPage: pageDownload, currentPage:p, totalItems: pageTotal}">
                <div class="row">
                  <!--Cột 1-->
                  <!-- <div class="col-xxl-1 col-md-1 item_icon">
                    <div style="display: flex;">
                        <div class="col-md-1 calendar_create" style="display: flex;">
                          <div>
                            <input class="input-checkbox" name="item" type="checkbox" value="{{item.contractId}}" [(ngModel)]="item.checked"/>
                            <input class="input-checkbox" name="item" type="checkbox" [(ngModel)]="item.checked" (click)="toggleOneDownload(item)"(change)="selectContract(item)" />
                          </div>
                        </div>
                        <div class="col-md-1">
                          <div style="margin-left: 35px;">
                            <img src="../../assets/img/frame_contract.svg" style="width: 72px;">
                          </div>
                        </div>
                    </div>
                  </div> -->
                    <!--Cột 2-->
                    <div class="col-sm-5">
                        <div class="flex-container">
                            <div>
                              <input class="input-checkbox" name="item" type="checkbox" [(ngModel)]="item.checked" (click)="toggleOneDownload(item)"(change)="selectContract(item)" />
                            </div>

                            <div class="col-md-11" style="display: flex;margin-left: 12px; cursor: pointer;" (click)="isQLHD_07?openDetail(item.id):null">
                              <img src="../../assets/img/frame_contract.svg" style="width: 72px;">
                              <div style="margin-left: 12px;">
                                <div class="item_contract_name">
                                    <a class="item_contract_name" style="text-decoration: none;"  [routerLink]="['/main/form-contract/detail', item.id]" [queryParams]="{
                                            'page': this.p,
                                            'filter_type': this.filter_type,
                                            'filter_contract_no': this.filter_contract_no,
                                            'filter_from_date': this.filter_from_date,
                                            'filter_to_date': this.filter_to_date,
                                            'isOrg': this.isOrg,
                                            'organization_id': this.organization_id,
                                            'status': this.status
                                          }">{{item.name}}</a>
                                </div>

                                <div class="row" *ngFor="let itemPar of sortParticipant(item.participants); let index = index">
                                    <div class="item_contract_infor">{{'side' | translate}} {{getNameOrganization(itemPar, index)}}
                                    </div>
                                </div>

                                <!-- <div class="row">
                                    <div class="item_contract_infor">{{'contract.status' | translate}}:
                                        <span class="status_blue">{{this.filter_status | pipe | translate}}
                                            {{getNameStatusCeca(item.status, item.ceca_push, item.ceca_status) |
                                            translate}}</span>
                                    </div>
                                </div>
                                <div class="row">
                                  <div class="item_contract_infor">
                                    <u style="color: #106DB6; cursor: pointer" (click)="processHandleContract(item.id)">{{'contract_processing_flow' | translate}}</u>
                                  </div>
                                </div> -->
                            </div>
                          </div>
                        </div>
                    </div>

                    <!--Cột 3: Trạng thái HĐ-->
                    <div class="col-sm-2 calendar_create">
                      <div class="item_contract_status">
                        <span class="status_blue" [ngStyle]="{'color': this.color, 'background-color': this.backgroundColor}">{{this.filter_status | pipe | translate}}</span>
                      </div>
                    </div>

                    <!--Cột 4: Ngày tạo-->
                    <div class="col-sm-2 calendar_create">
                        <div><i class="fa fa_icon"></i><span class="item_date">{{item.created_at | date:
                                'dd/MM/yyyy HH:mm:ss'}}</span></div>
                    </div>

                    <!--Cột 5: Ngày cập nhật-->
                    <div class="col-sm-2 calendar_deadline">
                        <div><i class="fa fa_icon"></i><span class="item_date">{{item.success_time | date:
                                'dd/MM/yyyy HH:mm:ss'}}</span></div>
                    </div>

                    <!--Cột 6: Thao tác-->
                    <div class="col-sm-1 item_icon">
                      <div class="three_dot" style="display: flex; justify-content: flex-end;">
                        <button mat-icon-button [matMenuTriggerFor]="menu" style="border: none; background-color: white;">
                          <mat-icon><img src="../../assets/img/lets-icons_meatballs-menu.svg"/></mat-icon>
                        </button>
                        <mat-menu #menu="matMenu">
                          <button mat-menu-item class="div_icon" *ngIf="(status == 'processing' || status == 'expire' || status == 'complete') && isQLHD_12 && this.isOrg == 'off'" (click)="contractConnect(item.id)">
                            <mat-icon><img src="../../assets/img/document-text.svg" class="img_icon"/></mat-icon>
                            <span class="three_dot_text">{{'contract.connect.view' | translate}}</span>
                          </button>
                          <button mat-menu-item class="div_icon" *ngIf="status == 'complete' && isQLHD_11 && this.isOrg == 'off'" (click)="addContractConnectNew(item.id)">
                            <mat-icon><img src="../../assets/img/add_contract_dup.svg" class="img_icon"/></mat-icon>
                            <span class="three_dot_text">{{'contract.connect.add' | translate}}</span>
                          </button>
                          <button mat-menu-item class="div_icon" *ngIf="status == 'complete' && this.isOrg == 'off'" (click)="downloadContract(item.id);">
                            <mat-icon><img src="../../assets/img/download_contract.svg" class="img_icon"/></mat-icon>
                            <span class="three_dot_text">{{'contract.download' | translate}}</span>
                          </button>
                          <button mat-menu-item class="div_icon" *ngIf="status == 'complete' && isQLHD_13 && this.isOrg == 'off'" (click)="shareContract(item.id);">
                            <mat-icon><img src="../../assets/img/share_contract.svg" class="img_icon"/></mat-icon>
                            <span class="three_dot_text">{{'contract.share' | translate}}</span>
                          </button>
                          <button mat-menu-item class="div_icon" (click)="processHandleContract(item.id)">
                            <mat-icon><img src="../../assets/img/programming-arrow.svg" class="img_icon"/></mat-icon>
                            <span class="three_dot_text">{{'view.processing.flow' | translate}}</span>
                          </button>
                        </mat-menu>
                      </div>
                    </div>
                </div>
            </div>
          </div>
          <div *ngIf="pageTotal == 0" style="min-height: 65vh;display: table;top: 0;left: 0;width: 100%;text-align: center;margin-top: 20px;">
              <div style="display: table-cell;vertical-align: middle;">
                  <img src="../../../assets/img/no_data.svg" />
                  <div style="color: #94A7C6">{{'no.data' | translate}}</div>
              </div>
          </div>
        </ng-template>

        <div>{{roleMess | translate}}</div>
      </div>
      <div class="contract_footer">
        <div class="footer_contract_per_page">
          <div>Hiển thị&nbsp;</div>
          <select [(ngModel)]="this.page" (change)="changePageNumber($event)">
              <option value="" hidden>10</option>
              <option *ngFor="let d of this.pageOptions">{{d}}</option>
          </select>
          <div>&nbsp;{{'contracts.per.page' | translate}}</div>
        </div>
        <div class="footer_title"></div>
        <div class="footer_pagination">
            <pagination-controls *ngIf="pageTotal > 0;" (pageChange)="p=$event; getPageData()" previousLabel="" nextLabel=""></pagination-controls>
        </div>
        <div class="footer_page_number">{{'chart.number' | translate}}: {{this.getPageStartEnd()}} / {{pageTotal}}
        </div>
    </div>
</div>

<!--Phát hành hợp đồng-->
<div *ngIf="(this.typeDisplay == 'release' && this.filter_status == 0)">
    <div class="row container-fluid-bg">
      <div class="margin-top-16">
        <p-selectButton [options]="stateOptions" [(ngModel)]="isOrg" optionLabel="label" optionValue="value" (click)="changeTab()" class="row">
          <ng-template #options let-item>
              <span class="button-classify">{{item.label | translate}}</span>
          </ng-template>
        </p-selectButton>
      </div>
        <ng-template [ngIf]="!roleMess">
          <div class="row cancel-padding" style="margin: 16px auto;">
            <div class="col-lg-8-7 btn-padding-right">
                <div class="input-line search">
                    <!-- <img src="../../assets/img/icon_search.svg" class="input-img" /> -->
                    <input type="text" id="filter_name" [value]="filter_name" class="input-text" placeholder="{{'contract.search.name.placeholder' | translate}}" (keyup)="autoSearch($event)" />
                    <!-- <img src="../../assets/img/icon_search_group.svg" class="input-img" (click)="searchContract()" /> -->
                </div>
            </div>

            <div class="col-lg-1-1 btn-padding-right btn-padding-left btn_search">
              <button class="btn-block btn_advanced" (click)="searchContract()" >
                {{'btn.advance' | translate}}
                <img src="../../assets/img/vector_advance.svg" class="input-img" />
              </button>
            </div>

            <div class="col-lg-1-1 btn-padding-right btn-padding-left btn_search">
              <button (click)="releaseMany()" class="btn-block btn_cancel">{{'release'| translate}}</button>
            </div>

            <div class="col-lg-1-1 btn-padding-left btn_search">
              <button (click)="cancelDownloadMany()" class="btn-block btn_cancel">{{'cancel'| translate}}</button>
            </div>
          </div>

          <div class="row list_header" *ngIf="pageTotal > 0;">
              <!-- <div class="col-md-4"></div>
              <div class="col-md-2">{{'create-date' | translate}}</div>
              <div class="col-md-2">{{'expiration-date' | translate}}</div>
              <div class="col-md-3">{{'action' | translate}}</div>

              <div *ngIf="this.filter_status == 0" class="col-md-1">
                  <input style="margin-left: 4px;" id="allRelease" name="allRelease" type="checkbox" [(ngModel)]="checkedAll" (click)="toggleReleaseAll(checkedAll)" />
              </div> -->

              <!-- <div class="col-sm-1 bg-header" style="text-align: left;" *ngIf="this.filter_status == 0">
                <input type="checkbox" style="width: 16px; height: 16px;" id="allRelease" name="allRelease" type="checkbox" [(ngModel)]="checkedAll" (click)="toggleReleaseAll(checkedAll)">
              </div> -->
              <div class="col-sm-5 bg-header">
                <div class="col-sm-1" style="text-align: justify;">
                  <input type="checkbox" style="width: 16px; height: 16px;" id="allRelease" name="allRelease" type="checkbox" [(ngModel)]="checkedAll" (click)="toggleReleaseAll(checkedAll)">
                </div>
                <div class="col-sm-11">
                  {{'contract.process' | translate}}
                </div>
              </div>
              <div class="col-sm-2 bg-header">{{'report.status.contract' | translate}}
                <!-- <img src="../../assets/img/sort.svg"/> -->
              </div>
              <div class="col-sm-2 bg-header">{{'create-time' | translate}}
                <!-- <img src="../../assets/img/sort.svg"/> -->
              </div>
              <div class="col-sm-2 bg-header">{{'time.update' | translate}}
                <!-- <img src="../../assets/img/sort.svg"/> -->
              </div>
              <div class="col-sm-1 bg-header"></div>
          </div>
          <div *ngIf="pageTotal > 0" class="table-contract">
            <div class="item_contract" *ngFor="let item of contracts | paginate:{itemsPerPage: pageDownload, currentPage:p, totalItems: pageTotal}">
                <div class="row">

                    <!--Cột 1-->
                    <!-- <div class="col-xxl-1 col-md-1 item_icon" *ngIf="this.filter_status == 0">
                      <div style="display: flex;">
                          <div class="col-md-1 calendar_create" style="display: flex;">
                            <div>
                              <input class="input-checkbox" name="item" type="checkbox" [(ngModel)]="item.checked" (click)="toggleOneRelease(item)" (change)="selectContract(item)" />
                            </div>
                          </div>
                      </div>
                    </div> -->
                    <!--Cột 2-->
                    <div class="col-sm-5">
                        <div class="flex-container">
                            <div>
                              <input class="input-checkbox" name="item" type="checkbox" [(ngModel)]="item.checked" (click)="toggleOneRelease(item)" (change)="selectContract(item)" />
                            </div>

                            <div class="col-md-11" style="display: flex;margin-left: 12px; cursor: pointer;" (click)="isQLHD_07?openDetail(item.id):null">
                              <img src="../../assets/img/frame_contract.svg" style="width: 72px;">
                              <div style="margin-left: 12px;">
                                <div class="item_contract_name">
                                    <a class="item_contract_name" style="text-decoration: none;"  [routerLink]="['/main/form-contract/detail', item.id]" [queryParams]="{
                                            'page': this.p,
                                            'filter_type': this.filter_type,
                                            'filter_contract_no': this.filter_contract_no,
                                            'filter_from_date': this.filter_from_date,
                                            'filter_to_date': this.filter_to_date,
                                            'isOrg': this.isOrg,
                                            'organization_id': this.organization_id,
                                            'status': this.status
                                          }">{{item.name}}</a>
                                </div>

                                <div class="row" *ngFor="let itemPar of sortParticipant(item.participants); let index = index">
                                    <div class="item_contract_infor">{{'side' | translate}} {{getNameOrganization(itemPar, index)}}
                                    </div>
                                </div>

                                <!-- <div class="row">
                                    <div class="item_contract_infor">{{'contract.status' | translate}}:
                                        <span class="status_blue">{{this.filter_status | pipe | translate}}
                                            {{getNameStatusCeca(item.status, item.ceca_push, item.ceca_status) |
                                            translate}}</span>
                                    </div>
                                </div>
                                <div class="row">
                                  <div class="item_contract_infor">
                                    <u style="color: #106DB6; cursor: pointer" (click)="processHandleContract(item.id)">{{'contract_processing_flow' | translate}}</u>
                                  </div>
                                </div> -->
                            </div>
                          </div>
                        </div>
                    </div>

                    <!--Cột 3: Trạng thái HĐ-->
                    <div class="col-sm-2 calendar_create">
                      <div class="item_contract_status">
                        <span class="status_blue" [ngStyle]="{'color': this.color, 'background-color': this.backgroundColor}">{{this.filter_status | pipe | translate}}</span>
                      </div>
                    </div>

                    <!--Cột 4: Ngày tạo-->
                    <div class="col-sm-2 calendar_create">
                        <div><i class="fa fa_icon"></i><span class="item_date">{{item.created_at | date:
                                'dd/MM/yyyy HH:mm:ss'}}</span></div>
                    </div>

                    <!--Cột 5: Ngày cập nhật-->
                    <div class="col-sm-2 calendar_deadline">
                        <div><i class="fa fa_icon"></i><span class="item_date">{{item.updated_at | date:
                                'dd/MM/yyyy HH:mm:ss'}}</span></div>
                    </div>

                    <!--Cột 6: Thao tác-->
                    <div class="col-sm-1 col-md-1 item_icon">
                      <div class="three_dot" style="display: flex; justify-content: flex-end;">
                        <button mat-icon-button [matMenuTriggerFor]="menu" style="border: none; background-color: white;">
                          <mat-icon><img src="../../assets/img/lets-icons_meatballs-menu.svg"/></mat-icon>
                        </button>
                        <mat-menu #menu="matMenu">
                          <button mat-menu-item  class="div_icon" *ngIf="(status == 'draft' || status == 'processing' || status == 'expire' || status == 'overdue' || status == 'complete') && isQLHD_08 && this.isOrg == 'off'" (click)="openCopy(item.id)">
                            <mat-icon><img src="../../assets/img/copy.svg" class="img_icon"/></mat-icon>
                            <span class="three_dot_text">{{'contract.copy' | translate}}</span>
                          </button>
                          <button mat-menu-item class="div_icon" (click)="processHandleContract(item.id)">
                            <mat-icon><img src="../../assets/img/programming-arrow.svg" class="img_icon"/></mat-icon>
                            <span class="three_dot_text">{{'view.processing.flow' | translate}}</span>
                          </button>
                          <button mat-menu-item class="div_icon" *ngIf="status == 'draft' && isQLHD_02 && this.isOrg == 'off'" (click)="openEdit(item.id)">
                            <mat-icon><img src="../../assets/img/edit.svg" class="img_icon"/></mat-icon>
                            <span class="three_dot_text">{{'contract.edit' | translate}}</span>
                          </button>
                          <button mat-menu-item class="div_icon" *ngIf="status == 'draft' && this.isOrg == 'off'" (click)="deleteContract(item.id)">
                            <mat-icon><img src="../../assets/img/trash_contract.svg" class="img_icon"/></mat-icon>
                            <span class="three_dot_text">{{'contract.delete' | translate}}</span>
                          </button>
                        </mat-menu>
                      </div>
                    </div>
                </div>
              </div>
            </div>
            <div *ngIf="pageTotal == 0" style="min-height: 65vh;display: table;top: 0;left: 0;width: 100%;text-align: center;margin-top: 20px;">
                <div style="display: table-cell;vertical-align: middle;">
                    <img src="../../../assets/img/no_data.svg" />
                    <div style="color: #94A7C6">{{'no.data' | translate}}</div>
                </div>
            </div>
        </ng-template>

        <div>{{roleMess | translate}}</div>
    </div>
    <div class="contract_footer">
      <div class="footer_title"></div>
      <div class="footer_pagination">
          <pagination-controls *ngIf="pageTotal > 0;" (pageChange)="p=$event; release()" previousLabel="" nextLabel=""></pagination-controls>
      </div>
      <!-- <div class="footer_page_number">{{'chart.number' | translate}}: {{this.getPageStartEnd()}} / {{pageTotal}} -->
      <div class="footer_page_number">Hiển thị <span style="color:#001A4D ;">{{this.getPageStartEnd()}} / {{pageTotal}}</span> kết quả
      </div>
    </div>
</div>

<!-- Xóa nhiều bản nháp -->
<div *ngIf="(this.typeDisplay == 'multiDeleteDraft' && this.filter_status == 0)">
  <div class="row container-fluid-bg">
      <div class="margin-top-16">
        <p-selectButton [options]="stateOptions" [(ngModel)]="isOrg" optionLabel="label" optionValue="value" (click)="changeTab()" class="row">
          <ng-template #options let-item>
              <span class="button-classify">{{item.label | translate}}</span>
          </ng-template>
        </p-selectButton>
      </div>
      <ng-template [ngIf]="!roleMess">
        <div class="row cancel-padding" style="margin: 16px auto;">
          <div class="col-lg-8-7 btn-padding-right">
              <div class="input-line search">
                  <!-- <img src="../../assets/img/icon_search.svg" class="input-img" /> -->
                  <input type="text" id="filter_name" [value]="filter_name" class="input-text" placeholder="{{'contract.search.name.placeholder' | translate}}" (keyup)="autoSearch($event)" />
                  <!-- <img src="../../assets/img/icon_search_group.svg" class="input-img" (click)="searchContract()" /> -->
              </div>
          </div>

          <div class="col-lg-1-1 btn-padding-right btn-padding-left btn_search">
            <button class="btn-block btn_advanced" (click)="searchContract()" >
              {{'btn.advance' | translate}}
              <img src="../../assets/img/vector_advance.svg" class="input-img" />
            </button>
          </div>

          <div class="col-lg-1-1 btn-padding-right btn-padding-left btn_search">
            <button (click)="multiDeleteDraftMany()" class="btn-block btn_cancel">{{'btn.delete'| translate}}</button>
          </div>

          <div class="col-lg-1-1 btn-padding-left btn_search">
            <button (click)="cancelDeleteDraftMany()" class="btn-block btn_cancel">{{'cancel'| translate}}</button>
          </div>
        </div>

        <div class="row list_header" *ngIf="pageTotal > 0;">
            <!-- <div class="col-xxl-1 col-md-1" style="text-align: left;" *ngIf="this.filter_status == 0">
              <input type="checkbox" style="width: 16px; height: 16px;" id="allDeleteDraft" name="allDeleteDraft" type="checkbox" [(ngModel)]="checkedAll" (click)="toggleDeleteDraftAll(checkedAll)">
            </div> -->
            <div class="col-sm-5 bg-header">
              <div class="col-sm-1" style="text-align: justify;">
                <input type="checkbox" style="width: 16px; height: 16px;" id="allDeleteDraft" name="allDeleteDraft" type="checkbox" [(ngModel)]="checkedAll" (click)="toggleDeleteDraftAll(checkedAll)">
              </div>
              <div class="col-sm-11">
                {{'contract.process' | translate}}
              </div>
            </div>
            <div class="col-sm-2 bg-header">{{'report.status.contract' | translate}}
              <!-- <img src="../../assets/img/sort.svg"/> -->
            </div>
            <div class="col-sm-2 bg-header">{{'create-time' | translate}}
              <!-- <img src="../../assets/img/sort.svg"/> -->
            </div>
            <div class="col-sm-2 bg-header">{{'time.update' | translate}}
              <!-- <img src="../../assets/img/sort.svg"/> -->
            </div>
            <div class="col-sm-1 bg-header"></div>
        </div>
        <div *ngIf="pageTotal > 0" class="table-contract">
          <div class="item_contract" *ngFor="let item of contracts | paginate:{itemsPerPage: pageDownload, currentPage:p, totalItems: pageTotal}">
              <div class="row">
                  <!--Cột 1-->
                  <!-- <div class="col-xxl-1 col-md-1 item_icon" *ngIf="this.filter_status == 0">
                    <div style="display: flex;">
                        <div class="col-md-1 calendar_create" style="display: flex;">
                          <div>
                            <input class="input-checkbox" name="item" type="checkbox" [(ngModel)]="item.checked" (click)="toggleOneDraft(item)" (change)="selectContract(item)" (change)="selectContract(item)"/>
                          </div>
                        </div>
                    </div>
                  </div> -->
                  <!--Cột 2-->
                  <div class="col-sm-5">
                      <div class="flex-container">
                          <div>
                            <input class="input-checkbox" name="item" type="checkbox" [(ngModel)]="item.checked" (click)="toggleOneDraft(item)" (change)="selectContract(item)" (change)="selectContract(item)"/>
                          </div>
                          <div class="col-md-11" style="display: flex;margin-left: 12px; cursor: pointer;" (click)="isQLHD_07?openDetail(item.id):null">
                            <img src="../../assets/img/frame_contract.svg" style="width: 72px;">
                            <div style="margin-left: 12px;">
                              <div class="item_contract_name">
                                  <a class="item_contract_name" style="text-decoration: none;"  [routerLink]="['/main/form-contract/detail', item.id]" [queryParams]="{
                                          'page': this.p,
                                          'filter_type': this.filter_type,
                                          'filter_contract_no': this.filter_contract_no,
                                          'filter_from_date': this.filter_from_date,
                                          'filter_to_date': this.filter_to_date,
                                          'isOrg': this.isOrg,
                                          'organization_id': this.organization_id,
                                          'status': this.status
                                        }">{{item.name}}</a>
                              </div>

                              <div class="row" *ngFor="let itemPar of sortParticipant(item.participants); let index = index">
                                  <div class="item_contract_infor">{{'side' | translate}} {{getNameOrganization(itemPar, index)}}
                                  </div>
                              </div>

                              <!-- <div class="row">
                                  <div class="item_contract_infor">{{'contract.status' | translate}}:
                                      <span class="status_blue">{{this.filter_status | pipe | translate}}
                                          {{getNameStatusCeca(item.status, item.ceca_push, item.ceca_status) |
                                          translate}}</span>
                                  </div>
                              </div>
                              <div class="row">
                                <div class="item_contract_infor">
                                  <u style="color: #106DB6; cursor: pointer" (click)="processHandleContract(item.id)">{{'contract_processing_flow' | translate}}</u>
                                </div>
                              </div> -->
                          </div>
                        </div>
                      </div>
                  </div>

                  <!--Cột 3: Trạng thái HĐ-->
                  <div class="col-sm-2 calendar_create">
                    <div class="item_contract_status">
                      <span class="status_blue" [ngStyle]="{'color': this.color, 'background-color': this.backgroundColor}">{{this.filter_status | pipe | translate}}</span>
                    </div>
                  </div>

                  <!--Cột 4: Ngày tạo-->
                  <div class="col-sm-2 calendar_create">
                      <div><i class="fa fa_icon"></i><span class="item_date">{{item.created_at | date:
                              'dd/MM/yyyy HH:mm:ss'}}</span></div>
                  </div>

                  <!--Cột 5: Ngày cập nhật-->
                  <div class="col-sm-2 calendar_deadline">
                      <div><i class="fa fa_icon"></i><span class="item_date">{{item.updated_at | date:
                              'dd/MM/yyyy HH:mm:ss'}}</span></div>
                  </div>

                  <!--Cột 6: Thao tác-->
                  <div class="col-sm-1 item_icon">
                    <div class="three_dot" style="display: flex; justify-content: flex-end;">
                      <button mat-icon-button [matMenuTriggerFor]="menu" style="border: none; background-color: white;">
                        <mat-icon><img src="../../assets/img/lets-icons_meatballs-menu.svg"/></mat-icon>
                      </button>
                      <mat-menu #menu="matMenu">
                        <button mat-menu-item class="div_icon" *ngIf="(status == 'processing' || status == 'expire' || status == 'complete') && isQLHD_12 && this.isOrg == 'off'" (click)="contractConnect(item.id)">
                          <mat-icon><img src="../../assets/img/document-text.svg" class="img_icon"/></mat-icon>
                          <span class="three_dot_text">{{'contract.connect.view' | translate}}</span>
                        </button>
                        <button mat-menu-item class="div_icon" *ngIf="status == 'complete' && isQLHD_11 && this.isOrg == 'off'" (click)="addContractConnectNew(item.id)">
                          <mat-icon><img src="../../assets/img/add_contract_dup.svg" class="img_icon"/></mat-icon>
                          <span class="three_dot_text">{{'contract.connect.add' | translate}}</span>
                        </button>
                        <button mat-menu-item class="div_icon" *ngIf="status == 'complete' && this.isOrg == 'off'" (click)="downloadContract(item.id);">
                          <mat-icon><img src="../../assets/img/download_contract.svg" class="img_icon"/></mat-icon>
                          <span class="three_dot_text">{{'contract.download' | translate}}</span>
                        </button>
                        <button mat-menu-item class="div_icon" *ngIf="status == 'complete' && isQLHD_13 && this.isOrg == 'off'" (click)="shareContract(item.id);">
                          <mat-icon><img src="../../assets/img/share_contract.svg" class="img_icon"/></mat-icon>
                          <span class="three_dot_text">{{'contract.share' | translate}}</span>
                        </button>
                        <button mat-menu-item class="div_icon" (click)="processHandleContract(item.id)">
                          <mat-icon><img src="../../assets/img/programming-arrow.svg" class="img_icon"/></mat-icon>
                          <span class="three_dot_text">{{'view.processing.flow' | translate}}</span>
                        </button>
                      </mat-menu>
                    </div>
                  </div>
              </div>
            </div>
          </div>
          <div *ngIf="pageTotal == 0" style="min-height: 65vh;display: table;top: 0;left: 0;width: 100%;text-align: center;margin-top: 20px;">
              <div style="display: table-cell;vertical-align: middle;">
                  <img src="../../../assets/img/no_data.svg" />
                  <div style="color: #94A7C6">{{'no.data' | translate}}</div>
              </div>
          </div>
      </ng-template>

      <div>{{roleMess | translate}}</div>
  </div>
  <div class="contract_footer">
    <div class="footer_title"></div>
    <div class="footer_pagination">
        <pagination-controls *ngIf="pageTotal > 0;" (pageChange)="p=$event; multiDeleteDraft('changePages')" previousLabel="" nextLabel=""></pagination-controls>
    </div>
    <!-- <div class="footer_page_number">{{'chart.number' | translate}}: {{this.getPageStartEnd()}} / {{pageTotal}} -->
    <div class="footer_page_number">Hiển thị <span style="color:#001A4D ;">{{this.getPageStartEnd()}} / {{pageTotal}}</span> kết quả
    </div>
  </div>
</div>


<ngx-spinner bdColor="rgba(51,51,51,0.8)" size="medium" color="#fff" type="ball-spin-clockwise">
    <p style="font-size: 18px; color: white">{{'sys.processing' | translate}}...</p>
</ngx-spinner>
