<div *ngIf="exportStatuses.length && this.isExpanded" class="export-status-container">
    <div class="export-status-header">
      <div class="title-export">
        Trạng thái xuất báo cáo
      </div>
      <div>
      <button class="toggle-button size-35" (click)="toggleExportStatusList()">
        <div class="zoom_out" *ngIf = "this.isExpanded">
          <img src="../../assets/img/mynaui_minus-solid.svg" style="width: 100%;"/>
        </div>
      </button>
      <button class="cancel-button" (click)="cancelReport()">
        <img src="../../assets/img/iconamoon_close.svg" class="icon-default" style="width: 100%;" />
      </button>      
    </div>
    </div>
  
    <div class="export-status-list" *ngIf="isExpanded">
      <div class="export-status-item" *ngFor="let status of exportStatuses"
           [ngClass]="{'cancelled': status.status === 'cancelled'}">
        <div class="file-info">
          <span class="file-icon">
            <img src="../../assets/img/vscode-icons_file-type-excel2.svg" style="width: 100%;"/>  
          </span>
          <span class="filename">{{ status.filename }}</span>
        </div>
  
        <div class="status-icons">
          <ng-container *ngIf="status.status === 'pending' || status.status === 'processing'">
            <span class="spinner">
              <img src="../../assets/img/icons8-spinner-64.png" style="width: 100%;"/>
            </span>
          </ng-container>
  
          <ng-container *ngIf="status.status === 'completed'">
            <ng-container>
              <button class="download" (click)="downloadExport(status.id, status.filename)">
                <img src="../../assets/img/Vector.svg" class="icon-dowload-default" style="width: 15px;"/>
                <img src="../../assets/img/ci_download.svg" class="icon-dowload-hover" style="width: 24px;"/>
              </button>
            </ng-container>
  
            <!-- <ng-container  *ngIf="status.downloaded">
              <button class="check-button" >
                <img src="../../assets/img/icon_valid.svg" style="width: 110%;"/>
              </button>
            </ng-container> -->
  
            <button class="cancel-button size-35" (click)="cancelExport(status?.id)">
              <img src="../../assets/img/close-circle.svg" class="icon-close-default" style="width: 100%;"/>
              <img src="../../assets/img/close-circle_hover.svg" class="icon-close-hover" style="width: 100%;"/>
            </button>
          </ng-container>
  
          <ng-container *ngIf="status.status === 'failed'">
            <span class="error-icon">
              <i class="fas fa-times-circle"></i>
            </span>
          </ng-container>
        </div>
      </div>
    </div>
</div>

<div class="toggleExport" *ngIf="!this.isExpanded" (click)="toggleExportStatusList()">
  <div *ngIf="hasPendingExports(); else downloadIcon">
    <span class="spinner">
      <img src="../../assets/img/icons8-spinner-64.png" style="width: 100%;"/>
    </span>
  </div>

  <ng-template #downloadIcon>
    <img src="../../assets/img/ci_download _icon.svg"
        />
  </ng-template>
</div>