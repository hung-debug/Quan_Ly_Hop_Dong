<div class="container-fluid-background" style="margin-left: 14px;">
  <!-- <div class="row"> -->
    <!-- <div class="col-md-12">
      <h3>{{'dashboard.contract.received' | translate}}</h3>
    </div> -->
  <div class="row">
    <div class="col-md-6" style="padding: 0 !important;">
      <div class="add-contract-theme">
        <div style="max-width: 450px;">
          <span style="font-size: 18px;">Xin chào, {{this.currentName}}</span>
          <br><br>
          <span>{{'text.dashboard.theme' | translate}}</span>
        </div>
        <br>
        <div class="ceate_contract">
          <button class="btn_add_contract" mat-icon-button [matMenuTriggerFor]="menu">{{'menu.contract.add' | translate}}
            <img src="../../assets/img/add-square_db.svg"/>
          </button>
          <mat-menu #menu="matMenu" style="margin-left: 50px;" class="popup_create_contract" xPosition = "after">
            <button mat-menu-item class="div_icon" (click)="clickAddContract(1);">
              <mat-icon><img src="../../assets/img/document.svg" class="img_icon"/></mat-icon>
              <span class="ceate_contract_text">{{'create.contract.no.template' | translate}}</span>
            </button>
            <button mat-menu-item class="div_icon" (click)="clickAddContract(2);">
              <mat-icon><img src="../../assets/img/document-code-2.svg" class="img_icon"/></mat-icon>
              <span class="ceate_contract_text">{{'create.contract.template' | translate}}</span>
            </button>
            <button mat-menu-item class="div_icon" (click)="clickAddContract(3);">
              <mat-icon><img src="../../assets/img/document-copy.svg" class="img_icon"/></mat-icon>
              <span class="ceate_contract_text">{{'create.contract.batch' | translate}}</span>
            </button>
          </mat-menu>
        </div>
      </div>
    </div>


    <div class="col-xxl-6 col-md-6" style="padding-left: 24px;">

      <div class="contract-processing">
        <div class="row_text_1">
          <span style="color: #286CF5;">Bạn có tài liệu đang soạn chưa hoàn thành!</span>
          <span style="color: #0041C4; cursor: pointer;"><b (click)="openLink('/main/contract/create/draft')">Xem tất cả</b></span>
        </div>
        <br>
        <div class="row_text" *ngFor="let item of contractConnectList; let i = index">
          <div>
            <img src="../../assets/img/frame_contract.svg">
          </div>
          <div class="body_row_1"  id="noti" >
            <div style="padding: 4px;">
              <a (click)="detailContract(item.id)" style="text-decoration: none;">
                <div class="row">
                  <div *ngIf="this.lang == 'vi'" class="col-md-10 item_contract_name1">{{item.name}}</div>
                </div>
                <div class="row" *ngFor="let itemPar of sortParticipant(item.participants); let index = index">
                  <div class="item_contract_infor">{{'side' | translate}} {{getNameOrganization(itemPar, index)}}
                  </div>
                </div>
              </a>
            </div>
          </div>
          <div>
            <div class="icon_draft">
              <img src="../../../assets//img/edit-2.svg" style="width: 16px;" (click)="openEdit(item.id)">
            </div>
            <div class="icon_draft">
              <img src="../../../assets//img/trash.svg" style="width: 16px;" (click)="deleteContract(item.id)">
            </div>
          </div>
          <br>
        </div>
      </div>
    </div>
  </div>

  <div class="row" style="padding-top: 24px;">
    <div class="col-xxl- 6 col-md-6" style="background-color: #FFFFFF; border-radius: 12px; padding: 16px;">
      <span style="font-size: 14px; font-weight: 700;">{{'menu.contract.receive.list' | translate}}</span>
      <div class="container overflow-hidden">
        <div class="row gy">
          <div class="col-6">
           <div class="p-1 border header_card header_card_1" (click)="openLink('/main/c/receive/wait-processing-dashboard')">
            <a [routerLink] = "['/main/c/receive/wait-processing-dashboard']" style="text-decoration: none;">
              <div class="text_header_card">
                <div class="number_header_card">{{numberWaitProcess}}</div>
                <div style="justify-content: center; display: flex;">
                  <img src="../../../assets/img/ellipse_blue.svg" width="12px"/>
                  <div style="color: #A5AEC0; margin-left: 2%;">{{'contract.status.wait-processing' | translate}}</div>
                </div>

              </div>
            </a>
           </div>
          </div>
          <div class="col-6">
            <div class="p-1 border header_card header_card_2" (click)="openLink('/main/c/receive/processed-waiting-dashboard')">
              <a [routerLink]="['/main/c/receive/processed-waiting-dashboard']" style="color: white; text-decoration: none;">
                <div class="text_header_card">
                  <div class="number_header_card">{{numberWaitComplete}}</div>
                  <div style="justify-content: center; display: flex;">
                    <img src="../../../assets/img/Ellipse_yellow.svg" width="12px"/>
                    <div style="color: #A5AEC0; margin-left: 2%;">{{'contract.status.wait-response' | translate}}</div>
                  </div>
                </div>
              </a>
            </div>
          </div>
          <div class="col-6">
            <div class="p-1 border header_card header_card_3" (click)="openLink('/main/c/receive/wait-processing-prepare-expires-dashboard')">
              <a [routerLink]="['/main/c/receive/wait-processing-prepare-expires-dashboard']" style="color: white; text-decoration: none;">
                <div class="text_header_card">
                  <div class="number_header_card">{{numberExpire}}</div>
                  <div style="justify-content: center; display: flex;">
                    <img src="../../../assets/img/Ellipse_orange.svg" width="12px"/>
                    <div style="color: #A5AEC0; margin-left: 2%;">{{'contract.status.expire' | translate}}</div>
                  </div>
                </div>
              </a>
            </div>
          </div>
          <div class="col-6">
            <div class="p-1 border header_card header_card_4" (click)="openLink('/main/c/receive/processed-complete-dashboard')">
              <a [routerLink]="['/main/c/receive/processed-complete-dashboard']" style="color: white; text-decoration: none;">
                <div class="text_header_card">
                  <div class="number_header_card">{{numberComplete}}</div>
                  <div style="justify-content: center; display: flex;">
                    <img src="../../../assets/img/Ellipse_green.svg" width="12px"/>
                    <div style="color: #A5AEC0; margin-left: 2%;">{{'contract.status.complete' | translate}}</div>
                  </div>
                </div>
              </a>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="col-xxl-6 col-md-6" style="padding-left: 24px;">
      <div class="contract-request">
        <div class="row_text_1" style="padding-bottom: 10px;">
          <span style="color: #001A4D; font-weight: 600; font-size: 14px;">{{'request.process' | translate}}</span>
          <span style="color: #0041C4; cursor: pointer;"><b (click)="openLink('/main/c/receive/wait-processing')">Xem tất cả</b></span>
        </div>
        <!-- <br> -->
        <div class="row_text_2" *ngFor="let item of contractRequestList; let i = index" [style.border-bottom]="i != listNotification.length-1 ? '' : ''" style="padding: 4px;margin-bottom: 16px;">
          <div>
            <img src="../../assets/img/frame_contract.svg">
          </div>
          <div class="body_row_1"  id="noti" >
            <div >
              <a (click)="detailContract(item.participant.contract.id)" style="text-decoration: none;">
              <div class="row" style="width: 80%;">
                <div class="col-md-12 item_contract_name1">{{item.participant.contract.name}}</div>
              </div>
              <div class="row">
                <div style="display: flex; justify-content: space-between;">
                  <div style="padding-top: 20px;">
                    <img src="../../../assets/img/path.svg"/>
                    <span *ngIf="item.sign_type.length > 0" class="name_required">{{item.sign_type[0]?.name}}</span>
                    <span *ngIf="item.role == 1" style="color: #EE7200; padding: 5px;">{{'Đang điều phối' | translate}}</span>
                    <span *ngIf="item.role == 2" style="color: #EE7200; padding: 5px;">{{'Đang xem xét' | translate}}</span>
                  </div>
                  <div style="padding-top: 20px;">
                    <img src="../../../assets/img/calendar-tick.svg"/>
                    <span style="color: #8E9AB0; padding: 5px;">{{item.participant.contract.created_time | date:'dd/MM/yyyy HH:mm:ss'}}</span>
                  </div>
                </div>
              </div>
              </a>
            </div>
          </div>
        <br>
      </div>
    </div>
    </div>


  </div>

  <div class="row" style="padding-top: 24px;">

    <div class="col-xxl-6 col-md-6" style="background-color: #FFFFFF; border-radius: 12px; padding: 16px;">
      <div class="row">
        <div class="col-md-6">
          <span style="font-size: 14px; font-weight: 700;">{{'dashboard.contract.created' | translate}}</span>
        </div>
        <div class="col-md-6">
          <p-calendar selectionMode="range" [readonlyInput]="true" [(ngModel)]="date" [showIcon]="true" dateFormat="dd/mm/yy" (onSelect)="searchCountCreate()"></p-calendar>
        </div>
      </div>
      <div class="body-chart" id="chart-column">
        <div class="row" >
          <div class="col-md-6" style="text-align: center;">
            <p-selectButton [options]="stateOptions" [(ngModel)]="isOrg" optionLabel="label" optionValue="value" (click)="search()">
              <ng-template  #options let-item>
                <span style="vertical-align:middle; margin: 0 auto">{{item.label | translate}}</span>
             </ng-template>
            </p-selectButton>
          </div>
          <div class="col-md-6">
            <div *ngIf="isOrg=='on' && this.isQLHD_03">
              <p-treeSelect [(ngModel)]="selectedNodeOrganization" [options]="list" placeholder="{{'all' | translate}}" [filter]="true" filterBy="name"  [droppable]="true" (onNodeSelect)="search()"></p-treeSelect>
            </div>
          </div>
        </div>

        <div class="row" *ngIf="this.isOrg == 'off' || (this.isOrg == 'on' && (this.isQLHD_03 || this.isQLHD_04))">
          <div class="col-md-12">
            <div *ngIf="totalCreate == 0"
              style="height:500px;display: table;top: 0;left: 0;width: 100%;text-align: center;">
              <div style="display: table-cell;vertical-align: middle;">
                <img src="../../../assets/img/empty_data.svg"/>
                <div style="color: #94A7C6;">{{'no.data' | translate}}</div>
              </div>
            </div>
            <div *ngIf="totalCreate > 0  && (this.isOrg == 'off' || (this.isOrg == 'on' && (this.isQLHD_03 || this.isQLHD_04)))" >
              <div [chart]="chartCreated"></div>
<!--              <div style="text-align: center;">{{'chart.contract.created' | translate}}</div>-->
            </div>

            <div *ngIf="totalCreate > 0  && (this.isOrg == 'on' && !this.isQLHD_03 && !this.isQLHD_04)">
              {{'list.org.not.permission' | translate}}
            </div>
          </div>
        </div>

        <div class="row" *ngIf="(this.isOrg == 'on' && (!this.isQLHD_03 && !this.isQLHD_04))">
          <div style="margin-left: 20px;">{{'my.org.not.authen' | translate}}</div>
        </div>

      </div>
    </div>

    <div class="col-xxl-6 col-md-6" style="padding-left: 24px;">
      <div class="package" style="background-color: #FFFFFF; border-radius: 12px; padding: 16px; height: 100%;">
        <div class="row">
          <div class="col-md-12">
            <span style="font-size: 14px; font-weight: 700;">{{'package.document' | translate}}</span>
          </div>
        </div>

       <div class="row item-center" style="align-items: center">
         <div class="col-md-8">
             <div *ngIf="this.loadData1 && this.loadData2" [chart]="chartPieCreated">TỔNG</div>
         </div>

         <div class="col-md-4">
           <div class="mb-5">
             <img src="../../../assets/img/contractused.svg"/>
             <span style="margin-left: 10px;">{{'package.used' | translate}}</span>
           </div>
           <div>
             <img src="../../../assets/img/contractunused.svg"/>
             <span style="margin-left: 10px;">{{'package.unused' | translate}}</span>
           </div>
         </div>

      </div>
    </div>
  </div>
</div>
